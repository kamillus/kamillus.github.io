{"version":3,"sources":["Assets/ontario.jpg","Assets/MedicalOrderSheet-2.jpg","Domain.js","Psych.js","Repositories.js","DomainService.js","Styles.js","SideMenu.js","SideMenuManage.js","Alerts.js","Utilities.js","TokenComponent.js","BackupService.js","HomeScreen.js","SettingsScreen.js","BuildOptions.js","Templates.js","Toolbar.js","Tab.js","Screens.js","PdfGenerator.js","CombineNotesScreen.js","App.js","web-build/register-service-worker.js","Assets/black-1072366_1920.jpg","Assets/MedicalOrderSheet-1.jpg"],"names":["module","exports","Note","constructor","id","text","date","updateDate","openDate","type","patient","this","Date","now","setText","setId","getType","setType","setPatient","getPatient","setOpenDate","Patient","name","setPatientName","getPatientName","setPatientId","getPatientId","prebuiltNotes","concat","x","y","SettingsRepository","getSettings","AsyncStorage","getItem","then","result","settings","JSON","parse","saveSettings","setItem","stringify","console","log","MenuRepository","menu","getMenu","storedMenu","saveMenu","getPhraseByPhrase","phrase","toLowerCase","regex","RegExp","replace","statements","match","getPhraseByShortcut","tag","dict","shortcutMatch","key","Object","keys","items","length","val","undefined","shortcut","test","push","NoteRepository","get_note_data","window","noteRepoData","Promise","resolutionFunc","rejectionFunc","getNotesByPhrase","f","xs","notes","reverse","slice","item","includes","split","filter","item2","map","reduce","value","index","self","indexOf","deleteNoteById","noteId","note","updateNote","createNote","getNoteCount","getLastOpenedNotes","count","sort","getNoteById","array","getPatientNotes","saveNotes","error","update","forEach","part","theArray","TagRepository","createTag","tags","entity","getTagsByTypeAndEntity","getTagsByIdAndType","getsTagsByType","deleteTag","PatientRepository","getPatientById","patients","getPatientByName","updatePatient","createPatient","findAll","PatientService","getNote","setNoteOpenDate","getAllPatients","getPatientNotesById","getPatientNotesByPatientName","patientName","deletePatientNote","savePatient","savePatientNote","noteRepository","patientRepository","p","TagService","getTagsByPatientAndType","getAllPatientTags","SettingsService","setSettings","clearSignatures","data","newData","location","reload","MenuService","searchPhrases","searchPhrasesByShortcut","styles","StyleSheet","create","container","flex","backgroundColor","webButton","marginBottom","color","webButton2","webButton3","mainContainer","listViewContainer","padding","image","resizeMode","justifyContent","menuHeader","paddingTop","Constants","statusBarHeight","header","description","fontSize","patientText","margin","height","paddingHorizontal","borderRadius","borderColor","borderWidth","noteText","marginTop","noteTextWeb","label","form","separator","hairlineWidth","suggestionText","button","textAlign","SideMenu","React","Component","props","super","handleAddPress","saveInput","state","path","join","set","setState","handlePress","currentContent","previousContent","enter","current","navigation","routes","params","addTextContent","closeDrawer","arr","getTitle","obj","getPreviousMenuObject","submenu","contentHistoryStack","menuContent","previousKey","currentTextInsert","resetMenu","schema","pList","len","i","elem","get","categoryPress","pop","topLevelPress","insertPressCurrent","insertPress","capitalizeFirstLetter","string","charAt","toUpperCase","render","View","style","Button","onPress","title","ScrollView","flexDirection","key1","menuTitle","menuVal","handler","addHandler","TextInput","onChangeText","placeholder","borderBottomWidth","marginLeft","marginRight","footerContainer","MenuItem","showInput","Platform","OS","substr","buttonStyle","SideMenuEmbedded","SideMenuManageScreen","handleEdit","newState","k","v","entries","handleDelete","delete","arrayvar","newelement","bind","formatTitle","handlerEdit","handlerDelete","paddingLeft","paddingBottom","borderBottomColor","leftIcon","MenuItemWeb","showEditInput","editAction","saveEditAction","small","containerStyle","titleStyle","WebAlert","visible","navigate","action","callback","Alerts","noteAlert","Alert","alert","cancelable","TextUtility","instance","stripHtmlTags","body","temp","document","createElement","innerHTML","textContent","innerText","TokenComponent","createOrGetToken","s","Array","fill","String","fromCharCode","Math","random","BackupService","backupType","collect","uid","getAllKeys","multiGet","performBackup","importData","restoreFromBackup","sendFile","sendData","doBackup","settingsService","lastBackupDate","content","a","file","Blob","href","URL","createObjectURL","download","click","requestOptions","method","headers","api","fetch","response","json","images","background","img","require","img2","HomeScreen","refreshLastOpened","patientService","innerNotes","promises","innerNote","all","valKeys","noteCategoriesVisible","cacheBuster","setTimeout","meta","build_number","versionNumber","caches","names","componentDidMount","listener","addListener","setNoteCategoriesVisible","reset","ImageBackground","source","StatusBar","barStyle","KeyboardAvoidingView","alignItems","width","icon","Text","b","txt","SettingsScreen","imageUpload","e","target","files","getBase64","base64","signature","debug","backupFileContent","titleText","fontWeight","richTextEnabled","clearSignature","nameChange","restoreBackupFile","resolve","reject","reader","FileReader","onload","onerror","readAsDataURL","toggleRichTextSwitch","downloadContent","clearImages","accept","onChange","src","Switch","trackColor","false","true","thumbColor","ios_backgroundColor","onValueChange","editable","buildOptions","Template","generateFromDict","dictionary","template","getTemplate","pattern","TextTemplate","MedicalOrderSheetImage","MedicalOrderSheetImageCombined","ToolbarComponent","history","position","jspdfOpt","jsPDF","unit","format","orientation","jspdfOpt2","jspdfOpt3","pagebreak","mode","ready","readyToType","extractSignature","componentDidUpdate","prevProps","undo","textHandler","combineNotes","saveNote","combineAction","combinePdf","richText","isVisible","d","order","getOrderText","physicianName","appSettings","templateTime","getMonth","getDate","getFullYear","html2pdf","Worker","from","toPdf","pdf","pdfHeader","datetime","lastname","firstname","order0","order1","physicianName1","signature1","datetime1","backgroundimage","logo","toContainer","toCanvas","save","internal","totalPages","getNumberOfPages","setPage","setFontSize","setTextColor","toLocaleDateString","pageSize","getHeight","addPage","saveAsWord","doc","export2Doc","element","filename","html","blob","url","encodeURIComponent","downloadLink","appendChild","navigator","msSaveOrOpenBlob","removeChild","saveAsPdf","TextTeplate","setFont","setFontType","splitText","splitTextToSize","saveOrderSheetPdf","orderSheet","m","exec","insertSignature","insertHandler","showPdfToolbar","TabComponent","selectedIndex","buttons","refreshTabs","findIndex","currentNoteId","tabPress","noteHandler","updateIndex","shouldComponentUpdate","nextProps","nextState","formatTab","textStyle","NoteDetailScreen","handleSelectionChange","nativeEvent","selection","handleKeyPress","event","charKeyBuffer","chars","keyCode","keyBufferState","keyBuffer","substring","c","preventDefault","quillRef","setSelection","start","insertText","openNote","reactQuillRef","getParam","toString","drawer","noteInputFocus","showSuggestion","end","pageDrawer","editor","editorReady","editorModules","toolbar","setParams","_addTextContent","togglePageDrawer","_togglePageDrawer","htmlHandleSelectionChange","newSelection","_addRichTextContent","clipboard","dangerouslyPasteHTML","querySelectorAll","className","deleteText","selected","quill","attachQuillRefs","keyboardDidShowListener","Keyboard","_keyboardDidShow","keyboardDidHideListener","_keyboardDidHide","saveContent","saveContentAsk","saveNoteAsk","componentWillUnmount","remove","processText","getEditor","createSignatureStyle","getElementsByTagName","showMessage","message","navigateToCombineNote","onFocus","alignSelf","theme","onKeyDown","onChangeSelection","range","ref","el","modules","onKeyPress","onSelectionChange","multiline","next","refs","behavior","navigationOptions","headerTitle","headerLeft","top","left","right","bottom","Dimensions","size","toggleDrawer","resetAction","StackActions","actions","NavigationActions","routeName","dispatch","goBack","headerRight","SuggestionComponent","searchMode","searchText","startsWith","val2","toggleSearchmode","focus","inputSuggestion","listItemPress","keyboardShouldPersistTaps","blurOnSubmit","onBlur","WebSuggestionComponent","PatientsScreen","ps","filteredData","allTags","filterData","term","exp","search","searchTerm","filterDataByIds","ids","getPatientActions","drawerVisible","parseInt","patientTags","savePatientName","editName","editKey","savePatientTag","editTag","removePatientTag","initialFocus","searchRef","filterTag","filteredTags","currentTagFilter","flexWrap","rounded","badgeStyle","border","FlatList","renderItem","ratingText","status","PatientDetailScreen","refreshNotes","r","deleteNote","subtitle","PdfGenerator","patientNotes","docs","noteType","patientNote","pdfWorker","buffers","buffer","elementToPdfBuffer","mergePdfs","pdfUrl","downloadFile","link","append","addEventListener","revokeObjectURL","once","output","pdfsToMerge","mergedPdf","PDFDocument","pdfBuffer","load","copyPages","getPageIndices","page","setWidth","getWidth","CombineNotesScreen","latestNotes","checked","selectDocument","generateDocument","patientNotes2","formatDate","getHours","getMinutes","iconRight","iconType","checkedIcon","uncheckedIcon","checkedColor","NotesSuggestionDrawer","createDrawerNavigator","Home","screen","drawerLabel","contentComponent","drawerWidth","MainStack","createStackNavigator","NoteDetail","Patients","PatientDetail","Categories","Settings","CombineNotesDetail","initialRouteName","gesturesEnabled","App","serviceWorker","register","scope","info","catch"],"mappings":"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","file":"static/js/app.63b538ff.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/ontario.91d75b1b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MedicalOrderSheet-2.3b3402ff.jpg\";","export class Note\r\n{\r\n    id = 0\r\n    text = \"\"\r\n    date = \"\"\r\n    updateDate = \"\"\r\n    openDate = \"\"\r\n    type = \"\"\r\n    patient = \"\"\r\n\r\n    constructor()\r\n    {\r\n        this.date = Date.now()\r\n        this.updateDate = Date.now()\r\n    }\r\n\r\n    setText(text)\r\n    {\r\n        this.text = text\r\n    }\r\n\r\n    setId(id)\r\n    {\r\n        this.id = id\r\n    }\r\n\r\n    getType()\r\n    {\r\n        return this.type\r\n    }\r\n\r\n    setType(type)\r\n    {\r\n        this.type = type\r\n    }\r\n\r\n    setPatient(patient){\r\n        this.patient = patient\r\n    }\r\n\r\n    getPatient(){\r\n        return this.patient\r\n    }\r\n\r\n    setOpenDate(date)\r\n    {\r\n        this.openDate = date\r\n    }\r\n}\r\n\r\n\r\nexport class Patient\r\n{\r\n    name = \"\"\r\n    id = 0\r\n\r\n\r\n    setPatientName(name) {\r\n        if(!name || name === '')\r\n            throw \"PatientNameEmpty\"\r\n        this.name = name\r\n    }\r\n\r\n    getPatientName()\r\n    {\r\n        return this.name\r\n    }\r\n\r\n    setPatientId(id){\r\n        this.id = id\r\n    }\r\n\r\n    getPatientId()\r\n    {\r\n        return this.id\r\n    }\r\n}","var prebuiltNotes = [{\"text\": \"\", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089547, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling considerably better\\n Sleeping better\\n Okay on range\\n Tolerating medications well\\n \\n Mental Status Exam\\n \\n Euthymic, appropriate affect. Polite. Normal thought form and thought content. No perceptual disturbances endorsed or evident. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n \\n Improving mood and anxiety \\n \\n Plan\\n \\n Continue current medications \\n Follow-up in approximately 2-3 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895495, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling better re: Attention Deficit Hyperactive Disorder (ADHD)\\n Anxiety improved but still significant - some panic symptoms\\n Insomnia remains - some nightmares\\n Clearer on range - helpful\\n Hopes to get out in April but uncertain about possibly more charges\\n Tolerating medications okay but possible headaches with Buspar. \\n \\n Discussed treatment options - consent to trial of Effexor and Immovane based on previous positive response\\n Reviewed potential risks and benefits. Cautioned regarding medication compliance monitoring \\n \\n Mental Status Exam\\n \\n Slightly tense affect. Polite. Normal thought form and thought content. No perceptual disturbances endorsed or evident. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n \\n Improving Attention Deficit Hyperactive Disorder (ADHD)\\n Ongoing Anxiety and Insomnia\\n \\n Plan\\n \\n Discontinue Buspar\\n Restart Effexor and Immovane\\n Follow-up in approximately 3-4 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895514, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Current weight: 225 pounds\\n Feeling, \\u0093okay\\u0094, \\u0093stable\\u0094\\n OK on range, \\u0093good\\u0094 with cellmate\\n Sleeping and eating well\\n Tolerating medications well - no side effects\\n \\n Mental Status Exam\\n \\n Neutral affect, no distress or tension. Polite and cooperative. No psychomotor agitation ore retardation. No abnormal involuntary movements. Normal speech. Normal thought form and thought content Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n \\n Stable psychiatric status\\n No acute/imminent risk issues \\n \\n Plan\\n \\n Continue current medications \\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895526, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling fairly well\\n Looking forward to release in 2 months\\n Okay on range\\n Sleep is little fitful since discontinue Seroquel approximately 1 month ago - suspected of diversion again \\n Tolerating medications well\\n \\n Mental Status Exam\\n \\n Neutral affect. No tension or distress. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal thought form and thought content Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n \\n Stable psychiatric status\\n Significant diversion history\\n \\n Plan\\n \\n Continue current medications \\n Follow-up in approximately 6-8 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895545, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Current weight: 203 pounds\\n Feeling fairly well but some anxiety\\n Low severity psychosis - continues to hear angels or extra terrestrials - particularly in evening - No commands\\n Sleeping and eating well\\n \\n Tolerating medications well - no side effects - requesting/consenting to increase in Risperidone\\n \\n Mental Status Exam\\n \\n Euthymic, appropriate affect. Polite and cooperative. No psychomotor agitation ore retardation. No abnormal involuntary movements. Normal speech. Normal thought form. Thought content/perceptual disturbances as previously detailed above.  No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n \\n Residual psychosis and anxiety\\n \\n Plan\\n \\n Increase risperidone\\n Follow-up in approximately 1 week in person \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089556, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Current weight: 181 pounds\\n Ongoing Attention Deficit Hyperactive Disorder (ADHD) symptoms\\n Chronic irritability\\n Mood okay but sometimes poor due to limited contact with partner\\n Sleep is fitful\\n Ok on range; occasional tension with cell mate\\n Tolerating medications well - No side effects, consent to increase Vyvanse, add Seroquel XR\\n \\n \\n Mental Status Exam\\n Fairly bright affect. Polite and cooperative. Normal thought form and thought content Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n \\n Impression\\n Ongoing Attention Deficit Hyperactive Disorder (ADHD)\\n And emotion regulation challenges\\n \\n \\n Plan\\n Increase Vyvanse\\n Add Seroquel XR\\n Follow-up in approximately 3-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895574, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n In segregation-8 for misconduct\\n Feeling fairly well despite new charges\\n Hoping for bail this coming week\\n Had been sleeping poorly - restarted on Nortriptyline by medical doctor \\n Tolerating medications well\\n \\n Mental Status Exam\\n \\n Fairly bright affect. Polite and cooperative. No psychomotor agitation or retardation. No involuntary abnormal movements. Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented. And hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status \\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895586, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Release date is March 2018\\n Feeling \\u0093good\\u0094. Denying any psychiatric symptoms\\n Sleeping and eating well\\n Trying to exercise daily\\n Reading bible\\n Hoping to get onto work range soon\\n Tolerating medications well - denies any side effects\\n \\n \\n Mental Status Exam\\n Neutral affect predominantly. Some appropriate positive reactivity. Polite and cooperative. No psychomotor agitation or retardation. No involuntary abnormal movements. Normal speech and good eye contact. Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n No acute/imminent risk issues \\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.08956, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling considerably better - much reduced psychosis, not completely remitted\\n Sleeping better, eating well\\n Remains on suicide watch - but was possibly seen this morning by psychology\\n Wants very much to be off suicide watch\\n Tolerating medications well - Requesting/consenting to increase in Olanzapine \\n \\n \\n Mental Status Exam\\n Fairly bright affect. Polite and cooperative. No psychomotor agitation or retardation. No involuntary abnormal movements. Normal speech, good eye contact. Normal thought form and thought content. No perceptual disturbances endorsed or evident. No suicidal or homicidal ideation. Future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Improving psychosis\\n No acute/imminent risk issues with current level of observation \\n \\n Plan\\n Increase Zydis\\n Follow-up in approximately 1 week \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895617, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling fairly well\\n Looking forward to release next week - plans to stay with son possibly\\n Sleeping better\\n No psychosis\\n Tolerating medications well - no side effects, cautioned again regarding risks of mixing psychiatric medications with drugs and alcohol \\n \\n \\n Mental Status Exam\\n Euthymic affect. Polite. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n No risk issues currently \\n \\n Plan\\n Continue current medications \\n Fax prescription to pharmacy\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089563, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling modestly better with Vyvanse - still a lot of Attention Deficit Hyperactive Disorder (ADHD)/anger/emotional regulation problems \\n Sleeping fitfully - Seroquel helpful initially\\n Okay on range\\n Tolerating medications well - consent to increase Vyvanse and Seroquel after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Slightly tense affect. Polite. Fidgety. Normal speech. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Ongoing Attention Deficit Hyperactive Disorder (ADHD)\\n Emotional regulation challenges\\n Insomnia\\n \\n Plan\\n Increase Vyvanse\\n Increase Seroquel\\n Follow-up in approximately 3-5 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895643, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Current weight: 255 pounds, pleased with same\\n Doing well. Looking forward to release next week\\n Plans to work with uncle in construction\\n Tolerating medications well -  no side effects endorsed. \\n Cautioned patient regarding mixing psychiatric medications with drugs and alcohol\\n \\n \\n Mental Status Exam\\n Euthymic affect. Polite. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Very future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Euthymic psychiatric status\\n \\n Plan\\n Continue current medications \\n Fax prescription to pharmacy\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895655, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Seen for anxiety/panic and insomnia\\n Looking forward to release in approximately 13 days but feels anxious/distressed as can\\u0092t speak to his girlfriend who is also incarcerated here; believes other inmates telling his girlfriend that patient is cheating\\n \\n \\n Mental Status Exam\\n Tense, tearful at times. Polite and cooperative. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Adjustment Disorder with Anxious and Depressed Mood\\n No acute/imminent risk issues\\n \\n \\n Plan\\n Trial Remeron (patient consents)\\n Pull chart for Saturday February 25, 2017 to fax pharmacy \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895717, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling more settled \\u0093normal\\u0094\\n Sleeping well. Eating well.\\n OK on range\\n Tolerating medications well - side effects, blood work pending\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Early remission of Mania\\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-5 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895734, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling okay but increase in Attention Deficit Hyperactive Disorder (ADHD) in afternoons \\n Looking forward to release April 13,2017\\n Tolerating medications well - no side effects - requesting/ consenting to increase in Vyvanse after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Euthymic affect. Pleasant and cooperative. No psychomotor agitation ore retardation. No abnormal involuntary movements. Fidgety. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Attention Deficit Hyperactive Disorder (ADHD) \\n \\n Plan\\n Increase Vyvanse \\n EKG\\n Fax prescription to pharmacy\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895748, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Complains of Attention Deficit Hyperactive Disorder (ADHD) symptoms\\n Stressed by legal challenges - facing federal sentence\\n Stable, healthy, neuroregular status\\n Tolerating medications well. EKG was within normal limits - consent to discontinue clonidine. Requesting/consenting to trial Vyvanse after reviewing potential risks and benefits.\\n \\n \\n Mental Status Exam\\n Neutral affect. Polite and cooperative. Fidgety. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Attention Deficit Hyperactive Disorder (ADHD)\\n Complex multidrug regimen\\n \\n Plan\\n Discontinue Clonidine\\n Trial Vyvanse \\n EKG in approximately 1 week\\n Monitor Heart Rate and Blood Pressure\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089576, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling OK. Hoping to get out on parole soon.\\n Expressing considerable hope for parole soon and motivation for complete sobriety\\n Stable, healthy, neuroregular status\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite and cooperative. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Euthymic psychiatric status \\n Severe alcohol use disorder\\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895774, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling considerably better\\n Continues to struggle with episodes of low mood and passive suicidal ideation, also low intensity auditory hallucinations \\n Sleeping okay and eating well\\n Tolerating medications well - consent to increase Zoloft and Seroquel after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Fairly bright affect. Polite. Appears to converse in English fairly well, with good comprehension. Normal thought form. Normal thought content. Perceptual disturbances- occasional auditory hallucinations, no commands. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Improving mood \\n No acute/imminent risk issues \\n \\n Plan\\n Increase in Seroquel\\n Increase in Zoloft \\n Follow-up in 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895786, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling okay but ongoing Attention Deficit Hyperactive Disorder (ADHD) symptoms\\n Sleeping better but still limited\\n Tolerating medications well - requesting/consenting to increase in Biphentin\\n \\n \\n Mental Status Exam\\n Neutral affect. Polite. No abnormal involuntary movements. Normal thought form. Normal thought content and no perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Attention Deficit Hyperactive Disorder (ADHD)\\n \\n Plan\\n Increase Biphentin\\n Follow-up in approximately 6-8 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895803, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling fairly well\\n Sleeping \\u0093quite a bit\\u0094\\n OK on range\\n Looking forward to hearing end of month - quite hopeful\\n Tolerating medications ok\\n Complaining of some decrease in short term memory\\n Requesting/consenting to decrease in Risperidone after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant and talkative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content and no perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Possibly early or near complete remission of mania \\n Possibly some side effects from Risperidone \\n \\n Plan\\n Decrease in morning Risperidone \\n Follow-up in approximately 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895817, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n No change in self-reported symptoms of anxiety/paranoia - most pronounced in early morning\\n Sleeping approximately 7-8 hours per night\\n Exercising daily\\n Tolerating medications well - no side effects, consent to increase Perphenazine after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Fairly bright affect. Polite. No abnormal involuntary movements. Normal thought form. Perceptual disturbances/ thought content of a paranoid theme. No commands. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Ongoing paranoid - possibly related to previous trauma\\n \\n \\n Plan\\n Increase Perphenazine\\n EKG\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895832, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Quite anxious about release March 14, 2017 as he is unsure where he will stay\\n Is on ODSP so not worried about accessing psychiatric medications\\n Tolerating medications well - no side effects, provided health teaching regarding the risks of mixing psychiatric medications with alcohol and drugs \\n \\n \\n Mental Status Exam\\n Slightly tense affect. Polite. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Anxiety related to release\\n No acute/imminent risk issues \\n \\n Plan\\n Fax prescription to pharmacy \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895889, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Modest decrease in anxiety since increased in risperidone\\n Remains hopeful about court May 8, 2017\\n Sleeping and eating well\\n Ongoing residual psychosis - voices are encouraging\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and thought content. Perceptual disturbances as previously detailed, no commands. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Possibly modest further improvement in psychosis\\n Tolerating medications well\\n \\n Plan\\n Follow-up in approximately 3-4 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895903, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Stressed by circumstances on range - hunger strike and lockdown\\n Otherwise feeling okay but increased symptoms of Attention Deficit Hyperactive Disorder (ADHD) in the afternoon/evening\\n Sleeping well\\n Exercising daily\\n Tolerating medications well - requesting/consenting to increase in Biphentin\\n \\n \\n Mental Status Exam\\n Euthymic affect. Polite. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Attention Deficit Hyperactive Disorder (ADHD)\\n \\n Plan\\n Increase Biphentin\\n Follow-up in approximately 3-5 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895915, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n \\u0093Stressed\\u0094 by ongoing incarceration\\n Poor sleep due to sleep apnea\\n Hopeful for release in approximately 2-3 weeks\\n Tolerating medications well \\n \\n \\n Mental Status Exam\\n Slightly tense affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future orientation evident. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n \\n Plan\\n Continue current medications\\n Fax prescription to pharmacy\\n Possibly refer to social work regarding discharge \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089593, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Sleep improving but anxiety remains fairly high\\n Tolerating medications well - consent to add Cipralex after reviewing risks and benefits \\n \\n \\n Mental Status Exam\\n Slightly tense affect. Polite. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future orientation evident. Insight and judgement grossly intact.\\n \\n Impression\\n Improving sleep\\n Ongoing anxiety\\n \\n Plan\\n Add Cipralex\\n Follow-up in approximately 2-3 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895946, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling same sleep has improved overall\\n Continues to face deportation\\n Next court: June 15/17\\n Some low mood\\n Voices continue, largely unchanged; no commands \\u0096 almost only when alone\\n Complaining of problems with short term memory\\n Tolerating meds well \\u0096 no side effects but possible mild dizziness plus possible short-term memory problems\\n Consent to discontinue Elavil\\n Consent to trial of Cipralex after reviewing potential risks and benefits. \\n Wanting something like weed\\n \\n \\n Mental Status Exam\\n Neutral affect. Polite co-operative. No psychomotor agitation or retardation. No abnormal involuntary movements, normal speech, good eye contact. Normal thought form and content, positive for perceptual disturbances \\u0096 as previously detailed. No suicidal or homicidal ideation, future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Possible depressive with psychosis \\n Possible pseudo psychosis \\n \\n Plan\\n Trial Cipralex\\n Discontinue Elavil \\u0096 may contribute to memory complaints\\n Follow up in 2-3 weeks  \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895956, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Weight 217lbs\\n Feeling \\u0096 same ongoing severe legal stressors\\n Feels focus has been better with Biphentin; possible recent concerns about compliance\\n Psychiatric medications: \\n Zoloft 100mg\\n Seroquel 50mg QHS \\n Biphentin 50mg\\n Immovane 15mg\\n Ok on range\\n Tolerating medications well \\u0096 denying any side effects\\n Consent to add Seroquel XR after reviewing potential risks and benefits\\n Cautioned again regarding medication compliance monitoring \\n \\n \\n Mental Status Exam\\n Neutral affect. Polite engaged manner. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, future oriented/hopeful for things working out in the long run. Insight and judgement grossly intact.\\n \\n Impression\\n Improving ADHD\\n Insomnia\\n Severe legal challenges\\n \\n Plan\\n Add Seroquel XR\\n Follow up in 3-5 weeks  \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089597, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling very well\\n Looking forward to release in 10 days\\n Sleeping/eating well\\n Managing unit ok\\n Tolerating medications well \\u0096 denying side effects\\n Health teaching provided regarding risks of mixing psychiatric medications with ETOH/drugs\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect; polite and co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech; good eye contact. Normal thought form and content; no perceptual disturbances. No suicidal or homicidal ideation, insight and judgement grossly intact. Future orientation evident.\\n \\n Impression\\n Euthymic, nonpsychotic status\\n \\n Plan\\n Continue current management\\n Fax prescription to pharmacy \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0895987, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling ok but complaining of increased ADHD in afternoon\\n Stable, fairly healthy neurovegetative status\\n Looking forward to release, likely end of June 2017\\n Tolerating medications well\\n No side effects\\n Requesting/consenting to increase Vyvanse.\\n Health teaching provided regarding risks of mixing psychiatric medications with ETOH/drugs \\n Lithium levels 0.52 at 1700 hours \\n \\n \\n Mental Status Exam\\n Euthymic affect, polite. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact \\n \\n Impression\\n Residual ADHD\\n No evidence hypomania/mania\\n \\n Plan\\n Increase Vyvanse\\n Fax prescription to pharmacy \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896, \"type\": \"loader\"}, {\"text\": \"s\\n \\n Patient seen with assigned nurse via OTN\\n Feeling okay \\u0096 sleeping well\\n Ok on range and with cellmate\\n Some enjoyment; no exercise \\n Court in September 2017\\n Tolerating medications well \\u0096 no side effects\\n \\n \\n Mental Status Exam\\n Euthymic affect, polite. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, future oriented/hopeful. Insight and judgement grossly intact\\n \\n Impression\\n Stable psychiatric status\\n Severe legal stressors \\n \\n Plan\\n Continue current management \\n Follow up in 6-8 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896013, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling ok but frustrated by 2- seg and associated lack of freedom\\n Sleep has been limited due to discontinuation of Remeron\\n Starting to sleep better with increase of Seroquel\\n No acute or unstable medical issues\\n Tolerating medications well \\u0096 no side effects\\n Cautious about Abilify but consent to continue after reviewing potential risks and benefits \\n Consent also to increase Seroquel dose after reviewing potential risks and benefits (had refused Abilify earlier in week)\\n \\n \\n Mental Status Exam\\n Slightly tense affect, polite, co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, future oriented. Insight and judgement grossly intact\\n \\n Impression\\n Possible mild hypomania\\n Non-adherent with treatment\\n No acute/imminent risk issues with current level of clinical engagement\\n \\n Plan\\n Restart Abilify \\n Increase Seroquel\\n Follow up Sunday May 28 2017\\n EKG (monitor QT\\u0092s)\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896072, \"type\": \"loader\"}, {\"text\": \"\\n \\n Seen with mental health nurse via OTN\\n Feeling ok but apprehensive about sentencing \\u0096 postponed until August\\n Hoping for provincial time plus addictions treatment\\n Crown asking for 5 years plus\\n Sleeping/eating well\\n Good on range\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant co-operative. Normal thought form and content. No perceptual disturbances, no suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact. \\n \\n Impression\\n Stable psychiatric status\\n Legal stressors/sentencing\\n \\n Plan\\n Continue current management \\n Follow up in 6-8 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896084, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling fairly well\\n Complaining of limited sleep but when reviewed in detail sleeping from 1900 to 0300/0400; total 8-9 hours\\n Sleep hygiene/health teaching provided\\n Ok on range\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Euthymic affect, polite. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n \\n Plan\\n Follow up in 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.08961, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling better but apprehensive about parole hearing \\u0096 needs to prepare\\n Sleeping a little better \\u0096 5 hours \\n Tolerating medications well \\u0096 no side effects\\n \\n \\n Mental Status Exam\\n Fairly bright affect. Polite, co-operative. No psychomotor agitation or retardation. No abnormal involuntary movements, normal speech, good eye contact. Normal thought form and content. No perceptual disturbances, no suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Improving mood/anxiety/sleep\\n No acute/imminent risk issues\\n \\n Plan\\n Follow up in 1-2 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089611, \"type\": \"loader\"}, {\"text\": \"\\n \\n Seen with mental health nurse via OTN\\n Feeling fairly well\\n Stable healthy neurovegetative status\\n Exercising daily \\u0096 twice a day \\n Hoping to get to work range\\n No interest in psychiatric medications\\n Talks with girlfriend, mother and brother\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite, co-operative. No psychomotor agitation or retardation. No abnormal involuntary movements, normal speech, good eye contact. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact. Attending some groups; wants to start high school classes. \\n \\n Impression\\n Stable psychiatric status\\n Likely mild Anti-social personality disorder \\n \\n Plan\\n Continue current management \\n Follow up in 4-6 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896125, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling ok but complaining of increased ADHD in afternoon\\n Stable, fairly healthy neurovegetative status\\n Looking forward to release, likely end of June 2017\\n Tolerating medications well\\n No side effects\\n Requesting/consenting to increase Vyvanse.\\n Health teaching provided regarding risks of mixing psychiatric medications with ETOH/drugs \\n Lithium levels 0.52 at 1700 hours \\n \\n Mental Status Exam\\n Euthymic affect, polite. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact \\n \\n Impression\\n Residual ADHD\\n No evidence hypomania/mania\\n \\n Plan\\n Increase Vyvanse\\n Fax prescription to pharmacy \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896142, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling fairly well but trouble sleeping \\u0096 up early\\n Ok on range and with cell mate \\n Next court later this month \\u0096 Anticipates being in custody until end of year\\n Tolerating medications well\\n Requesting/consenting to increase Trazadone after reviewing potential risks and benefits \\n \\n \\n Mental Status Exam \\n Euthymic affect, polite. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Insomnia\\n \\n Plan\\n Increase Trazadone\\n Follow up in 4-6 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896153, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling moderately better, but a lot of trouble with eating\\n Sleeping \\u0096 3or 4 hours a night\\n Apprehensive about parole hearing \\u0096 doesn\\u0092t know date\\n \\n \\n Mental Status Exam\\n Neutral affect, polite/co-operative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented/hopeful about getting out soon. Insight and judgement grossly intact. \\n \\n Discussed treatment options, requesting/consenting to increase Cesamet to community dosing after reviewing potential risks and benefits. \\n \\n Impression\\n Improving anxiety/mood\\n Ongoing challenges with appetite/sleep\\n \\n Plan\\n Increase Cesamet to community dose levels\\n Follow up in 1-2 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896168, \"type\": \"loader\"}, {\"text\": \"\\n \\n Seen with mental health nurse via OTN\\n Back in March 28, 2017 \\u0096 breached \\n History of ADHD/insomnia/substance abuse \\n Had gone to treatment centre \\n Expects to be out in 5 months\\n Recently caught hoarding Biphentin\\n \\n \\n Mental Status Exam \\n Fairly bright affect, polite and co-operative, a little fidgety. No psychomotor agitation or retardation. No abnormal in voluntary movements. Normal speech, good eye contact. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact. Hoping to go to treatment centre again. \\n \\n Discussed medication options \\u0096 consenting to trial of Vyvanse after reviewing potential risks and benefits.\\n \\n Impression\\n ADHD\\n Substance abuse disorder \\n ASPD \\n \\n Plan\\n Trial Vyvanse\\n Follow up in 2 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896227, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling no different \\u0093sort of low\\u0094 quite often tearful \\u0096 daily\\n Feels joint pain has increased\\n Sleeping ok/eating ok\\n Tolerating medications well \\u0096 denies any side effects\\n Consent to increase Epival plus add Cymbalta after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Predominantly neutral affect with some appropriate positive reactivity. Polite, no psychomotor agitation or retardation; no abnormal involuntary movements. Normal thought form and content, no perceptual disturbances. Denies any suicidal or homicidal ideation. Future oriented insight and judgement grossly intact.\\n \\n Impression \\n Depression vs Adjustment disorder\\n Chronic pain\\n No acute/imminent risk issues\\n \\n Plan\\n Increase Epival\\n Trial Cymbalta\\n Follow up in 2-3 weeks\\n EKG\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089624, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Seems more settled and organized\\n States she has been compliant with psychiatric medications and finds them helpful but requesting multiple changes \\u0096 rather illogical \\n Sleeping/eating well\\n Tolerating medications well\\n Consent to increase Gabapentin\\n \\n \\n Mental Status Exam \\n Fairly bright affect predominantly, but some lability with tearfulness. Polite; cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements; normal speech; good eye contact, normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation, future oriented. Insight and judgement grossly intact, insight a little limited with Psychiatric issues.\\n \\n Impression\\n Improving Psychosis/mood stability\\n No acute/imminent risk issues\\n \\n Plan \\n Increase Gabapentin\\n Follow up this weekend \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896256, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Mind more settled since starting Olanzapine\\n Sleeping well\\n Energy decreased since starting Olanzapine\\n OK on range\\n Tolerating medications ok but considerable sedation.\\n Consent to decrease Olanzapine\\n \\n \\n Mental Status Exam \\n Fairly bright affect. Polite, cooperative. No psychomotor agitation or retardation noted. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. No perceptual disturbances. Denies any suicidal or homicidal ideation. Insight and judgement grossly intact, future oriented.\\n \\n Impression \\n Improving psychosis\\n Sedation in relation to Olanzapine\\n \\n Plan\\n Decrease Olanzapine\\n Follow up in 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089627, \"type\": \"loader\"}, {\"text\": \"\\n \\n Seen with mental health nurse via OTN\\n Doing fairly well\\n Cleaner on range \\u0096 enjoys\\n Some trouble with sleep, focus/distractibility\\n OK on range\\n Discussed treatment options - Requesting increase in Seroquel XR plus restart Vivanse after reviewing potential risk and benefits\\n Plus go to rehab \\u0091Grant House\\u0092 \\u0096 date November 1st, 2017\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant engaged manner. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech; good eye contact. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n ADHD\\n Insomnia\\n \\n Plan \\n Restart Vivanse\\n Increase Seroquel XR\\n Follow up in 3-5 weeks\\n EKG\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089628, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling considerably better\\n Hoping to get on bail in 10 days\\n Sleeping ok but some trouble falling asleep\\n Remains is segregation\\n Tolerating medications well, no side effects\\n Requesting/consenting to increase Seroquel after reviewing potential risks and benefits\\n Cautioned regarding mixing ETOH/drugs with psychiatric medications\\n \\n \\n Mental Status Exam \\n Euthymic, appropriate affect. Polite, co-operative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech; good eye contact. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation, insight and judgement grossly intact.\\n \\n Impression\\n Much improved emotion regulation/ADHD\\n Residual insomnia \\n \\n Plan\\n Increase Seroquel\\n Pull chart to fax prescription\\n Follow up in 2 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896297, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Stressed out by recent assault \\u0096 4 inmates wanted her canteen \\n Moved to another range but sleeping on floor mattress due to lack of space \\u0096 has back problems\\n Unsure of current legal circumstances \\u0096 has changed lawyer\\n Tolerating medications well \\u0096 no side effects\\n \\n \\n Mental Status Exam\\n Rather tearful affect. Polite, co-operative. No psychomotor agitation or retardation. No abnormal involuntary movements. Black eye, normal speech; good eye contact. Normal thought form and content, no perceptual disturbances. No suicidal ideation \\u0096 future oriented; definitive that she would not attempt to harm herself. Insight and judgement grossly intact.\\n \\n \\n Impression\\n Distress related to incarceration challenges plus legal challenges\\n No acute imminent risk issues\\n \\n Plan\\n Continue current management \\n Follow up in 1 week\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089631, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Recently sentenced \\u0096 December 2018 eligible for parole November 2017\\n Ok on stepdown range; working as cleaner \\u0096 enjoying \\n \\u0093everyone is getting along great, it\\u0092s great\\u0094\\n Stable healthy neurovegetative status \\n A little frustrated by access to telephone \\u0096 hoping to get work on parole started soon \\n \\n \\n Mental Status Exam\\n Fairly bright affect. Pleasant chatty, somewhat childlike manner. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact; normal thought form and content. No perceptual disturbances, no suicidal or homicidal ideation, future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Stable psychiatric status\\n Likely ASD (anti-social personality disorder)\\n \\n Plan\\n Continue current management\\n Follow up in 2-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896323, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling quite well. Looking forward to release in about 8 days\\n Has reasonable adaptive plans\\n Sleeping well, ok on range and cellmate\\n Tolerating medications well, no side effects\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant, co-operative. Normal thought form and content, no perceptual disturbances. No suicidal of homicidal ideation, insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n \\n Plan\\n Continue current management\\n Medications in property and fax prescription \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896337, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Back in for arson\\n Had been out for almost a year\\n Had been followed by outpatient psychiatrist at Peterborough Regional Health Centre (PRHC) and Canadian Mental Health Association - had been doing fairly well\\n Had been exercising regularly; lost 30lbs\\n Had recently tried to kill himself by lighting himself on fire \\u0096 burned apartment \\u0096 charged with arson\\n States he tried suicide \\u0096 4 times in past year \\u0096 2 overdoses; 1 hanging; 1 fire setting\\n Feels he has things to look forward to\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Fairly bright affect. Polite, co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact, normal thought form, thought content \\u0096 disturbances, positive for perceptual disturbances \\u0096 vague description of a \\u0093voice\\u0094 not command; mostly during sleep. No suicidal or homicidal ideation, future oriented. Would like to get to mental Health range. Insight and judgement grossly intact\\n \\n \\n Impression \\n Severe personality disorder \\n Possible antisocial personality traits (ASPD)\\n Possible pseudo psychotic symptoms\\n Chronic risk of self-harm\\n \\n Plan\\n Consider discontinuing suicide watch as this may further undermine coping and increase risks\\n Follow up at patient/staff request\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896354, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Presenting again with vague complaint of \\u0093focus\\u0094 and problems with anger\\n Pushing for psychiatric medications for \\u0093focus\\u0094\\n Reporting improved sleep/nightmares\\n Also complaining of possible short-term memory problems and various somatic concerns\\n Tolerating medications well \\u0096 denying side effects. Consent to trial of Cipralex to help with mood/irritability after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Neutral affect. Polite but pressing for possible prescription for \\u0093focus\\u0094 wants more time with health care. Wants to \\u0093talk\\u0094 every week. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. No perceptual disturbances, no suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Improved sleep/nightmares\\n Possible adjustment disorder or major depressive episode (MDE) related to incarceration/legal stressors\\n History medication diversion and possibly being muscled\\n Possible element of malingering for purpose of getting stimulants\\n No acute/imminent risk issues\\n Trial Cipralex\\n 2nd opinion Royal Ottawa\\n Follow up in 3-5 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896409, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling fairly well, reports paranoia well controlled but a little anxious some days \\u0096 possibly gets transiently paranoid\\n Sleeping well\\n Getting along well on range and with cellmate\\n Hoping for parole in June 2017\\n Tolerating medications well - denying any side effects\\n Requesting increase in AM dose to help anxiety/paranoia \\u0096 Olanzapine 5mg QAM plus 20mgQhs; Seroquel 150mg XR\\n \\n \\n Mental Status Exam\\n Neutral affect, polite, co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, no perceptual disturbances evident. No suicidal or homicidal ideation, insight and judgement grossly intact.\\n \\n Impression\\n Possible mild, residual paranoia\\n \\n Plan\\n Increase AM Zydis\\n Follow up in 2-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089642, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN. \\n Feeling better with mood/anxiety. \\n Sleeping/eating ok no issues.\\n Ok on range. \\n New charges so return date uncertain. \\n Tolerating meds ok but some headaches, consent to continue current dose. \\n \\n \\n Mental Status Exam \\n Fairly bright affect. Pleasant and co-operative.  No psychomotor agitation, no psychomotor retardation, no abnormal involuntary movements.  Normal thought form and thought content, no perceptual disturbances, denies any suicidal ideation or homicidal ideation. Future oriented insight and judgement grossly intact. \\n \\n Impression\\n Improving mood/anxiety.  Query possible side effects from Zoloft\\n \\n Plan\\n Continue current management. Follow up in 2-3 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896437, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling fairly well\\n Sleeping better\\n No psychosis\\n Has some friends on range\\n Tolerating medications well \\u0096 No side effects reported/evident\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite, co-operative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech; good eye contact. Normal thought form and content. No perceptual disturbances; no suicidal ideation; no homicidal ideation.  Future oriented; insight and judgement grossly intact.\\n \\n Impression\\n Euthymic, non-psychotic status\\n \\n Plan\\n Continue current management \\n Follow up in 3-5 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896504, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Complaints of feeling anxious, rumination in day plus evening\\n Stating that he has to use opiates on range to help\\n Acknowledged smoking marijuana today\\n Expecting to be released after court possible several months\\n Tolerating meds well \\u0096 denies any side effects\\n Cautioned re: mixing psychiatric medications with drugs/ETOH\\n Consent to increase Strattera and Remeron, pressing for Biphentin\\n \\n \\n Mental Status Exam\\n Calm manner but pressing repeatedly for Biphentin, then Wellbutrin. No psychomotor agitation/retardation. No abnormal involuntary movements. Appears physically well; normal speech, good eye contact. Normal thought form and content. No perceptual disturbances, denies suicidal ideation, denies homicidal ideation. Future oriented evident. Insight and judgement grossly intact.\\n \\n Impression\\n Possible ADHD\\n Anxiety disorder not otherwise specified\\n Ongoing substance abuse\\n No acute/imminent risk issues \\n \\n Plan\\n Increase Strattera\\n Increase Remeron\\n Urine drug screen weekly\\n Follow up in 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896518, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling moderately better but still pressing for Suboxone \\n Expecting release May 5 2017\\n Sleeping/eating ok\\n Tolerating medications well. \\n Denies any side effects; further health teaching provided re: mixing psychiatric medications with ETOH/drugs.\\n Requesting/consenting to increase Biphentin and Seroquel\\n \\n \\n Mental Status Exam\\n Slightly irritable affect but overall considerably more settled than last session. No psychomotor agitation or retardation. No abnormal involuntary movements, normal speech, good eye contact. Normal thought form and content. Denies any perceptual disturbances; denies any suicidal or homicidal ideation. Insight and judgement grossly intact. \\n \\n Impression\\n Improving ADHD/emotion regulation\\n No acute/imminent risk issues\\n \\n Plan\\n Continue current management and increase Biphentin and Seroquel\\n Follow up in 2-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089653, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling moderately better but still some mild tremulousness\\n Looking forward to release next week\\n Sleeping poorly \\u0096 less than 3 hours then fitful then more; 30-60 minutes during the day\\n Has reasonable adaptive plans for release\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Fairly bright affect; polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech; good eye contact. Normal thought form and content. No perceptual disturbances; denies any suicidal or homicidal ideation. Insight and judgement grossly intact. Future oriented/hopeful.\\n \\n Impression\\n Improved mood/tremulousness\\n No acute/imminent risk issues\\n \\n Plan\\n Continue current management\\n Follow up in 2-3 weeks if still at CECC\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896544, \"type\": \"loader\"}, {\"text\": \"\\n \\n Release date: September 2017\\n \\n Seen with mental health nurse via OTN\\n Feeling better; starting programs\\n Ok on range and with cell mate\\n Tolerating medications well\\n \\n Mental Status Exam\\n Euthymic affect, polite. Normal speech; good eye contact. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Euthymic psychiatric status\\n \\n Plan\\n Continue current management \\n Follow up in 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089656, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Complaining of variety of issues: auditory hallucinations; poor sleep; low mood; \\u0093focus\\u0094\\n Complaining of increased nightmares - \\n \\u0093I\\u0092m reliving it every night\\u0094 \\u0096 awakens his cell mate screaming\\n Discussed treatment options; consent to increase Paxil; Olanzapine and Prazosin \\n Tolerating medications well- no side effects\\n EKG within normal limits\\n \\n \\n Mental Status Exam\\n Slightly tense affect, polite. Normal speech, good eye contact. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Ongoing PTSD with Psychosis\\n No acute/imminent risk issues\\n \\n Plan\\n Increase Paxil\\n Increase Olanzapine\\n Increase Prazosin\\n Follow up in 2-3 weeks\\n EKG in 1 month \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896616, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Weight 210lbs\\n Complaints of limited sleep plus poor/low mood. \\n ADHD medications weening off\\n Remains clearer; helps pass time but finds dealing with this challenging; exercising daily \\n Looking forward to release end of July\\n Discussed prescription options in detail \\u0096 requesting discontinuation of Nozinan and Zoloft; increase in Vyvanse plus trial of Remeron and Cipralex after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Neutral affect, polite, co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact, normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation future oriented, looking forward to seeing family. Insight and judgement grossly intact.\\n \\n Impression\\n Possible Dysthymia\\n Insomnia\\n ADHD\\n \\n Plan \\n Discontinue Zoloft\\n Discontinue Nozinan\\n Trial Cipralex and Remeron\\n Increase Vyvanse\\n EKG\\n Follow up in 3-5 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896633, \"type\": \"loader\"}, {\"text\": \" \\n \\n Patient seen with assigned nurse via OTN\\n Patient denying any specific psychiatric symptoms when questioned but possibly presenting as motivated to transfer out of jail to hospital \\u0093because I\\u0092m mentally deteriorating\\u0094 \\n States almost as an afterthought \\u0093oh and I\\u0092m hearing voices\\u0094 but then cannot or will not elaborate \\u0093I don\\u0092t like to talk about those things\\u0094\\n Denying any problems with eating or sleeping. \\n Reportedly attending to ADL\\u0092s with no problems\\n Reportedly non-adherent with psychiatric medications for 2 days; agreed to try with bedtime dosing\\n \\n \\n Mental Status Exam\\n Neutral affect \\u0096 no distress/tension evident. Polite, co-operative, rather blas\\u00e9, nonchalant manner. Normal speech, good eye contact. Good grooming \\u0096 attention to detail. Thought from \\u0096 questionable occasional mild increase in response latency. Thought content unremarkable, no perceptual disturbances endorsed or clearly evident. No suicidal or homicidal ideation, future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Likely some form of Schizophrenia with poor/limited insight\\n No acute/imminent risk issues\\n \\n Plan\\n Change Olanzapine dosing to encourage adherence \\n Follow up in 1 week  \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896645, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Back in for possible threatening neighbour; was non - adherent with medications and drinking\\n History of possible Schizophrenia; ETOH abuse; possible panic disorder\\n Ongoing auditory hallucinations \\u0096 no commands; not particularly listening\\n Sleeping poorly; ruminating about daughter \\u0096 triggers considerable anxiety\\n \\n \\n Mental Status Exam\\n Slightly tense affect. Polite, co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. Positive for perceptual disturbances \\u0096 as above; no suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.  \\n \\n Impression\\n Psychosis Not Otherwise Specified (NOS) \\n Possible Anxiety disorder NOS\\n No acute/imminent risk issues\\n \\n Plan\\n Restart Olanzapine \\n Trial Paxil \\n Patient consented after reviewing potential risks and benefits\\n Follow up in 1-2 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089666, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling fairly well, but sleep is limited again \\u0096 4 hours; no napping \\n Looking forward to release in \\u0096 20 days. \\n Plans to move with his girlfriend to Lake Simcoe area\\n Exercising daily \\u0096 pleased \\n Tolerating medications well - no side effects\\n Consent to increase Remeron.\\n Health teaching regarding risks of mixing psychiatric medications with drugs or ETOH\\n \\n \\n Mental Status Exam\\n Euthymic affect, polite. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, future oriented/hopeful. Insight and judgement grossly intact. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech. \\n \\n Impression\\n Mild insomnia\\n Otherwise stable psychiatric status \\n \\n Plan\\n Increase Remeron\\n Pull chart to fax prescription to pharmacy next week\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896673, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Complaining of stress related to incarceration challenges \\u0096 he does seem quite hopeful about legal challenges\\n Sleeping fitfully\\n Complaining of considerable anxiety/irritability\\n Hoping to become cleaner soon\\n \\n \\n Mental Status Exam\\n Fairly bright affect, polite, co-operative, chatty. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Self-reported anxiety/insomnia\\n Increase Remeron\\n \\n Plan\\n Follow up in 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896685, \"type\": \"loader\"}, {\"text\": \" \\n \\n Patient seen with mental health nurse via OTN\\n Feeling fairly well despite significant legal challenges \\u0096 facing up to 6 years\\n Last time patient acknowledged smoking marijuana \\u0093I try as much as possible\\u0094 \\u0096 feels it is very helpful\\n Now several times a week\\n Exercising, reading \\n Does not want any psychiatric medications\\n \\n \\n Mental Status Exam\\n Fairly bright affect \\u0096 possibly intoxicated; pleasant engaged manner. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech; good eye contact. Normal thought form and content; no perceptual disturbances. No suicidal or homicidal ideation. Future oriented; insight and judgement grossly intact. Hopeful about legal charges.\\n \\n Impression\\n No acute psychiatric issues\\n Severe legal issues\\n Cannabis use in custody\\n No acute/imminent risk issues\\n \\n Plan\\n Continue current management\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.08967, \"type\": \"loader\"}, {\"text\": \" \\n \\n Seen with mental health nurse via OTN\\n Feeling better with increase in Vyvanse\\n Sleeping well\\n Back to court next week and will get \\u0093clearer picture\\u0094 of challenges\\n Tolerating medications well \\u0096 no side effects \\n Lithium level late April 0.4 at 16-hour post\\n \\n \\n Mental Status Exam\\n Euthymic affect. Polite, normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, insight and judgement grossly intact.\\n \\n Impression\\n Improving Attention Deficit Hyperactivity Disorder (ADHD) \\n Stable psychiatric status\\n \\n Plan\\n Continue current management\\n Follow up in 3-5 weeks\\n Lithium level in 2-3 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896716, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Sleeping moderately better but still very limited \\u0096 1 or 2 hours \\n \\u0093voices\\u0094 remain but moderately attenuated for a few hours after medications in evening\\n Mood \\u0096 a little better; less irritable \\n Ok on range and with cellmates\\n Tolerating medications well \\u0096 requesting/consenting to increase Seroquel and Seroquel XR after reviewing potential risks and benefits. \\n States she is used to taking \\u0093800mg\\u0094 \\n \\n \\n Mental Status Exam\\n Predominantly neutral affect but some appropriate positive reaction. Polite, co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal thought form and content, no suicidal or homicidal ideation. Insight and judgement grossly intact. Perceptual disturbances \\u0096 auditory hallucinations; negative, no commands; possibly more like internal dialogue.\\n \\n Impression\\n Improving insomnia and psychosis\\n Possible severe personality disorder (PD); complex post-traumatic stress disorder (PTSD) with transient psychosis\\n \\n Plan\\n Increase Seroquel and Seroquel XR\\n Follow up in 1-2 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089673, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Feeling fairly well.\\n Sleeping well\\n Okay on range\\n Expects to be sentenced soon, expecting approximately 20-22 months\\n Speaks with family regularly\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant, engaged manner. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, no perceptual disturbances evident. No suicidal or homicidal ideation, insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n \\n Plan\\n Continue current management \\n Follow-up in 3-4 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896788, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling stressed by recent Dangerous Offender report by Dr. M. Pearce.\\n He is feeling encouraged that lawyer has managed to obtain second Dangerous Offender opinion from Dr. Gojer.\\n Otherwise doing okay. \\n Sleeping and eating well. \\n Continues to prefer staying in segregation.\\n Tolerating medications well; no side effects.\\n Writing daily; very much enjoys\\n \\n \\n Mental Status Exam\\n Slightly tense affect but some appropriate positive reactivity. Pleasant; cooperative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, denying any perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Legal stressors\\n No acute/imminent risk issues \\n \\n Plan\\n Continue current management\\n Follow-up at patient/staff request \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896797, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Complaining of variety of issues: anxiety, focus, poor sleep, nightmares\\n States lawyer is suggesting his charges stem from problems with psychiatric medications\\n Stressed by various legal charges\\n Current medications are: Strattera 40, Remeron 45, Clonazepam 1 mg BID\\n Discussed prescription options: attempting to blame health care for poor treatment of his complaints\\n Also attempting to blame psychiatric medications for his charges (possibly assault)\\n After pressing writer repeatedly for Biphentin and increase in clonazepam (as is the case every session), patient consented to trial of Vyvanse and Seroquel after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Predominantly neutral affect. No distress or tension evidence apart from some irritability after requests for certain psychiatric medications not granted. Patient is persistent and quietly demanding review. Patient unaccepting of rationale provided for refusing psychiatric medication requests. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Self-reported anxiety/ADHD\\n \\n Plan\\n Trial Seroquel\\n Discontinue Strattera\\n Restart Vyvanse \\n EKG\\n Broad spectrum urine drug screen\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896814, \"type\": \"loader\"}, {\"text\": \" \\n \\n Patient seen with assigned nurse via OTN\\n Looking forward to release June 27/17\\n Continues to make vague complaints anxiety \\u0096 cannot elaborate\\n Sleep \\u0096 \\u0093alright\\u0094\\n In segregation 8 and prefers to be alone\\n Tolerating medications well \\u0096 no side effects \\u0096 requesting/consenting to increase Remeron after reviewing potential risks and benefits\\n \\n \\n Mental Status Exam\\n Fairly bright and slightly tense affect, polite, co-operative, slightly odd manner. No psychomotor agitation or retardation. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation, future oriented with reasonably adaptive plans for release. Insight and judgement grossly intact.\\n \\n Impression\\n Self-reported anxiety\\n Possible Antisocial Disorder (ASD) traits\\n \\n Plan\\n Increase Remeron\\n Pull chart to fax prescription in \\u0096 10 days \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896828, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling considerably better \\u0096 decreased voices\\n Sleeping almost through the night\\n Enjoys new stepdown range\\n Moderate decrease in mood in afternoons\\n Expecting transfer to OSCMHS (Ontario Shores Centre for Mental Health Sciences) \\n For about June 30/17 \\u0096 pleased \\n Tolerating medications well \\u0096 no side effects\\n \\n \\n Mental Status Exam\\n Euthymic affect. Pleasant; co-operative, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. Positive for perceptual disturbances \\u0096 as before; not command, no suicidal or homicidal ideation. Insight and judgement grossly intact. \\n \\n Impression\\n Improving psychosis\\n Insomnia\\n \\n Plan\\n Continue current management \\n Follow up in 2-3 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089684, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling moderately better since restarting Vyvanse and Seroquel\\n Sleeping better 7-8 hours; up early\\n Health teaching provided re: sleep hygiene\\n Ok on range; now in step down unit \\u0096 enjoying time out of cell\\n Tolerating medications well\\n EKG within normal limits; QTc \\u0096 451 \\n Consent to increase Vyvanse after reviewing potential risks and benefits\\n Requesting increase in Wellbutrin \\u0096 there is a medication seeking aspect to patient\\u0092s presentation\\n \\n \\n Mental Status Exam\\n Neutral affect. Polite, co-operative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, no perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Improving ADHD and anxiety \\n Possible increase in the QTc interval \\n \\n Plan\\n Increase Vyvanse\\n EKG\\n Follow up in 3-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896854, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Complaining of ADHD symptoms and requesting restart of Biphentin but there is documentation that he was misusing this medication in community\\n Sleeping poorly\\n \\n Discussed treatment options: consent to restart Vyvanse and Remeron after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Slightly restricted affect, polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Attention Deficit Hyperactive Disorder (ADHD)\\n Insomnia\\n \\n Plan\\n Trial Vyvanse \\n Discontinue Seroquel\\n Trial Remeron \\n EKG\\n Follow-up in approximately 2-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896866, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n 52-year-old single female\\n Known from previous incarceration\\n Mood and anxiety symptoms, history of polysubstance abuse\\n Positive for antisocial personality disorder (ASPD)\\n Has spent over 10 years in jail\\n Feeling \\u0093alright\\u0094 but \\u0093nervous about getting out again\\u0094\\n Limited family support, positive for chronically low self esteem\\n Has methadone doctor (since approximately 30 years old)\\n Complains of \\u0093hearing voices\\u0094 in \\u0093the back of my mind\\u0094, \\u0093off and on for a couple of years\\u0094\\n States voices occur particularly when she is alone\\n Voices of family members; quite positive and support\\n No commands\\n \\n \\n Mental Status Exam\\n Variable affect with some tearfulness when discussing family. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. Perceptual disturbances as above. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Discussed treatment options - consent to restart Olanzapine after reviewing potential risks and benefits \\n \\n Impression\\n Psychosis Not Otherwise Specified\\n History of polysubstance use, ASPD and\\n possibly Complex Post-Traumatic Stress Disorder (PTSD)\\n \\n Plan\\n Add Olanzapine \\n Follow-up in approximately 1-2 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089688, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling better since increase in Zoloft\\n Looking forward to release in approximately 2 weeks--> going to be living with his parents\\n Tolerating medications well. Patient health teaching provided regarding potential risks of mixing psychiatric medications with alcohol and drugs \\n Has been okay on the range\\n \\n \\n Mental Status Exam\\n Euthymic affect, polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n \\n Plan\\n Pull chart to fax prescriptions to pharmacy\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896895, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling moderately better. Sleeping better but still awakening early\\n Reports voices have decreased; last time he heard them was several weeks ago\\n Complaining of problems with longstanding ADHD symptoms\\n Getting along well with cellmate, \\u0093one if my best friends from the road\\u0094\\n \\n Tolerating medications well- No side effects--> consented to increasing Chlorpromazine after reviewing potential risks and benefits \\n \\n \\n Mental Status Exam\\n Neutral affect, calm and polite manner. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Residual insomnia\\n ADHD\\n No psychosis noted\\n \\n Plan\\n Increase Chlorpromazine\\n Follow-up in approximately 2-4 weeks\\n EKG\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896907, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with mental health nurse via OTN\\n Sleeping well\\n ADHD improved but medications wear off around 3 pm\\n Working with addictions and hoping to get to recovery\\n Tolerating medications well; no side effects apart from mild twitching of hands later in day\\n \\n \\n Mental Status Exam\\n Euthymic affect, polite. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Ongoing ADHD\\n \\n Plan\\n Continue current medications\\n Follow-up in 4-6 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896964, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling okay; mood 3/10; some enjoyment of reading fiction\\n Some worry/tension\\n Collateral history from CAMH-->Schizophrenia, Mild Intellectual Delay, Polysubstance use\\n Recent blood work (lipids, fasting blood sugar)--> within normal limits, reportedly\\n Looking forward to mid July 2017; plans to go to a shelter, is comfortable there\\n \\n \\n Mental Status Exam\\n Flat affect. Passive and cooperative. No psychomotor agitation or retardation, no abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content, denying any perceptual disturbances. No clear evidence of such. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Insomnia\\n Possible mild Generalized Anxiety Disorder (GAD) symptoms \\n \\n Plan\\n Trial Remeron\\n Follow up in 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089698, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Reports feeling well. Denying any problems with mood, thinking, perception or narrowing status.\\n Getting along well with cellmate and on range and no reports otherwise. Continues to state that he does not require any psychiatric medications. \\n \\n \\n Mental Status Exam\\n Quite bright affect, sometimes smiling a little oddly. Normal speech, good eye contact. Grooming appears ok. Thought form is within normal limits. Normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Psychiatric status appears stable\\n Likely guarded about any psychiatric symptoms\\n \\n Plan\\n Continue current treatment\\n Follow-up in 3-4 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0896995, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling fairly well, hoping for release in September 2017\\n Sleeping well and exercising daily\\n Found increase in Buspar to 20 mg BID too sedating - he has been taking 10 mg BID with some residual anxiety\\n \\n \\n Mental Status Exam\\n Fairly bright affect. Polite. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Discussed treatment options -  consent to trial Buspar 15 mg BID\\n \\n Impression\\n Residual anxiety\\n  \\n Plan\\n Increase Buspar to 15 mg BID\\n Follow up in approximately 2-4 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089701, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling much better today\\n No psychosis noted\\n Slept well last night, eating well\\n Wants to get off suicide watch -  feels he can be sae and would reach out to staff is his mood decreased or was experiencing suicidal ideation\\n Tolerating medications okay; mildly depressed, consent to continue current medications \\n \\n Mental Status Exam\\n Acknowledges understanding English well. Able to speak well enough to make himself understood. Affect is neutral. No distress or tension noted. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Improving mood\\n Remission of psychosis\\n No acute/imminent risk issues with current level of clinical engagement \\n \\n Plan\\n Continue current medications\\n Discontinue suicide watch as it would likely increase distress and risk\\n Follow-up in 1 week \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897021, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling stressed by conflict with another inmate--> has reported this to Correctional Officers and they have transferred both to separate areas\\n Stable, healthy, neurovegetative status\\n Tolerating medications well\\n Next court date is at the end of August 2017\\n \\n \\n Mental Status Exam\\n Neutral affect, polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n Stress related to conflict with inmate\\n No acute/imminent risk issues \\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897036, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling stressed by conflict with another inmate--> has reported this to Correctional Officers and they have transferred both to separate areas\\n Stable, healthy, neurovegetative status\\n Tolerating medications well\\n Next court date is at the end of August 2017\\n \\n \\n Mental Status Exam\\n Neutral affect, polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n Stress related to conflict with inmate\\n No acute/imminent risk issues \\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089705, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling well, no psychosis\\n Complains of ADHD/focus issues\\n Sleeping and eating well\\n Release date is May 1, 2017, plans to go to rehabilitation in Toronto\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Euthymic/ appropriate affect, polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Early remission of psychosis\\n Attention Deficit Hyperactive Disorder (ADHD)\\n No acute/imminent risk issues \\n \\n Plan\\n Continue current medications \\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897062, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Sleep is moderately improved but nightmares continue\\n Ongoing stress related to legal challenges\\n Tolerating medications well - no side effects, consented to increase in Prazosin\\n \\n \\n Mental Status Exam\\n Neutral affect, polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Improving sleep\\n Ongoing nightmares\\n \\n Plan\\n Increase Prazosin\\n Follow-up in approximately 1-2 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089712, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling better with lower anxiety and panic-->now approximately 1 x per week (from 2-3 times per week)\\n Sleep remains fitful, approximately 5-6 hours\\n Looking forward to possible release mid-March 2017\\n \\n Tolerating medications well - consenting to increase Immovane and Effexor after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Euthymic affect. Polite. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Improving panic\\n Insomnia\\n \\n Plan\\n Increase Effexor\\n Increase Immovane\\n Follow-up in approximately 3-4 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897133, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Stressed by legal challenges - facing federal sentence\\n \\u0093Flashbacks\\u0094 related to motor vehicle accident - left the scene and someone died\\n Sleeping poorly due to nightmares\\n Lots of anger - chronic\\n Lots of conflict\\n \\n Tolerating medications well, no side effects - consent to decrease Remeron and add Seroquel and Seroquel XR after reviewing potential risks and benefits. Cautioned regarding medication compliance monitoring\\n \\n Mental Status Exam\\n Slightly tense affect. Polite. Normal speech, good eye contact.  Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Generalized Anxiety Disorder (GAD) vs. Adjustment Disorder\\n Anti-social Personality Disorder (ASPD) traits with emotional regulation challenges\\n No acute/imminent risk issues\\n Possibly Attention Deficit Hyperactive Disorder (ADHD)\\n \\n Plan\\n Decrease Remeron\\n Add Seroquel and Seroquel XR\\n Follow-up in approximately 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089715, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling moderately better\\n Sleeping well\\n Attention Deficit Hyperactive Disorder (ADHD) increased in afternoon/evening and lower mood \\n Remains as cleaner\\n \\n Tolerating medications well, no side effects - consent to increase Zoloft\\n \\n Mental Status Exam\\n Neutral affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Ongoing mood challenges\\n \\n Plan\\n Increase Zoloft\\n Follow-up in approximately 3-5 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897162, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN.\\n Feeling fairly well\\n Denying any psychosis\\n Frustrated by ongoing time in 8-segregation\\n Tolerating medications well but injection sites becoming quite sore\\n \\n Wants to discontinue Intramuscular Clopixol - consent to trial of Invega after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Settled presentation. Neutral affect. Polite and cooperative. No psychomotor agitation ore retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented and hopeful. Insight and judgement grossly intact.\\n \\n Impression\\n Side effects with Clopixol depot\\n \\n \\n Plan\\n Discontinue Clopixol Depot (as per patient request)\\n Trial Invega\\n Monitor for EPS\\n Follow-up in 2 days \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897176, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Continues to complain of \\u0093voices\\u0094 - critical voices, they are encouraging suicide\\n Complains of panic symptoms - almost daily; can last hours at lower intensity \\n Feels safe, comfortable in current setting \\n \\n Tolerating medications well, no side effects - consenting to trial Buspar after reviewing potential risks and benefits\\n \\n Mental Status Exam\\n Slightly tense affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Perceptual disturbances as above. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Ongoing psychosis\\n Possible panic disorder\\n No acute/imminent risk issues \\n \\n Plan\\n Trial Buspar \\n Follow-up in approximately 1-2 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089719, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Stressed and anxious by murder one charges\\n Sleeping ok; no nightmares\\n Anxious, tense in daytime\\n Getting along well with others but finds it difficult to \\u0093keep up a good front all day long\\u0094\\n Tolerating medications well, no side effects.\\n \\n Consent to change dosing schedule of Cesamet after reviewing all potential risks and benefits. Somewhat apprehensive about losing sleep. \\n \\n Mental Status Exam\\n Slightly tense affect, polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form, normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Post-Traumatic Stress Disorder (PTSD)\\n Severe legal stressors\\n \\n Plan\\n Change Cesamet dosing schedule\\n Follow-up this Saturday\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897202, \"type\": \"loader\"}, {\"text\": \"\\n \\n Admission: Feb 2/17\\n Release Date: Attempt Murder \\n \\n Patient seen with Mental Health Nurse via OTN\\n Was on bail; breached with alcohol\\n Known to writer from previous incarceration\\n History of Schizophrenia, Post-Traumatic Stress Disorder (PTSD), Generalized Anxiety Disorder (GAD), Panic Disorder, possibly history of Substance Use \\n Complains of increased anxiety, claims psychiatric medications have been decreased significantly\\n Feels more depressed, states she is hearing voices - mumbling, with no commands\\n \\n Mental Status Exam\\n Tense, restricted affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal thought form and thought content. Positive for perceptual disturbances as above. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Depression with possible psychosis\\n No acute/imminent risk issues \\n \\n Plan\\n Restart Remeron\\n Increase Seroquel\\n Follow-up in approximately 1-2 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897217, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling better since starting on work range\\n Looking forward to release early May 2017-->seeing kids\\n Stable, healthy neurovegetative status\\n Tolerating medications well-->no side effects, discontinued Effexor due to head aches and sweating \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite and cooperative. Normal thought form and thought content Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Euthymic, stable psychiatric status\\n \\n Plan\\n Continue current medications \\n Follow-up in approximately 4-5 weeks/prior to release\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897229, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling well\\n Sleeping well - approximately 7-8 hours per night but asleep and awake early - education provided\\n No change in legal stressors\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite. Normal thought form and thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 4-6 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897243, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling ok but trouble sleeping\\n Has cellmate, same is going well\\n Looking forward to going to work range\\n Denying any problems with mood, thinking or perception \\n \\n Discussed treatment options - consent to trial of Seroquel after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Neutral affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. No clear perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Insomnia\\n Possible paranoid perceptual disturbances\\n No acute/imminent risk issues \\n \\n \\n Plan\\n Trial Seroquel\\n Follow-up in approximately 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089732, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Doing well. Getting out in less than 1 week - very pleased\\n Stable psychiatric status\\n Tolerating medications well\\n Cautioned regarding risks of combining psychiatric medications with drugs and alcohol\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite and cooperative. Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n \\n Plan\\n Continue current medications \\n Fax prescription to pharmacy \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897334, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling fairly well\\n Sleeping fitfully - had Immovane discontinued due to diversion concerns\\n Tolerating medications well\\n Ongoing severe legal stressors\\n \\n \\n Mental Status Exam\\n Euthymic affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n Severe legal stressors\\n \\n Plan\\n Continue current medications \\n Follow-up approximately 4-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089735, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Complains of ongoing insomnia, approximately 4 hours per night\\n Hopes for release May 11, 2017\\n Complains of Attention Deficit Hyperactive Disorder (ADHD) symptoms - very hyper and distractible\\n \\n Tolerating medications well - denies any side effects, consents to increase in Remeron after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Predominantly Neutral affect. Talkative and polite. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Ongoing Insomnia\\n Possible Attention Deficit Hyperactive Disorder (ADHD)\\n No acute/imminent risk issues\\n \\n Plan\\n Increase Remeron\\n Follow-up approximately 2 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089736, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Weight is 182 pounds\\n Sleeping better\\n States he has \\u0093quit everything\\u0094 regarding drugs; except \\u0093smoking weed here and there\\u0094\\n Murder 1 charge - trial date is September 2017\\n Tolerating medications well - denies any side effects, counselled regarding potential risks of combining drugs with psychiatric medications \\n \\n Mental Status Exam\\n Neutral affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact.  Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status \\n No acute/imminent risk issues\\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 4-6 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897377, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse \\n Reports no change in psychiatric status - low mood, anxious rumination\\n Sleeping approximately 8 hours - nightmares 1-2 times per night, nightmares of abuse\\n OK on range\\n \\n Tolerating medications well - consent to increase Cipralex and to trial Prazosin after reviewing potential risks and benefits. Pressing for restart of Wellbutrin.\\n \\n Mental Status Exam\\n Slightly irritable affect. Predominantly polite but complains that Wellbutrin has been discontinued. Normal speech, good eye contact. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal thought form and content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Ongoing self-report of low mood/post-traumatic stress disorder (PTSD) symptoms\\n No acute/imminent risk issues \\n \\n Plan\\n Increase Cipralex\\n Trial Prazosin\\n Follow-up in approximately 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089739, \"type\": \"loader\"}, {\"text\": \"\\n \\n Release Date: May 28/17\\n \\n Patient seen with Mental Health Nurse via OTN\\n Current psychiatric medications:\\n Cipralex 10, Vyvanse 30, Methadone 70, Clonidine 0.1 mg BID\\n Feeling okay but complaining of possible sedation - unclear was psychiatric medications this may be from - multiple medications\\n Medication changes recently: increase of methadone, addition of clonidine, Cipralex and Vyvanse)\\n Ongoing Attention Deficit Hyperactive Disorder (ADHD) symptoms\\n Sleeping okay but awakening to urinate frequently\\n \\n Consent to increase Vyvanse after reviewing potential risks and benefits\\n \\n Mental Status Exam\\n Fairly bright affect. Polite and cooperative. Fidgeting. Normal thought form. Normal thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Attention Deficit Hyperactive Disorder (ADHD)\\n Possible sedation from psychiatric medications \\n \\n Plan\\n Increase Vyvanse\\n Follow-up in approximately 2 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897403, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling modestly better in terms of mood\\n Sleeping several hours a night\\n Ongoing auditory hallucinations but not every day. \\n Multiple voices, doesn\\u0092t recognize\\n Random conversations but sometimes quite violent and negative\\n \\n Tolerating medications well - no side effects, consent to increase Cipralex after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Neutral affect. Polite and cooperative. Normal thought content. Positive for perceptual disturbances as above. No thought content issues currently evident or endorsed. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Improved mood\\n Ongoing psychosis\\n \\n Plan\\n Increase Cipralex\\n Follow-up in approximately 1-2 weeks\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897417, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Weight is 170 pounds\\n Feeling fairly well\\n Pleased to be in 2-Segreation\\n Sleeping well\\n Tolerating medications well\\n \\n Mental Status Exam\\n Fairly bright affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Ongoing legal stressors - potentially facing dangerous offender charges/assessment \\n \\n Impression\\n No acute/imminent risk issues\\n Stable psychiatric status \\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 4-6 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897474, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling ok; received sentence for approximately 18 months - expects to stay at Central East Correctional Center\\n Sleeping well, more than or equal to 9-10 hours soundly\\n Exercising daily.\\n Bible studies in afternoon\\n Finds focus has decreased in afternoon/evening, more dysphoric and irritable/impulsive\\n \\n Tolerating medications well - requesting/consenting to increase in Biphentin after reviewing potential risks and benefits\\n \\n Mental Status Exam\\n Fairly bright affect. Pleasant engaged manner. No psychomotor agitation or retardation. No involuntary abnormal movements. Normal thought form and thought content. No perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact.\\n \\n Impression\\n Residual Attention Deficit Hyperactive Disorder (ADHD)\\n \\n Plan\\n Increase Biphentin\\n Monitor Heart Rate and Blood Pressure\\n Follow-up for approximately 4-6 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897489, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling fairly well. Denying any problems with mood, thinking, perception or neurovegetative status\\n Okay on range, speaks with girlfriend several times daily\\n Continues to complain of sexual functioning challenges - possibly particularly Erectile Dysfunction (ED)\\n Hoping for release soon\\n \\n Tolerating medications well apart from sexual side effects - however, patient is on an anti-androgen medication, possibly presumably due to previous sexual assault charges. Agreeable to seeing Dr. MacMillan regarding medications for Erectile Dysfunction (ED)\\n \\n Mental Status Exam\\n Euthymic appropriate affect. Pleasant and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content and no perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status\\n Possible sexual dysfunction likely related to androgen suppression\\n \\n Plan\\n Continue current medications\\n Refer to Dr. Macmillan regarding treatment of Erectile Dysfunction - possible cardiac safety \\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897503, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling better overall but continues to struggle with Attention Deficit Hyperactive Disorder (ADHD) symptoms later in day\\n Ongoing auditory hallucinations - calling his name\\n Has been doing better overall with anxiety - since starting regular/daily meditation practice approximately 2 times per day for 20 mins \\n Recent EKG Normal Sinus Rhythm (NSR) QTc 395 \\n \\n Tolerating medications well except for episodes of \\u0093dizziness\\u0094 with Zoloft - consent to discontinue Zoloft and increase Vyvanse and Abilify after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Slightly tense affect. Polite, engaged manner. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Ongoing Attention Deficit Hyperactive Disorder (ADHD)\\n Possible Psuedopsychosis\\n Possible substance induced persisting psychosis\\n No acute/imminent risk issues \\n \\n Plan\\n Discontinue Zoloft\\n Increase Abilify\\n Increase Vyvanse \\n Follow-up in approximately 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897515, \"type\": \"loader\"}, {\"text\": \"\\n Patient seen with Mental Health Nurse via OTN\\n Feeling better - believes this is simply related passage of time \\n Sleeping/eating well\\n Exercising regularly \\n Tolerating medications well but would prefer to discontinue Buspar\\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact. \\n \\n Impression\\n Euthymic psychiatric status\\n \\n Plan\\n Discontinue Buspar\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897532, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Release date: Possible October 2017\\n Feeling approximately same, \\u0093can\\u0092t complain\\u0094\\n Sleeping ok; eating is better - approximately 6-8 months\\n Feeling more comfortable \\u0093in jail despite stress of the environment\\u0094\\n Exercising and reading more\\n Ok on range and very pleased with cellmate\\n \\n Tolerating medications well - side effects \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite and cooperative. Mood is low but brightened with support and reframing. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. Expressing some hope.\\n \\n Impression\\n Improving mood and anxiety \\n Attention Deficit Hyperactive Disorder (ADHD)\\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.089754, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling well. Denying any psychosis\\n Quite confidence that he will be released in approximately 2 weeks - has reasonable adaptive plans for discharge\\n Stable, healthy neurovegetative status\\n Tolerating medications well - no side effects, further health teaching provided regarding risks of mixing psychiatric medications with alcohol and or drugs\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant, cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Euthymic, nonpsychotic status\\n \\n Plan\\n Continue Current Medications \\n Prescription in property\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897558, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Possible release date in approximately 3 months - sentencing August 23, 2017\\n Feeling better overall. Hopeful about sentencing - expects 1 year, with result of approximately 3 more months \\n Doing well on range and getting along well with cellmate \\n Exercising daily \\n Hopeful about getting construction job back when released \\n Would like to discontinue Buspar - agitation and gastrointestinal side effects (has been refusing) \\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite, cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact. Future oriented. \\n \\n Impression\\n Improving mood and legal stressors\\n Side effects from Buspar \\n \\n Plan\\n Discontinue Buspar \\n Follow-up in approximately 2-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897572, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling better about anxiety but remains sleeping poorly\\n Cleaner on range - helps pass time\\n States she largely avoids others due to anger challenges\\n \\n Tolerating medications well - no side effects - requesting and consenting to increase in \\n Remeron after reviewing potential risks and benefits \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant and cooperative. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact. \\n \\n Impression\\n Improving Anxiety\\n Residual Insomnia \\n \\n Plan\\n Increase Remeron\\n Follow-up in approximately 2-3 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897584, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Reports complete remission of paranoia but considerable sedation\\n Sleeping approximately 13 hours a night\\n A little sedated in AM, Ok on range and with cellmate\\n No need/urge to confront anyone or carry weapon\\n \\n Mental Status Exam\\n Neutral affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact. \\n \\n Impression\\n Improved paranoia\\n Sedation related to Risperidone \\n No acute/imminent risk issues \\n \\n Plan\\n Decrease Risperidone in morning\\n Increase Vyvanse \\n Follow-up in approximately 1 week \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897644, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling better since able to read more - since discontinuing Zoloft\\n Trial starts August 28, 2017 - hoping for time served\\n Discontinued Zoloft due to problems focusing/reading\\n \\n Requesting Seroquel to help with sleep and \\u0093my anger problems\\u0094 - has been helpful in the past. Reviewed potential risks and benefits \\n \\n Mental Status Exam\\n Fairly bright affect. Pleasant, cooperative. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Side effects from Zoloft\\n Emotion-regulation/anger management problems\\n \\n Plan\\n Discontinue Zoloft\\n Restart Seroquel\\n Follow-up in approximately 2-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897655, \"type\": \"loader\"}, {\"text\": \"\\n \\n Seen with assigned nurse via OTN\\n Release date: unknown currently\\n Complains of \\u0093hearing voices 24-7\\u0094 \\u0093all day long\\u0094\\n History: Anti-social Personality Disorder (ASPD), ____, Attention Deficit Hyperactive Disorder (ADHD)\\n Back in possibly June 2017 \\n Complains of feeling very stressed wonders if he should go into segregation, \\u0093talking to myself 24-7\\u0094\\n Ok on range; claims he is \\u0093triple-bunked\\u0094\\n Sleep is very fitful\\n \\n \\n Mental Status Exam\\n Irritable, tense. Talkative and very critical of health care provided. Claiming that he has never had problems with medication diversion. Rather hostile, dismissive manner; constantly talking over writer despite empathetic, supportive approach. Speech is normal. Okay grooming - some attention to detail. Thought form is rather circumstantial, no clear perceptual disturbances. Possible perceptual disturbances vs. pseudo psychosis with no commands, rather poorly elaborated. Denying suicidal ideation and homicidal ideation. Insight and judgement grossly intact. \\n \\n Tolerating medications well - no side effects - refusing increase in Seroquel, consenting to trial Risperidone. Requesting and consenting t increase in Biphentin after reviewing potential risks and benefits. Cautioned again regarding medication compliance monitoring. Acknowledged using heroin and crystal meth heavily for the last 10 years. \\n \\n Impression\\n Possibly Substance Induced Psychosis\\n Attention Deficit Hyperactive Disorder (ADHD)\\n Anti-social Personality Disorder (ASPD)\\n Severe substance use  \\n \\n Plan\\n Trial Risperidone\\n Increase Biphentin\\n Monitor for any psychosis \\n Follow-up in approximately 3-4 weeks \\n Broad Spectrum Urine Drug Screen (UDS)\\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897672, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Still here due to institutional assault charge\\n Complains of some Post-Traumatic Stress Disorder (PTSD) - nightmares and some \\u0093anxiety\\u0094 attacks - 1-2 x per day\\n Support and reframing provided with positive effect\\n Tolerating medications well -  no side effects - consent to increase Biphentin and trial of Cipralex after reviewing potential risks and benefits \\n \\n \\n Mental Status Exam\\n Slightly tense affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future orientation evident. Insight and judgement grossly intact. \\n \\n Impression\\n Increased anxiety and panic\\n Attention Deficit Hyperactive Disorder (ADHD)\\n \\n Plan\\n Trial Cipralex\\n Increase Biphentin \\n EKG\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897682, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling well but sleeping a lot - prefers this as not much to do otherwise\\n Hopeful about starting programming soon\\n Hopeful for bail program\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Fairly bright affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Fairly settled with current level of clinical engagement \\n \\n Plan\\n Continue current medications\\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897758, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Less anxious, Attention Deficit Hyperactive Disorder (ADHD) modestly improved, sleep is limited approximately 4-6 hours, fitful\\n OK on range - now working as cleaner \\n \\u0093A lot going on\\u0094 - facing over 30 charges and recent break and enter with girlfriend \\n \\n Tolerating medications well - no side effects, EKG within normal limits; QTc 406\\n Consent to increase Cipralex, Vyvanse and Elavil after reviewing potential risks and benefits. Cautioned again regarding medication compliance monitoring \\n \\n \\n Mental Status Exam\\n Slightly restricted affect. Polite, cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Improving mood\\n Attention Deficit Hyperactive Disorder (ADHD)\\n Ongoing insomnia \\n \\n Plan\\n Increase Cipralex \\n Increase Vyvanse \\n Increase Elavil\\n Follow-up in approximately 3-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897772, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Release date: September 2017\\n Feeling well, anxiety in good control\\n Sleeping well. Exercising daily\\n Doing well on range, hoping to get to work range\\n Tolerating medications well - No side effects\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite, cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Stable psychiatric status \\n \\n Plan\\n Continue current medications\\n Follow-up prior to release \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897784, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Feeling considerably better stating Wellbutrin - increased mood an d energy\\n Exercising more -  very pleased\\n No concerns with compliance noted in clinical record \\n Sleeping a little fitfully\\n Tolerating medications well\\n \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Pleasant, cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. \\n \\n Impression\\n Euthymic psychiatric status\\n \\n Plan\\n Continue current medications\\n Follow-up in approximately in 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897799, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with Mental Health Nurse via OTN\\n Back in for breaches longstanding history of severe substance use and Anti-Social Personality Disorder (ASPD) traits \\n Back in for theft \\n Facing approximately 13 charges, approximately 7-8 months \\n Currently on suicide watch -\\u0094 I\\u0092m sick and tired of myself\\u0094 - related to substance use relapse and crime \\n \\n \\n Mental Status Exam\\n Slightly restricted affect. Polite and cooperative. Mood is low but brightened with support and reframing. Normal speech, good eye contact. Normal thought form. Normal thought content. Denies perceptual disturbances. No suicidal or homicidal ideation. Future oriented. Insight and judgement grossly intact. Expressing some hope.\\n \\n Tolerating medications well - no side effects\\n \\n Impression\\n Adjustment difficulties related to incarceration and substance use \\n No acute/imminent risk issues with current level of support and monitoring - ongoing suicide watch will increase distress/undermine coping \\n \\n Plan\\n Continue current medications\\n Discontinue suicide watch\\n Remain in 8-segregation \\n Follow-up tomorrow with Mental Health Nurse\\n Follow-up by writer this weekend \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897813, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feels Attention Deficit Hyperactive Disorder (ADHD) increasing \\n Hopeful about plea deal soon - may be leaving soon\\n Okay on range; Okay with cellmate\\n Sleeping fairly well\\n Exercising daily - boxing training\\n Reading, \\u0093here and there\\u0094\\n \\n Tolerating medications well- no side effects - consent to increase Strattera\\n \\n Mental Status Exam\\n Euthymic affect. Polite. Normal thought form. Normal thought content. No perceptual disturbances. Insight and judgement grossly intact.\\n \\n Impression\\n Residual Attention Deficit Hyperactive Disorder (ADHD) - decreasing effect of Strattera \\n \\n Plan\\n Increase Strattera\\n Follow-up in approximately 3-5 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897887, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling fairly well despite being sentenced to almost 2 years\\n Sleeping well\\n Okay on range\\n Tolerating medications well \\n \\n Mental Status Exam\\n Euthymic, appropriate affect. Polite and cooperative. No psychomotor agitation or retardation. No abnormal involuntary movements. Normal speech, good eye contact. Normal thought form and content. No clear perceptual disturbances. No suicidal or homicidal ideation. Future oriented, insight and judgement grossly intact.\\n \\n Impression\\n Stable psychiatric status \\n \\n \\n Plan\\n Continue current medications\\n Follow-up in approximately 3-4 weeks \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.08979, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Feeling \\u0093worse\\u0094 today - quite sad; not particularly anxious\\n States voices are no better\\n Sleep limited approximately 3-4 hours\\n Okay on range- working as cleaner\\n Good with cellmate - finds helpful\\n No new stressors \\n \\n \\n Mental Status Exam\\n Tearful, dysphoric affect. Polite and cooperative. Brightened over interview with support and reframing. Normal speech, good eye contact. Normal thought form. Normal thought content, perceptual disturbances as before; no commands, not critical, no active suicide ideation-future oriented and sense of hope evident. No homicidal ideation. insight and judgement grossly intact.\\n \\n Discussed medication options - consent to increase Risperidone, Cipralex and Seroquel after reviewing potential risks and benefits. \\n \\n Impression\\n Depression with psychosis\\n No acute/imminent risk issues with current level of monitoring \\n \\n \\n Plan\\n Increase Cipralex, Risperidone and Seroquel\\n Follow-up by Mental Health Nurse tomorrow\\n Follow up by psychiatric this weekend \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \\n \", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897915, \"type\": \"loader\"}, {\"text\": \"\\n \\n Patient seen with assigned nurse via OTN\\n Known to writer from September 30, 2015\\n History of psychotic disorder and addictions (alcohol and marijuana)\\n Expects release in approximately 5 days \\n Back in for breach of probation and possession of stolen property since approximately 1 month ago\\n Trouble sleeping, \\u0093anxiety attacks\\u0094 and hearing critical voices approximately 1 time daily\\n Sleeping approximately 7 hours\\n Complains primarily of money challenges\\n Okay on range; no cellmate\\n \\n \\n Mental Status Exam\\n Predominantly neutral affect. Polite and cooperative but complaining that he\\u0092s not getting enough help with ODSP application, housing and possibly attempting to justify his criminal actions to lack of supports. Normal speech, good eye contact. Normal thought form. No thought content issues. Perceptual disturbances as above; no commands. No suicidal or homicidal ideation. Insight and judgement grossly intact.\\n \\n Impression\\n Possibly Anxiety Disorder not yet specified\\n Possibly Schizophrenia\\n Alcohol Use Disorder \\n No acute/imminent risk issues \\n \\n Plan\\n Discontinue Olanzapine\\n Trial Risperidone\\n Follow-up in approximately 2-3 weeks if still here \\n \\n \\n \\n \\n \\n \\n\", \"updateDate\": 0, \"patient\": 0, \"id\": 0, \"openDate\": 0, \"date\": 1544286165.0897927, \"type\": \"loader\"}]\r\n\r\nexport default prebuiltNotes","import { AsyncStorage } from \"react-native\"\r\nimport {Patient, Note } from \"./Domain\"\r\nimport prebuiltNotes from './Psych'\r\n\r\nconst concat = (x,y) =>\r\n  x.concat(y)\r\n\r\nconst flatMap = (f,xs) =>\r\n  xs.map(f).reduce(concat, [])\r\n\r\nexport class SettingsRepository {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    getSettings()\r\n    {\r\n        //return this.menu\r\n\r\n        return AsyncStorage.getItem(\"settings\").then((result) =>{\r\n            let settings = JSON.parse(result)\r\n\r\n            if(settings)\r\n                return settings\r\n\r\n            return {}\r\n        })\r\n\r\n    }\r\n\r\n    saveSettings(settings)\r\n    {\r\n        AsyncStorage.setItem('settings', JSON.stringify(settings), () => {\r\n            console.log(\"saved settings \")\r\n        }); \r\n    }\r\n    \r\n}\r\n\r\n\r\nexport class MenuRepository\r\n{\r\n    constructor()\r\n    {\r\n        this.menu = {\r\n            \"Medical Notes\": {\r\n              \"text\" : \"Medical Notes\",\r\n              \"items\" : {\r\n                \"Sample 1\" : {\r\n                  \"text\": \"Sample 1\",\r\n                  \"items\": {}\r\n                },\r\n                \"Sample 2\" : {\r\n                  \"text\" : \"Sample 2\",\r\n                  \"items\" : {}\r\n                }\r\n              }\r\n            },\r\n            \r\n          }\r\n    }\r\n\r\n    getMenu()\r\n    {\r\n        //return this.menu\r\n\r\n        return AsyncStorage.getItem(\"menu\").then((result) =>{\r\n            let storedMenu = JSON.parse(result)\r\n\r\n            if(storedMenu)\r\n                return storedMenu\r\n\r\n            return this.menu\r\n        })\r\n\r\n    }\r\n\r\n    saveMenu(menu)\r\n    {\r\n        AsyncStorage.setItem('menu', JSON.stringify(menu), () => {\r\n            console.log(\"saved menu \")\r\n        }); \r\n    }\r\n\r\n    getPhraseByPhrase(phrase){\r\n        phrase = phrase.toLowerCase()\r\n        let regex = new RegExp(\".*?\" + phrase.replace(/[ .]/, \".+\") + \".*?\", \"g\");\r\n        console.log(regex)\r\n        return AsyncStorage.getItem(\"menu\").then((result) =>{\r\n            let storedMenu = JSON.parse(result)\r\n            if(storedMenu === null)\r\n                return []\r\n            if(phrase === \"\")\r\n                return []\r\n            this.statements = [];    \r\n            this.match(storedMenu, regex);\r\n            return this.statements;\r\n        })         \r\n    }\r\n\r\n    getPhraseByShortcut(tag){\r\n        tag = tag.toLowerCase()\r\n        let regex = new RegExp(tag + \".*\");\r\n        console.log(regex)\r\n        return AsyncStorage.getItem(\"menu\").then((result) =>{\r\n            let storedMenu = JSON.parse(result)\r\n            if(storedMenu === null)\r\n                return []\r\n            if(tag === \"\")\r\n                return []\r\n            this.statements = [];    \r\n            this.match(storedMenu, regex, true);\r\n            return this.statements;\r\n        })          \r\n    }\r\n\r\n    match(dict, regex, shortcutMatch=false)\r\n    {\r\n        for(var key of Object.keys(dict)){\r\n            //console.log(dict)\r\n            //console.log(key)\r\n            if (Object.keys(dict[key].items).length > 0) {\r\n                this.match(dict[key].items, regex, shortcutMatch)\r\n            }\r\n            \r\n            var val = \"\";\r\n            if(shortcutMatch){\r\n                if(dict[key].shortcut != undefined && regex.test(dict[key].shortcut.toLowerCase())) {\r\n                    val = dict[key].text;\r\n                }\r\n            }\r\n            else if(dict[key].items && Object.keys(dict[key].items).length === 0)\r\n            {\r\n                val = regex.test(dict[key].text.toLowerCase())? dict[key].text : '';\r\n            }\r\n\r\n            if(val.length > 0)\r\n                this.statements.push(val)\r\n        }\r\n    }\r\n}\r\n\r\nexport class NoteRepository\r\n{\r\n    get_note_data() {\r\n        if(window.noteRepoData == null)\r\n            return AsyncStorage.getItem(\"notes\")\r\n        else\r\n            return new Promise( (resolutionFunc,rejectionFunc) => {\r\n                resolutionFunc(window.noteRepoData)\r\n            });\r\n    }\r\n\r\n    getNotesByPhrase(phrase){\r\n        phrase = phrase.toLowerCase()\r\n        let regex = new RegExp(\".*?\" + phrase.replace(\" \", \".+\") + \".*?\", \"g\");\r\n        console.log(regex)\r\n        return this.get_note_data().then((result) =>{\r\n            let notes = null\r\n            if(!window.noteRepoData)\r\n            {\r\n                notes = JSON.parse(result)\r\n                notes = notes.reverse()\r\n                window.noteRepoData = notes\r\n            }\r\n            else\r\n                notes=result\r\n\r\n\r\n            if(notes === null)\r\n                notes = []\r\n\r\n            if(phrase === \"\")\r\n            {\r\n                return []\r\n            }\r\n            \r\n            if(notes.length < 50)\r\n                notes.push(...prebuiltNotes)\r\n\r\n            if(notes.slice(0,1000))\r\n            {\r\n                return flatMap(item => {\r\n                    \r\n                    let statements = []\r\n\r\n                    if(item.text && item.text !== \"\" && !item.text.includes(\"<p>\") && !item.text.includes(\"base64\"))\r\n                    {\r\n                        let res = item.text.replace(/(\\n|;)/g, \".\").split(\".\")\r\n                        statements =  res.filter(item2 => {\r\n                            //console.log(item2.toLowerCase())\r\n                            return regex.test(item2.toLowerCase())\r\n                        })\r\n                    }\r\n \r\n                    return statements;\r\n                }, notes).filter((value,index,self) => {return self.indexOf(value) === index})\r\n            }\r\n            else\r\n                return []\r\n        })      \r\n    }\r\n\r\n    deleteNoteById(noteId){\r\n        return AsyncStorage.getItem(\"notes\").then((result) =>{\r\n            let notes = JSON.parse(result)\r\n            notes = notes.filter((note) => note.id !== noteId);\r\n            AsyncStorage.setItem('notes', JSON.stringify(notes), () => {\r\n                console.log(\"saved notes\")\r\n            }); \r\n        })         \r\n    }\r\n    \r\n    updateNote(note)\r\n    {\r\n        this.createNote(note)\r\n    }\r\n\r\n    getNoteCount()\r\n    {\r\n        return AsyncStorage.getItem(\"notes\").then((result) =>{\r\n            let notes = JSON.parse(result)\r\n            return notes === null? 0: notes.length\r\n        })         \r\n    }\r\n\r\n    getLastOpenedNotes(count)\r\n    {\r\n        return AsyncStorage.getItem(\"notes\").then((result) =>{\r\n            let notes = JSON.parse(result)\r\n            if(notes)\r\n            {\r\n                notes.sort()\r\n                //console.log(notes.slice(-10))\r\n                return notes.slice(-count)\r\n            }\r\n            else\r\n                return []\r\n        })         \r\n    }\r\n\r\n    getNoteById(noteId)\r\n    {\r\n        return AsyncStorage.getItem(\"notes\").then((result) =>{\r\n            let notes = JSON.parse(result)\r\n            if(notes)\r\n                return notes.filter((value, index, array) => {\r\n                    return noteId == value.id\r\n                })\r\n            else\r\n                return []\r\n        })        \r\n    }\r\n    \r\n    getPatientNotes(patient)\r\n    {\r\n        return AsyncStorage.getItem(\"notes\").then((result) =>{\r\n            let notes = JSON.parse(result)\r\n            console.log(\"+-=-=---=--=--=\")\r\n            console.log(notes)\r\n            console.log(patient)\r\n            if(notes)\r\n                return notes.filter((value, index, array) => {\r\n                    return value.patient == patient.id\r\n                })\r\n            else\r\n                return []\r\n        })\r\n    }\r\n\r\n    saveNotes(notes) {\r\n        return AsyncStorage.setItem('notes', JSON.stringify(notes), () => {\r\n            console.log(notes)\r\n        });     \r\n    }\r\n\r\n    createNote(note){\r\n        return AsyncStorage.getItem(\"notes\", (error, result) =>\r\n        {\r\n            let notes = JSON.parse(result)\r\n            var update = false;\r\n\r\n            if(!notes)\r\n            {\r\n                notes = []\r\n            }\r\n\r\n            //modify existing note if exists\r\n            notes.forEach(function(part, index, theArray) {\r\n                if(theArray[index].id === note.id)\r\n                {\r\n                    theArray[index].text = note.text;\r\n                    theArray[index].openDate = note.openDate;\r\n                    update = true\r\n                }\r\n                    \r\n            });\r\n\r\n            \r\n            console.log('###################3')\r\n            console.log(notes)\r\n            console.log(note)\r\n            \r\n            if(!update)\r\n                notes.push(note)\r\n\r\n            AsyncStorage.setItem('notes', JSON.stringify(notes), () => {\r\n                console.log(note)\r\n            });          \r\n        })  \r\n\r\n    }\r\n}\r\n\r\nexport class TagRepository {\r\n    createTag(tag) {\r\n        return AsyncStorage.getItem(\"tags\").then((result) =>\r\n        {\r\n            let tags = JSON.parse(result)\r\n            tags = tags? tags: [];\r\n            if(!tag || tag === \"\") return;\r\n\r\n            if(tags.filter((value, index, array) => {\r\n                return value.id === tag.id && value.type===tag.type && value.entity === tag.entity\r\n            }).length > 0) return tags;             \r\n\r\n            tags.push(tag)\r\n\r\n            AsyncStorage.setItem('tags', JSON.stringify(tags), () => {\r\n            }); \r\n            \r\n            return tags.filter((value, index, array) => {\r\n                return value.type===tag.type && value.entity === tag.entity\r\n            });\r\n        })          \r\n    }\r\n\r\n    getTagsByTypeAndEntity(tag) {\r\n        return AsyncStorage.getItem(\"tags\").then((result) =>\r\n        {\r\n            let tags = JSON.parse(result)\r\n            tags = tags? tags: [];\r\n            tags = tags.filter((value, index, array) => {\r\n                return value.type === tag.type && value.entity === tag.entity\r\n            })\r\n            \r\n            return tags\r\n        })               \r\n    }\r\n\r\n    getTagsByIdAndType(tag) {\r\n        return AsyncStorage.getItem(\"tags\").then((result) =>\r\n        {\r\n            let tags = JSON.parse(result)\r\n            tags = tags? tags: [];\r\n            tags = tags.filter((value, index, array) => {\r\n                return value.type === tag.type && value.id === tag.id\r\n            })\r\n            \r\n            return tags\r\n        })               \r\n    }\r\n\r\n    getsTagsByType(type) {\r\n        return AsyncStorage.getItem(\"tags\").then((result) =>\r\n        {\r\n            let tags = JSON.parse(result)\r\n            tags = tags? tags: [];\r\n            tags = tags.filter((value, index, array) => {\r\n                return value.type === type\r\n            })\r\n            \r\n            return tags\r\n        })  \r\n    }\r\n\r\n    deleteTag(tag) {\r\n        return AsyncStorage.getItem(\"tags\").then((result) =>\r\n        {\r\n            let tags = JSON.parse(result)\r\n            tags = tags.filter((value, index, array) => {\r\n                return value.id !== tag.id || value.type!==tag.type || value.entity !== tag.entity\r\n            })      \r\n\r\n            AsyncStorage.setItem('tags', JSON.stringify(tags), () => {\r\n            }); \r\n            \r\n            return tags.filter((value) => value.type===tag.type && value.entity === tag.entity)\r\n        })       \r\n    }\r\n}\r\n\r\n\r\nexport class PatientRepository\r\n{\r\n    constructor()\r\n    {\r\n\r\n    }\r\n    \r\n    \r\n    getPatientById(id)\r\n    {\r\n        return AsyncStorage.getItem(\"patients\").then((result) =>{            \r\n            let patients = JSON.parse(result)\r\n            if(result)\r\n                return patients.filter((value, index, array) => {\r\n                    return value.id == id\r\n                })\r\n            else\r\n                return []\r\n        })\r\n    }\r\n\r\n    getPatientByName(name)\r\n    {\r\n        return AsyncStorage.getItem(\"patients\").then((result) =>{\r\n            let patients = JSON.parse(result)\r\n            if(result && patients)            \r\n                return patients.filter((value, index, array) => {\r\n                    return value.name === name\r\n                })\r\n            else\r\n                return []\r\n        })\r\n\r\n    }\r\n\r\n    updatePatient(patient)\r\n    {\r\n        return AsyncStorage.getItem(\"patients\").then((result) => {\r\n            let patients = JSON.parse(result)\r\n            console.log(patients)\r\n\r\n            patients.forEach((item, index) => {\r\n                if(patient.id === item.id) {\r\n                    patients[index].name = patient.name;\r\n                }\r\n              })\r\n            AsyncStorage.setItem('patients',  JSON.stringify(patients));\r\n        });\r\n\r\n    }\r\n\r\n    createPatient(patient)\r\n    {\r\n        return AsyncStorage.getItem(\"patients\").then((result) =>\r\n        {\r\n            let patients = JSON.parse(result)\r\n            console.log(patients)\r\n            if(!patients || !patients.length)\r\n            {\r\n                patients = []\r\n            }\r\n            \r\n\r\n            patient.id = patients.length\r\n            patients.push(patient)\r\n\r\n            AsyncStorage.setItem('patients', JSON.stringify(patients), () => {\r\n                console.log(\"saved patient \" + patient.getPatientName())\r\n            }); \r\n            \r\n            return patient\r\n        })  \r\n\r\n    }\r\n\r\n    findAll()\r\n    {\r\n        return AsyncStorage.getItem(\"patients\", (error, result) =>{\r\n            let patients = JSON.parse(result)\r\n            if(result)\r\n            {\r\n                console.log(\"patients repo\")\r\n                console.log(patients)\r\n                return patients\r\n            }\r\n            else\r\n                return []\r\n        })\r\n    }\r\n\r\n}","import {PatientRepository, MenuRepository, NoteRepository, SettingsRepository, TagRepository } from \"./Repositories\"\r\nimport { AsyncStorage } from \"react-native\"\r\nimport { Note } from \"./Domain\";\r\n\r\nexport class PatientService {\r\n    saveNotes(notes)\r\n    {\r\n        return new NoteRepository().saveNotes(notes)\r\n    }\r\n\r\n    getNote(noteId)\r\n    {\r\n        return new NoteRepository().getNoteById(noteId)\r\n    }\r\n\r\n    getLastOpenedNotes(count = 10)\r\n    {\r\n        return new NoteRepository().getLastOpenedNotes(count)\r\n    }\r\n\r\n    getNotesByPhrase(phrase){\r\n        return new NoteRepository().getNotesByPhrase(phrase)\r\n    }\r\n\r\n    setNoteOpenDate(note)\r\n    {\r\n        note = Object.assign(new Note(), note[0])\r\n        note.setOpenDate(Date.now())\r\n        new NoteRepository().updateNote(note)\r\n    }\r\n\r\n    getNoteCount()\r\n    {\r\n        return new NoteRepository().getNoteCount()\r\n    }\r\n\r\n    getAllPatients() {\r\n        return new PatientRepository().findAll();\r\n    }\r\n    \r\n    getPatientById(id)\r\n    {\r\n        if(id == -1) return null;\r\n        return new PatientRepository().getPatientById(id)\r\n    }\r\n\r\n    getPatientNotesById(id)\r\n    {\r\n        if(id == -1) return null;\r\n        return new PatientRepository().getPatientById(id).then((result, error) => {\r\n            let patient = result\r\n            if(result){\r\n                return new NoteRepository().getPatientNotes(patient[0])\r\n            }\r\n            else{\r\n                return new Promise((error, result) => {return []})\r\n            }\r\n            \r\n        })\r\n    }\r\n\r\n    getPatientNotesByPatientName(patientName) {\r\n        let patientRepository = new PatientRepository()\r\n\r\n        return patientRepository.getPatientByName(patientName).then((result, error) => {\r\n            return new NoteRepository().getPatientNotes(result[0])\r\n        });\r\n    }\r\n\r\n    getPatientNotes(patient)\r\n    {\r\n        return new NoteRepository().getPatientNotes(patient)\r\n    }\r\n\r\n    deletePatientNote(noteId){\r\n        return new NoteRepository().deleteNoteById(noteId)\r\n    }\r\n\r\n    savePatient(patient) {\r\n        new PatientRepository().updatePatient(patient)\r\n    }\r\n\r\n    savePatientNote(patient, note)\r\n    {\r\n        if(patient.name === \"\")\r\n            return\r\n\r\n        let noteRepository = new NoteRepository()\r\n        let patientRepository = new PatientRepository()\r\n\r\n        patientRepository.getPatientByName(patient.name).then((result, error) => {\r\n            console.log(\"find patient by name \")\r\n            console.log(result)\r\n            \r\n            if(!result || !result.length){\r\n                patientRepository.createPatient(patient).then((result) => {\r\n                    let p = result\r\n                    note.setPatient(p.id)\r\n                    noteRepository.createNote(note)\r\n                })               \r\n            }\r\n            else\r\n            {\r\n                console.log(\"found patient!\")\r\n                let p = result\r\n                note.setPatient(p[0].id)\r\n                noteRepository.createNote(note)\r\n            }\r\n            \r\n        })\r\n    \r\n    }\r\n    \r\n}\r\n\r\nexport class TagService {\r\n    createTag(tag) {\r\n        return new TagRepository().createTag(tag)\r\n    }\r\n\r\n    deleteTag(tag) {\r\n        return new TagRepository().deleteTag(tag)\r\n    }\r\n\r\n    getTagsByPatientAndType(tag) {\r\n        return new TagRepository().getTagsByTypeAndEntity(tag)\r\n    }\r\n\r\n    getTagsByIdAndType(tag) {\r\n        return new TagRepository().getTagsByIdAndType(tag)\r\n    }\r\n\r\n    getAllPatientTags() {\r\n        return new TagRepository().getsTagsByType(\"patient\");\r\n    }\r\n}\r\n\r\nexport class SettingsService {\r\n    setSettings(settings){\r\n        new SettingsRepository().saveSettings(settings);\r\n    }\r\n\r\n    getSettings() {\r\n        return new SettingsRepository().getSettings();\r\n    }\r\n\r\n    clearSignatures() {\r\n        let p = new PatientService()\r\n        return AsyncStorage.getItem(\"notes\").then((result) =>{\r\n            let data = JSON.parse(result)\r\n            let newData = []\r\n            data.forEach(item => {                 \r\n                let note = item.text.replace(/<img.+?>/gm,'<img class=\"signature\" width=160 height=40 alt=\"signature\" src=\"{{signature}}\" />')\r\n                item.text = note;\r\n                newData.push(item);\r\n            })\r\n            p.saveNotes(newData).then(() => {\r\n                window.location.reload(false);   \r\n            })\r\n        })\r\n    }\r\n}\r\n\r\nexport class MenuService {\r\n    getMenu() {\r\n        return new MenuRepository().getMenu()\r\n    }\r\n\r\n    saveMenu(menu) {\r\n        new MenuRepository().saveMenu(menu)\r\n    }\r\n\r\n    searchPhrases(phrase) {\r\n        return new MenuRepository().getPhraseByPhrase(phrase)\r\n    }\r\n\r\n    searchPhrasesByShortcut(shortcut) {\r\n        return new MenuRepository().getPhraseByShortcut(shortcut)\r\n    }\r\n}","import React from 'react';\r\nimport Constants from 'expo-constants';\r\nimport { StyleSheet, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList } from 'react-native';\r\n\r\nvar styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor: '#ffffff'\r\n    },\r\n\r\n    webButton: {\r\n      marginBottom: 5,\r\n      backgroundColor: '#FF000000',\r\n      color: '#0000AA'\r\n    },\r\n\r\n    webButton2: {\r\n      marginBottom: 5,\r\n      backgroundColor: '#000000',\r\n      color: '#0000AA'\r\n    },\r\n\r\n    webButton3: {\r\n      backgroundColor: '#fff',\r\n    },\r\n\r\n    mainContainer: {\r\n      flex: 1,\r\n      backgroundColor: '#336699'\r\n    },\r\n  \r\n    listViewContainer: {\r\n      flex: 1,\r\n      padding: 12,\r\n    },\r\n\r\n    image: {\r\n      flex: 1,\r\n      resizeMode: \"cover\",\r\n      justifyContent: \"center\"\r\n    },\r\n  \r\n    menuHeader: {\r\n      paddingTop: 20 + Constants.statusBarHeight,\r\n      padding: 20,\r\n    },\r\n    header: {\r\n  \r\n      padding: 20,\r\n      backgroundColor: '#336699',\r\n    },\r\n    description: {\r\n      fontSize: 14,\r\n      color: 'white',\r\n    },\r\n  \r\n    patientText: {\r\n      margin: 20,\r\n      marginBottom: 0,\r\n      height: 34,\r\n      paddingHorizontal: 10,\r\n      borderRadius: 4,\r\n      borderColor: '#ccc',\r\n      borderWidth: 1,\r\n      fontSize: 20,\r\n    },\r\n    noteText: {\r\n      margin: 20,\r\n      marginTop: 0,\r\n      marginBottom: 0,\r\n      height: 0.5,\r\n      paddingHorizontal: 10,\r\n      borderRadius: 4,\r\n      borderColor: '#ccc',\r\n      borderWidth: 1,\r\n      fontSize: 20,\r\n      height: 600\r\n    },\r\n    noteTextWeb: {\r\n      margin: 10,\r\n      marginBottom: 0,\r\n      height: 0.5,\r\n      paddingHorizontal: 10,\r\n      fontSize: 20,\r\n      height: 600\r\n    },\r\n    label: {\r\n      height: 40\r\n    },\r\n    notes: { flex: 0.8},\r\n    form: {\r\n      flex:1,\r\n      justifyContent: 'space-between',\r\n    },\r\n    separator: {\r\n      flex: 1,\r\n      height: StyleSheet.hairlineWidth,\r\n      backgroundColor: '#8E8E8E',\r\n    },\r\n\r\n    suggestionText: {\r\n        color: '#ffffff',\r\n        fontSize: 20,\r\n    },\r\n\r\n    button: {\r\n        color: '#007AFF',\r\n        textAlign: 'center',\r\n        padding: 8,\r\n        fontSize: 18,\r\n    },\r\n  });\r\n\r\nexport default styles","import React from 'react';\r\nimport {Platform, StyleSheet, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList } from 'react-native';\r\nimport {Icon, Card, Overlay, ButtonGroup, Button as StyledButton } from 'react-native-elements'\r\n\r\nimport { Constants } from 'expo';\r\nimport {MenuService} from './DomainService';\r\nimport styles from './Styles'\r\n\r\n\r\nexport class SideMenu extends React.Component{\r\n    constructor(props)\r\n    {\r\n      super(props)\r\n      this.state = {\r\n        submenu : [],\r\n        contentHistoryStack: [],\r\n        currentContent: {},\r\n        previousContent: {},\r\n        menuContent : {},\r\n        phrase : \"\",\r\n        previousKey : \"\",\r\n        currentTextInsert: \"\"\r\n      }\r\n      this.resetMenu();\r\n    }\r\n\r\n    resetMenu(){\r\n      new MenuService().getMenu().then((menu) => {\r\n        this.setState({menuContent: menu})\r\n\r\n        this.state[\"previousContent\"] = []\r\n        this.state[\"previousContent\"].push(this.state[\"menuContent\"])\r\n        this.state[\"currentContent\"] = this.state[\"menuContent\"]\r\n        this.setState({\"contentHistoryStack\": []})\r\n      })\r\n    }\r\n\r\n    handleAddPress = () => {\r\n\r\n    }\r\n\r\n    saveInput = () => {\r\n      if(this.state[\"phrase\"].length === 0)\r\n        return\r\n      this.state[\"currentContent\"][this.state[\"phrase\"]] = {text: this.state[\"phrase\"], \"items\" : {}}\r\n      console.log(this.state)\r\n      let path = \"\"\r\n      if(this.state[\"contentHistoryStack\"].length >= 1)\r\n        path = this.state[\"contentHistoryStack\"].join(\"%%\")\r\n      let obj = {}\r\n      if(this.state[\"currentContent\"])\r\n        obj = this.set(path, this.state[\"currentContent\"], this.state[\"menuContent\"])\r\n      \r\n      this.setState({phrase: \"\"})\r\n      new MenuService().saveMenu(this.state[\"menuContent\"])\r\n    }\r\n\r\n    set(path, value, obj) {\r\n      var schema = obj;  // a moving reference to internal objects within obj\r\n      var pList = path.split('%%');\r\n      var len = pList.length;\r\n      for(var i = 0; i < len-1; i++) {\r\n          var elem = pList[i];\r\n          if( !schema[elem] ) schema[elem] = {}\r\n          schema = schema[elem];\r\n      }\r\n      if(schema[pList[len-1]] != null)\r\n        schema[pList[len-1]] = value;\r\n\r\n      return schema\r\n    }\r\n\r\n    get(path, obj)\r\n    {\r\n      var schema = obj;  // a moving reference to internal objects within obj\r\n      var pList = path.split('%%');\r\n      var len = pList.length;\r\n      for(var i = 0; i < len-1; i++) {\r\n          var elem = pList[i];\r\n          if( !schema[elem] ) schema[elem] = {}\r\n          schema = schema[elem];\r\n      }\r\n      return schema \r\n    }\r\n\r\n    handlePress = (key, currentContent, previousContent, enter) => {\r\n      console.log(\"------------\")     \r\n      let current = currentContent[\"items\"]\r\n      console.log(current)\r\n      if(current == {})\r\n      {\r\n        //console.log(currentContent.text)\r\n        if(enter === true)\r\n        {\r\n          this.setState({\"currentContent\": {}})\r\n          this.state[\"previousContent\"].push(previousContent)\r\n        }\r\n        else\r\n        {\r\n          this.props.navigation.state.routes[0].params.addTextContent(currentContent.text);\r\n          this.props.navigation.closeDrawer();\r\n        }\r\n\r\n      }\r\n      else\r\n      {\r\n        this.setState({\"currentContent\": current})\r\n        this.state[\"previousContent\"].push(previousContent)\r\n      }\r\n\r\n      let arr = this.state[\"contentHistoryStack\"]\r\n      arr.push(key)\r\n      arr.push(\"items\")\r\n      console.log(arr)\r\n      this.setState({\"contentHistoryStack\": arr})\r\n    }\r\n  \r\n    categoryPress() {\r\n      if(this.state[\"previousContent\"].length >1) \r\n        this.setState({\"currentContent\": this.state[\"previousContent\"].pop()})\r\n\r\n\r\n        let arr = this.state[\"contentHistoryStack\"]\r\n        arr.pop()\r\n        arr.pop()\r\n        this.setState({\"contentHistoryStack\": arr})\r\n             \r\n    }\r\n\r\n    topLevelPress() {\r\n      this.resetMenu()\r\n    }\r\n\r\n    insertPressCurrent(currentContent) {\r\n      this.props.navigation.state.routes[0].params.addTextContent(currentContent.text);\r\n      this.props.navigation.closeDrawer();\r\n    }\r\n\r\n    insertPress(){\r\n      let obj = this.getPreviousMenuObject()\r\n      this.props.navigation.state.routes[0].params.addTextContent(this.capitalizeFirstLetter(obj.text));\r\n      this.props.navigation.closeDrawer();\r\n    }\r\n\r\n    capitalizeFirstLetter(string) {\r\n      return string.charAt(0).toUpperCase() + string.slice(1);\r\n    }\r\n\r\n    getTitle = () => {\r\n      console.log(\"previous content\")\r\n\r\n      let obj = this.getPreviousMenuObject()\r\n      \r\n      console.log(obj)\r\n      return \"Insert \\\"\" + obj.text + '\"'\r\n    }\r\n\r\n    getPreviousMenuObject() {\r\n      let path = \"\"\r\n      if(this.state[\"contentHistoryStack\"].length >= 1)\r\n        path = this.state[\"contentHistoryStack\"].join(\"%%\")\r\n      let obj = {}\r\n      if(this.state[\"currentContent\"])\r\n        obj = this.get(path, this.state[\"menuContent\"])\r\n\r\n      return obj\r\n    }\r\n\r\n    render(){\r\n      return (\r\n        <View style={styles.container}>\r\n          <Button style={{height:40}} onPress={() => {this.topLevelPress()}} title=\"Top Level\"/> \r\n          <Button style={{height:40}} onPress={() => {this.categoryPress()}} title=\"Up Category\"/>       \r\n\r\n          <View style={styles.menuHeader}>\r\n          </View>\r\n          <ScrollView style={{flex:1}}>\r\n            <View>\r\n              {\r\n                 Object.keys(this.state[\"currentContent\"]).length == 0 && <Button style={{height:40}} onPress={() => {this.insertPress()}} title={this.getTitle()}/>\r\n              }\r\n              {\r\n                \r\n                Object.keys(this.state.currentContent).map((key) => (\r\n                  //<MenuItem key={key} val={val} handler={this.handleClick.bind} />\r\n                  <View style={{flex: 1, flexDirection: 'row', marginBottom:3}}>\r\n                    <MenuItem style={{flex:1}} key1={key} insertPress={(title) => this.insertPressCurrent(title)} menuTitle={this.state.currentContent[key].text} menuVal={this.state.currentContent[key]} currentContent={this.state.currentContent} handler={this.handlePress} addHandler={this.handleAddPress} />\r\n                  </View>\r\n              ))\r\n              }\r\n            </View>\r\n\r\n              <View style={{flex:1, flexDirection: 'row', justifyContent: \"center\", marginTop: 40}}>\r\n                <TextInput\r\n                    onChangeText={(phrase) => this.setState({phrase: phrase})}\r\n                    value={this.state.phrase}\r\n                    placeholder=\"Enter a category or phrase\"\r\n                    style={{flex:1, borderColor: 'black', borderBottomWidth: 1, marginLeft: 2, marginRight: 2}}\r\n                  />\r\n                <Button style={{height:40}} onPress={() => {this.saveInput()}} title=\"Save\"/>\r\n              </View>\r\n\r\n          </ScrollView>\r\n          <View style={styles.footerContainer}>\r\n          </View>\r\n        </View>\r\n      );\r\n    }\r\n  }\r\n  \r\n  \r\n  class MenuItem extends React.Component{\r\n    constructor(props){\r\n      super(props)\r\n      console.log(props)\r\n\r\n      this.state = {\r\n        phrase: \"\",\r\n        showInput: false\r\n      }\r\n    }\r\n\r\n    showInput() {\r\n      this.setState({showInput: true})\r\n    }\r\n\r\n    saveInput()\r\n    {\r\n      this.setState({showInput: false})\r\n    }\r\n  \r\n    render(){\r\n      return (\r\n        <View style={{flex:1,  backgroundColor: '#eee',}}>\r\n          <View style={{flex:1, flexDirection: 'row',}}>\r\n            <View style={{height: 35,flex:1, flexDirection:'row'}}>\r\n            {Platform.OS !== 'web'? \r\n              <Button style={{flex:1, flexDirection:'row'}} onPress={() => {this.props.handler(this.props.key1, this.props.menuVal, this.props.currentContent, false)}} title={this.props.menuTitle.substr(0, 25)}/>\r\n              :\r\n              <StyledButton buttonStyle={{backgroundColor: \"#999\"}} style={{flex:1, flexDirection:'row'}} onPress={() => {this.props.handler(this.props.key1, this.props.menuVal, this.props.currentContent, false)}} title={this.props.menuTitle.substr(0, 30)}/>\r\n              }\r\n            </View>\r\n            <View>\r\n            <Icon\r\n\r\n              name='clone'\r\n              type='font-awesome'\r\n              color='#aaa'\r\n              onPress={() => {this.props.insertPress(this.props.menuVal)}}\r\n            />\r\n\r\n            </View>\r\n            {  this.props.menuVal[\"items\"] === undefined &&\r\n            <Button style={{height:40}} onPress={() => {this.props.handler(this.props.key1, this.props.menuVal, this.props.currentContent, true)}} title=\"Add item\"/>\r\n            }\r\n          </View>\r\n          { this.state.showInput &&\r\n          <View style={{flex:1, flexDirection: 'row'}}>\r\n            <TextInput\r\n                onChangeText={(phrase) => this.setState({phrase: phrase})}\r\n                value={this.state.phrase}\r\n                placeholder=\"Enter a category or phrase\"\r\n              />\r\n            <Button style={{height:40}} onPress={() => {this.saveInput()}} title=\"Save\"/>\r\n          </View>\r\n        }\r\n        </View>\r\n      )\r\n    }\r\n  }\r\n\r\n  export class SideMenuEmbedded extends SideMenu{\r\n    insertPress(){\r\n      let obj = this.getPreviousMenuObject()\r\n      this.props.navigation.state.params.addTextContent(this.capitalizeFirstLetter(obj.text));\r\n    }\r\n    insertPressCurrent(currentContent) {\r\n      this.props.navigation.state.params.addTextContent(this.capitalizeFirstLetter(currentContent.text));\r\n    }\r\n  }","import React from 'react';\r\nimport { Text, View, Button, TextInput, ScrollView, Platform } from 'react-native';\r\nimport { ListItem, Icon, Card, Overlay, Button as StyledButton } from 'react-native-elements'\r\nimport {MenuService} from './DomainService';\r\nimport styles from './Styles'\r\n  \r\nexport class SideMenuManageScreen extends React.Component{\r\n    constructor(props)\r\n    {\r\n      super(props)\r\n      this.state = {\r\n        submenu : [],\r\n        contentHistoryStack: [],\r\n        currentContent: {},\r\n        previousContent: {},\r\n        menuContent : {},\r\n        phrase : \"\",\r\n        previousKey : \"\",\r\n        currentTextInsert: \"\",\r\n        shortcut: \"\"\r\n      }\r\n\r\n\r\n      new MenuService().getMenu().then((menu) => {\r\n        this.setState({menuContent: menu})\r\n\r\n        this.setState({\"previousContent\": [menu]})\r\n        this.setState({\"currentContent\": menu})\r\n      })\r\n\r\n      this.handlePress = this.handlePress.bind(this);\r\n      this.handleEdit = this.handleEdit.bind(this);\r\n      this.handleDelete = this.handleDelete.bind(this);\r\n      this.categoryPress = this.categoryPress.bind(this);\r\n\r\n    }\r\n\r\n    handleAddPress = () => {\r\n\r\n    }\r\n\r\n    saveInput = () => {\r\n      if(this.state[\"phrase\"].length === 0)\r\n        return\r\n      this.state[\"currentContent\"][this.state[\"phrase\"]] = {text: this.state[\"phrase\"], \"shortcut\": this.state[\"shortcut\"], \"items\" : {}}\r\n      console.log(this.state)\r\n      let path = \"\"\r\n      if(this.state[\"contentHistoryStack\"].length >= 1)\r\n        path = this.state[\"contentHistoryStack\"].join(\"%%\")\r\n      let obj = {}\r\n      if(this.state[\"currentContent\"])\r\n        obj = this.set(path, this.state[\"currentContent\"], this.state[\"menuContent\"])\r\n      \r\n      this.setState({phrase: \"\"})\r\n      new MenuService().saveMenu(this.state[\"menuContent\"])\r\n    }\r\n\r\n    set(path, value, obj) {\r\n      var schema = obj;  // a moving reference to internal objects within obj\r\n      var pList = path.split('%%');\r\n      var len = pList.length;\r\n      for(var i = 0; i < len-1; i++) {\r\n          var elem = pList[i];\r\n          if( !schema[elem] ) schema[elem] = {}\r\n          schema = schema[elem];\r\n      }\r\n      if(schema[pList[len-1]] != null)\r\n        schema[pList[len-1]] = value;\r\n\r\n      return schema\r\n    }\r\n\r\n    delete(path, obj)\r\n    {\r\n      var schema = obj;  // a moving reference to internal objects within obj\r\n      var pList = path.split('%%');\r\n      var len = pList.length;\r\n      for(var i = 0; i < len-1; i++) {\r\n          var elem = pList[i];\r\n          schema = schema[elem];\r\n      }\r\n      if(schema)\r\n        delete schema[pList[len-1]]\r\n\r\n      return schema\r\n    }\r\n\r\n    get(path, obj)\r\n    {\r\n      var schema = obj;  // a moving reference to internal objects within obj\r\n      var pList = path.split('%%');\r\n      var len = pList.length;\r\n      for(var i = 0; i < len-1; i++) {\r\n          var elem = pList[i];\r\n          if( !schema[elem] ) schema[elem] = {}\r\n          schema = schema[elem];\r\n      }\r\n      return schema \r\n    }\r\n\r\n    handleEdit = (key, text, shortcut) => {\r\n      let path = \"\"\r\n      if(this.state[\"contentHistoryStack\"].length >= 1)\r\n        path = this.state[\"contentHistoryStack\"].join(\"%%\")\r\n      \r\n      let obj = {}\r\n\r\n      let newState = {}\r\n\r\n      if(this.state[\"currentContent\"]) {\r\n        for (const [k, v] of Object.entries(this.state[\"currentContent\"])) {\r\n          if(key == k)\r\n          {\r\n            newState[text] = v\r\n            newState[text].text = text\r\n            newState[text].shortcut = shortcut\r\n          }\r\n          else\r\n            newState[k] = this.state[\"currentContent\"][k]\r\n        }\r\n        obj = this.set(path, newState, this.state[\"menuContent\"])\r\n        console.log(newState)\r\n      }\r\n        \r\n      \r\n      //this.setState({phrase: \"\"})\r\n      new MenuService().saveMenu(this.state[\"menuContent\"])\r\n      this.setState({menuContent: this.state[\"menuContent\"]})      \r\n    }\r\n\r\n    handleDelete = (key) => {    \r\n      let path = \"\"\r\n      if(this.state[\"contentHistoryStack\"].length >= 1)\r\n      {\r\n        path = this.state[\"contentHistoryStack\"].join(\"%%\")\r\n        path += \"%%\" + key\r\n      }\r\n      else\r\n      {\r\n        path += key\r\n      }\r\n        \r\n      \r\n      let obj = {}\r\n      if(this.state[\"currentContent\"])\r\n        obj = this.delete(path, this.state[\"menuContent\"])\r\n      \r\n      //this.setState({phrase: \"\"})\r\n      new MenuService().saveMenu(this.state[\"menuContent\"])\r\n      this.setState({menuContent: this.state[\"menuContent\"]})\r\n\r\n    }\r\n\r\n    handlePress = (key, currentContent, previousContent, enter) => {\r\n      console.log(\"--AAAA----------\")     \r\n      let current = currentContent[\"items\"]\r\n      console.log(current)\r\n      if(current == {})\r\n      {\r\n        //console.log(currentContent.text)\r\n        if(enter === true)\r\n        {\r\n          this.setState({\"currentContent\": {}})\r\n          this.setState({\"previousContent\": this.state.arrayvar.concat(newelement)})\r\n        }\r\n        else\r\n        {\r\n          this.props.navigation.state.routes[0].params.addTextContent(currentContent.text);\r\n          this.props.navigation.closeDrawer();\r\n        }\r\n\r\n      }\r\n      else\r\n      {\r\n        this.setState({\"currentContent\": current})\r\n        this.setState({\"previousContent\": this.state[\"previousContent\"].concat(previousContent)})\r\n        //this.state[\"previousContent\"].push(previousContent)\r\n      }\r\n\r\n      let arr = this.state[\"contentHistoryStack\"]\r\n      arr.push(key)\r\n      arr.push(\"items\")\r\n      console.log(\"Content History Stack\")\r\n      console.log(arr)\r\n      this.setState({\"contentHistoryStack\": arr})\r\n    }\r\n  \r\n    categoryPress() {\r\n      console.log(\"Category Press\")\r\n      console.log(this.state)\r\n      if(this.state[\"previousContent\"].length >1) \r\n        this.setState({\"currentContent\": this.state[\"previousContent\"].pop()})\r\n\r\n\r\n        let arr = this.state[\"contentHistoryStack\"]\r\n        arr.pop()\r\n        arr.pop()\r\n        this.setState({\"contentHistoryStack\": arr})\r\n        \r\n      \r\n    }\r\n\r\n    getTitle = () => {\r\n      console.log(\"previous content\")\r\n\r\n      obj = this.getPreviousMenuObject()\r\n      \r\n      console.log(obj)\r\n      return \"\" + obj.text\r\n    }\r\n\r\n    getPreviousMenuObject() {\r\n      let path = \"\"\r\n      if(this.state[\"contentHistoryStack\"].length >= 1)\r\n        path = this.state[\"contentHistoryStack\"].join(\"%%\")\r\n      obj = {}\r\n      if(this.state[\"currentContent\"])\r\n        obj = this.get(path, this.state[\"menuContent\"])\r\n\r\n      return obj\r\n    }\r\n\r\n    formatTitle(currentContent) {\r\n      return currentContent.shortcut? currentContent.text + \" [\" + currentContent.shortcut + \"]\" : currentContent.text + \" [No Shortcut Set]\";\r\n    }\r\n\r\n    render(){\r\n      return (\r\n        <View style={styles.container}>\r\n          <Button style={{height:40}} onPress={() => {this.categoryPress()}} title=\"Up Category\"/>       \r\n\r\n          <View style={styles.menuHeader}>\r\n          </View>\r\n          <ScrollView style={{flex:1}}>\r\n            <View style={{flex:1, flexDirection: 'column'}}>\r\n              {\r\n                Object.keys(this.state.currentContent).map((key) => {\r\n                  //<MenuItem key={key} val={val} handler={this.handleClick.bind} />\r\n                  if(Platform.OS === 'web')\r\n                    return <MenuItemWeb \r\n                      key={key} key1={key} \r\n                      menuTitle={this.formatTitle(this.state.currentContent[key])} \r\n                      phrase={this.state.currentContent[key].text} \r\n                      shortcut={this.state.currentContent[key].shortcut} \r\n                      menuVal={this.state.currentContent[key]} \r\n                      currentContent={this.state.currentContent} \r\n                      handler={this.handlePress} \r\n                      handlerEdit={this.handleEdit} \r\n                      handlerDelete={this.handleDelete} \r\n                      addHandler={this.handleAddPress} \r\n                    />\r\n                  else\r\n                    return <MenuItem key={key} key1={key} menuTitle={this.state.currentContent[key].text} menuVal={this.state.currentContent[key]} currentContent={this.state.currentContent} handler={this.handlePress} handlerEdit={this.handleEdit} handlerDelete={this.handleDelete} addHandler={this.handleAddPress} />\r\n              })\r\n              }\r\n            </View>\r\n            <View style={{marginTop: 40}}>\r\n              <View style={{flex:1, flexDirection:'row'}}>\r\n                <TextInput\r\n                  onChangeText={(phrase) => this.setState({phrase: phrase})}\r\n                  value={this.state.phrase}\r\n                  placeholder=\"Enter a category or phrase\"\r\n                  style={{fontSize:16, paddingLeft: 10, paddingTop:5, paddingBottom:5, marginLeft: 10, marginRight: 10, borderBottomColor: 'grey', borderWidth: 1, flex: 2}}\r\n                />\r\n\r\n                <TextInput\r\n                  onChangeText={(shortcut) => this.setState({shortcut: shortcut})}\r\n                  value={this.state.shortcut}\r\n                  placeholder=\"Enter a shortcut\"\r\n                  style={{fontSize:16, paddingLeft: 10, paddingTop:5, paddingBottom:5, marginLeft: 10, marginRight: 10, borderBottomColor: 'grey', borderWidth: 1, flex: 1}}\r\n                />\r\n                \r\n                {\r\n                  (Platform.OS === 'web')?\r\n                  <StyledButton leftIcon={{name: 'save'}} buttonStyle={styles.webButton2} style={{flex:1}} onPress={() => {this.saveInput()}} title=\"Save\"/>\r\n                  :\r\n                  <Button style={{height:40}} onPress={() => {this.saveInput()}} title=\"Save\"/>\r\n\r\n                }\r\n                </View>\r\n            </View>\r\n\r\n          </ScrollView>\r\n          <View style={styles.footerContainer}>\r\n          </View>\r\n        </View>\r\n      );\r\n    }\r\n  }\r\n\r\n  class MenuItemWeb extends React.Component{\r\n    constructor(props){\r\n      super(props)\r\n      console.log(props)\r\n\r\n      this.state = {\r\n        phrase: \"\",\r\n        shortcut: \"\",\r\n        showInput: false,\r\n        showEditInput: false,\r\n        phrase: \"\",\r\n        shortcut: \"\"\r\n      }\r\n    }\r\n\r\n    showInput() {\r\n      this.setState({showInput: true})\r\n    }\r\n\r\n    saveInput()\r\n    {\r\n      this.setState({showInput: false})\r\n    }\r\n\r\n    editAction() {\r\n      this.setState({showEditInput: !this.state.showEditInput})\r\n      this.setState({phrase: this.props.phrase, shortcut: this.props.shortcut})\r\n    }\r\n\r\n    saveEditAction() {\r\n      this.editAction();\r\n      this.props.handlerEdit(this.props.key1, this.state.phrase, this.state.shortcut)\r\n    }\r\n  \r\n    render(){\r\n      return (\r\n          <View style={{flex:1, flexDirection: 'row', justifyContent: \"left\"}}>\r\n            <View style={{flex:1, flexDirection: 'column'}}>\r\n            { !this.state.showEditInput && <StyledButton buttonStyle={styles.webButton3} color=\"#000\" type=\"clear\" small onPress={() => {this.props.handler(this.props.key1, this.props.menuVal, this.props.currentContent, false)}} title={this.props.menuTitle}/> }\r\n            { this.state.showEditInput && <View style={{flexDirection: 'row'}}>\r\n              <TextInput\r\n                  onChangeText={(phrase) => this.setState({phrase: phrase})}\r\n                  value={this.state.phrase}\r\n                  placeholder=\"Enter a category or phrase\"\r\n                  style={{fontSize:16, paddingLeft: 10, paddingTop:5, paddingBottom:5, marginLeft: 10, marginRight: 10, borderBottomColor: 'grey', borderWidth: 1, flex: 2}}\r\n                />\r\n\r\n                <TextInput\r\n                  onChangeText={(shortcut) => this.setState({shortcut: shortcut})}\r\n                  value={this.state.shortcut}\r\n                  placeholder=\"Enter a shortcut\"\r\n                  style={{fontSize:16, paddingLeft: 10, paddingTop:5, paddingBottom:5, marginLeft: 10, marginRight: 10, borderBottomColor: 'grey', borderWidth: 1, flex: 1}}\r\n                />\r\n            </View> }\r\n            </View>\r\n            <View style={{marginBottom: 10, flexDirection:'row'}}>\r\n            { this.state.showEditInput && <StyledButton leftIcon={{name: 'save'}} containerStyle={{marginRight: 5}}   type=\"outline\" small onPress={() => this.saveEditAction()} title=\"Update item\"/> }           \r\n            { !this.state.showEditInput && <StyledButton leftIcon={{name: 'edit'}} containerStyle={{marginRight: 5}}  color=\"#fff\" type=\"outline\" small onPress={() => {this.editAction(this.props.key1)}} title=\"Edit\"/> }\r\n            { !this.state.showEditInput && <StyledButton leftIcon={{name: 'delete'}} containerStyle={{marginRight: 5}} buttonStyle= {{borderColor: 'red'}} titleStyle={{color: 'red'}}  color=\"#F00\" type=\"outline\"  small onPress={() => {this.props.handlerDelete(this.props.key1)}} title=\"Delete\"/> }\r\n            { !this.state.showEditInput && this.props.menuVal[\"items\"] === undefined && <StyledButton buttonStyle={styles.webButton2} color=\"#000\" small titleStyle={{color: '#000000'}} onPress={() => {this.props.handler(this.props.key1, this.props.menuVal, this.props.currentContent, true)}} title=\"Add item\"/>}\r\n            </View>\r\n        </View>\r\n      )\r\n    }\r\n  }\r\n  \r\n  class MenuItem extends React.Component{\r\n    constructor(props){\r\n      super(props)\r\n      console.log(props)\r\n\r\n      this.state = {\r\n        phrase: \"\",\r\n        showInput: false\r\n      }\r\n    }\r\n\r\n    showInput() {\r\n      this.setState({showInput: true})\r\n    }\r\n\r\n    saveInput()\r\n    {\r\n      this.setState({showInput: false})\r\n    }\r\n  \r\n    render(){\r\n      return (\r\n        <View style={{flex:1}}>\r\n          <View style={{flex:1, flexDirection: 'row', justifyContent: \"left\"}}>\r\n            <Button style={{height:40}} onPress={() => {this.props.handler(this.props.key1, this.props.menuVal, this.props.currentContent, false)}} title={this.props.menuTitle}/>\r\n            {//<Button style={{height:40}} onPress={() => {this.props.handlerEdit(this.props.key1, this.props.menuVal, this.props.currentContent, false)}} title=\"Edit\"/>\r\n            }\r\n            <Button style={{height:40}} onPress={() => {this.props.handlerDelete(this.props.key1, this.props.menuVal, this.props.currentContent, false)}} title=\"Delete\"/>\r\n\r\n            {  this.props.menuVal[\"items\"] === undefined &&\r\n            <Button style={{height:40}} onPress={() => {this.props.handler(this.props.key1, this.props.menuVal, this.props.currentContent, true)}} title=\"Add item\"/>\r\n            }\r\n          </View>\r\n          { this.state.showInput &&\r\n          <View style={{flex: 0, marginLeft: 10}}>\r\n            <TextInput\r\n                onChangeText={(phrase) => this.setState({phrase: phrase})}\r\n                value={this.state.phrase}\r\n                placeholder=\"Enter a category or phrase\"\r\n                style={{flex:1}}\r\n              />\r\n            <Button style={{height:40}} onPress={() => {this.saveInput()}} title=\"Save\"/>\r\n          </View>\r\n        }\r\n        </View>\r\n      )\r\n    }\r\n  }","import React from 'react';\r\nimport {Platform, StyleSheet,ImageBackground, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList, Keyboard, Alert } from 'react-native';\r\nimport { ListItem, Icon, Card, Overlay, ButtonGroup, Button as StyledButton } from 'react-native-elements'\r\nimport styles from './Styles'\r\n  \r\nexport  class WebAlert extends React.Component  {\r\n    constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        'data': [],\r\n      }\r\n    }\r\n\r\n    render()\r\n    {\r\n      return (\r\n        this.props.visible === true? \r\n        <View>\r\n          <StyledButton buttonStyle={styles.webButton2} title=\"Consult\" onPress={() => this.props.navigation.navigate('NoteDetail', {action: \"new\", type: \"consult\", patientName: this.props.patientName})}></StyledButton>\r\n          <StyledButton buttonStyle={styles.webButton2} title=\"Follow Up\" onPress={() => this.props.navigation.navigate('NoteDetail', {action: \"new\", type: \"followup\", patientName: this.props.patientName})}></StyledButton>\r\n          <StyledButton buttonStyle={styles.webButton2} title=\"Other\" onPress={() => this.props.navigation.navigate('NoteDetail', {action: \"new\", type: \"other\", patientName:this.props.patientName})}></StyledButton>\r\n          <StyledButton buttonStyle={styles.webButton2} title=\"Cancel\" onPress={() => this.props.callback(false)}></StyledButton>\r\n        </View>\r\n        :\r\n        <View></View>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\nexport class Alerts extends React.Component  {\r\n    noteAlert(navigation, patientName){\r\n        Alert.alert(\r\n          'Type of Note',\r\n          'Please select the type of note you would like to create',\r\n          [\r\n            {text: 'Consult', onPress: () => navigation.navigate('NoteDetail', {action: \"new\", type: \"consult\", patientName: patientName})},\r\n            {text: 'Follow Up', onPress: () => navigation.navigate('NoteDetail',  {action: \"new\", type: \"followup\", patientName: patientName})},\r\n            {text: 'Other', onPress: () => navigation.navigate('NoteDetail', {action: \"new\", type: \"other\", patientName: patientName})},\r\n            {text: 'Cancel', onPress: () => console.log('cancel')},\r\n          ],\r\n          { cancelable: true }\r\n        )\r\n    }\r\n  }","export class TextUtility {\r\n    constructor() {\r\n        if(this.instance)\r\n            return this.instance;\r\n        \r\n        this.instance = this;\r\n    }\r\n\r\n    stripHtmlTags(body) {\r\n        if(!this.temp)\r\n            this.temp = document.createElement(\"div\");\r\n        this.temp.innerHTML = body;\r\n        return this.temp.textContent || this.temp.innerText;\r\n    }   \r\n}","import {SettingsService} from \"./DomainService\"\r\n\r\nexport class TokenComponent {\r\n    createOrGetToken(){\r\n        let s = new SettingsService();\r\n\r\n        return s.getSettings().then((settings) =>{\r\n            if(settings && settings[\"key\"]) {\r\n                return settings[\"key\"];\r\n            }\r\n            else {\r\n                settings[\"key\"] = new Array(100).fill().map(() => String.fromCharCode(Math.random()*86+40)).join(\"\");\r\n                s.setSettings(settings);\r\n            }\r\n        });\r\n    }\r\n}","import {SettingsService} from './DomainService'\r\nimport { AsyncStorage } from \"react-native\"\r\n\r\nexport class BackupService {\r\n    constructor(backupType=\"api\"){\r\n      this.backupType = backupType;\r\n    }\r\n    collect(uid) {\r\n        let importData = async (uid) => {\r\n            try {\r\n              const keys = await AsyncStorage.getAllKeys();\r\n              const result = await AsyncStorage.multiGet(keys);\r\n            \r\n              let data = result;\r\n\r\n              this.performBackup(uid, data)\r\n            } catch (error) {\r\n              console.error(error)\r\n            }\r\n        }\r\n        importData(uid)\r\n    }\r\n\r\n    restoreFromBackup(data) {\r\n      data = JSON.parse(data)\r\n      data.forEach(item => {\r\n        AsyncStorage.setItem(item[0], item[1]);\r\n      })\r\n\r\n    }\r\n\r\n    performBackup(uid, data) {\r\n      if(this.backupType === \"file\")\r\n        this.sendFile(uid, JSON.stringify(data)) \r\n      else\r\n        this.sendData(uid, JSON.stringify(data)) \r\n    }\r\n\r\n    doBackup() {\r\n        let settingsService = new SettingsService()\r\n        settingsService.getSettings().then((settings) => {\r\n          if(this.backupType === \"file\") {\r\n            this.collect(settings.key)\r\n          }\r\n          else if(settings.lastBackupDate === undefined) {\r\n            settings.lastBackupDate = Date.now()\r\n            settingsService.setSettings(settings)\r\n            //do a backup\r\n          }\r\n          else if(settings.lastBackupDate - Date.now()  < -(1000 * 60 * 60 * 24*2))\r\n          {\r\n            settings.lastBackupDate = Date.now()\r\n            settingsService.setSettings(settings)\r\n            this.collect(settings.key)        \r\n          }\r\n        });\r\n      }\r\n\r\n      sendFile(uid, content) {\r\n        var a = document.createElement(\"a\");\r\n        var file = new Blob([content], {type: 'text/plain'});\r\n        a.href = URL.createObjectURL(file);\r\n        a.download = \"backup.json\";\r\n        a.click();\r\n      }\r\n    \r\n      sendData(uid, content) {\r\n        const requestOptions = {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ uid: uid, content: content })\r\n        };\r\n        let api = \"http://localhost:3000/backups/\"\r\n        if(window.api !== undefined && window.api !== \"{API}\")\r\n            api = window.api + \"backups\"\r\n\r\n        fetch(api, requestOptions)\r\n            .then(response => response.json())\r\n            .then(data => console.log(data));\r\n      }\r\n}","import React from 'react';\r\nimport {Platform, StyleSheet,ImageBackground, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList, Keyboard, Alert } from 'react-native';\r\nimport { ListItem, Icon, Card, Overlay, ButtonGroup, Button as StyledButton } from 'react-native-elements'\r\nimport styles from './Styles'\r\nimport {PatientService} from './DomainService'\r\nimport {Alerts, WebAlert} from './Alerts'\r\nimport { AsyncStorage } from \"react-native\"\r\nimport {TextUtility} from './Utilities'\r\nimport { TokenComponent } from './TokenComponent'\r\nimport { BackupService } from './BackupService'\r\n\r\nconst images= {\r\n    background: {img: require(\"./Assets/black-1072366_1920.jpg\"), img2: require(\"./Assets/ontario.jpg\")}\r\n  }\r\n  \r\n\r\nexport class HomeScreen extends React.Component {\r\n  \r\n    constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        notes: [],\r\n        noteCategoriesVisible: false\r\n      }\r\n      new TokenComponent().createOrGetToken();\r\n      new BackupService().doBackup();\r\n      this.cacheBuster();\r\n\r\n      setTimeout(() => this.refreshLastOpened(),100)\r\n    }\r\n\r\n    cacheBuster() {\r\n      fetch('/meta.json')\r\n      .then((response) => response.json())\r\n      .then((meta) => {\r\n        if(meta && meta.build_number != document.versionNumber) {\r\n          if (caches) {\r\n            // Service worker cache should be cleared with caches.delete()\r\n            caches.keys().then(function(names) {\r\n              for (let name of names) caches.delete(name);\r\n            });\r\n          }\r\n          window.location.reload(true);\r\n        }\r\n      })\r\n    }\r\n\r\n    refreshLastOpened = () =>\r\n    {\r\n      let patientService = new PatientService()\r\n      this.setState({notes : []}, () => {\r\n        patientService.getLastOpenedNotes().then((innerNotes) => {       \r\n          this.setState({notes: []})\r\n  \r\n          let promises = []\r\n  \r\n          innerNotes.forEach(innerNote => {\r\n            promises.push(patientService.getPatientById(innerNote.patient))\r\n          })\r\n  \r\n          Promise.all(promises).then(val => {\r\n            this.valKeys = {}\r\n            console.log(val)\r\n            val.forEach(item => {\r\n              if(item[0] !== undefined)\r\n                this.valKeys[item[0].id] = item[0].name\r\n            }, this)\r\n  \r\n            let notes = innerNotes.map(innerNote => {\r\n              innerNote[\"patientName\"] = this.valKeys[innerNote.patient]\r\n              return innerNote\r\n            })\r\n  \r\n            this.setState({notes: notes})\r\n          })\r\n  \r\n  \r\n        })\r\n      })\r\n    }\r\n    \r\n    componentDidMount() {\r\n      this.listener = this.props.navigation.addListener(\"didFocus\", this.refreshLastOpened);\r\n      this.refreshLastOpened()\r\n  \r\n    }\r\n  \r\n    setNoteCategoriesVisible(state) {\r\n      this.setState({noteCategoriesVisible: state});\r\n    }\r\n  \r\n    reset() {\r\n      //AsyncStorage.getAllKeys().then(AsyncStorage.multiRemove)\r\n      AsyncStorage.setItem('notes', JSON.stringify(null), () => {\r\n        this.refreshLastOpened()\r\n      });\r\n  \r\n      AsyncStorage.setItem('patients', JSON.stringify(null), () => {\r\n        this.refreshLastOpened()\r\n      });\r\n    }\r\n    \r\n    render() {\r\n      return (\r\n        <View style={styles.mainContainer}>\r\n          <ImageBackground source={images['background'].img} style={styles.image}>\r\n          <StatusBar barStyle=\"light-content\" />\r\n          <KeyboardAvoidingView style={{ flex: 1, alignItems: 'center', justifyContent: 'center'}}>\r\n            <View style={{height: 1, width: 1, marginBottom: 10}}>\r\n            </View>\r\n            <View>\r\n              {    \r\n                Platform.OS !== 'web'?        \r\n              <StyledButton\r\n                icon={{name:'note-add', color:'#ffffff'}}\r\n                backgroundColor='#03A9F4'\r\n                buttonStyle={{borderRadius: 10, marginLeft: 0, marginRight: 0, marginBottom: 10, width: 400}}\r\n                onPress={() => new Alerts().noteAlert(this.props.navigation)}\r\n                title=\"Create a New Note\"\r\n                />\r\n                :\r\n              <StyledButton\r\n                icon={{name:'note-add', color:'#ffffff'}}\r\n                backgroundColor='#03A9F4'\r\n                buttonStyle={{borderRadius: 10, marginLeft: 0, marginRight: 0, marginBottom: 10, width: 400}}\r\n                onPress={() => this.setNoteCategoriesVisible(true)}\r\n                title=\"Create a New Note\"\r\n                />\r\n                \r\n              }\r\n              <WebAlert navigation={this.props.navigation} visible={this.state.noteCategoriesVisible} callback={(state) => this.setNoteCategoriesVisible(state)}/>\r\n  \r\n              <StyledButton\r\n                icon={{name:'account-circle', color:'#ffffff'}}\r\n                backgroundColor='#03A9F4'\r\n                buttonStyle={{borderRadius: 10, marginLeft: 0, marginRight: 0, marginBottom: 10}}\r\n                onPress={() => this.props.navigation.navigate('Patients')}\r\n                title=\"View and add Patients\"\r\n              />\r\n              <StyledButton\r\n                icon={{name:'format-quote', color:'#ffffff'}}\r\n                backgroundColor='#03A9F4'\r\n                buttonStyle={{borderRadius: 10, marginLeft: 0, marginRight: 0, marginBottom: 0}}\r\n                onPress={() => this.props.navigation.navigate('Categories')}\r\n                title=\"Categories and Phrases\"\r\n              />\r\n\r\n  \r\n              <View style={{flexDirection: 'column', justifyContent:'center', borderRadius: 10, alignItems: \"center\"}}>              \r\n  \r\n                <Text style={{color: '#ffffff', marginTop: 20, justifyContent:'center'}}>Last Opened Notes</Text>\r\n                {\r\n                  //\r\n                  this.state.notes.sort((a, b) => b.updateDate - a.updateDate).slice(0,7).filter(item => {\r\n                      return item.text !== undefined\r\n                  }).map((item) => {\r\n                      let txt = new TextUtility().stripHtmlTags(item.text).replace(/(\\r\\n|\\n|\\r)/gm,\" \").slice(0, 30)\r\n                      txt += new TextUtility().stripHtmlTags(item.text).length > 30? '...' : '';\r\n                    return(\r\n                      Platform.OS === 'ios'? <Button title={txt} key={item.id} onPress={() => {this.props.navigation.navigate('NoteDetail', {\"action\": \"edit\", \"type\": item.type, \"patient\": item.patient, \"noteId\": item.id, \"text\": item.text, \"patientName\": item.patientName})}}/> :\r\n                      Platform.OS === 'web'? <StyledButton buttonStyle={styles.webButton} title={txt} key={item.id} onPress={() => {this.props.navigation.navigate('NoteDetail', {\"action\": \"edit\", \"type\": item.type, \"patient\": item.patient, \"noteId\": item.id, \"text\": item.text, \"patientName\": item.patientName})}}/> :null  \r\n                    )\r\n                  })\r\n                }\r\n                \r\n                <View>{\r\n                  //<Button title=\"Reset Notes\" key={\"reset\"} onPress={() => this.reset()}/>\r\n                }\r\n                </View>\r\n          </View>\r\n  \r\n            </View>\r\n  \r\n          </KeyboardAvoidingView>\r\n          <View style={styles.footerContainer}>\r\n            <View style={{flex:0, flexDirection: 'row'}}>\r\n            <Icon\r\n              name='cog'\r\n              type='font-awesome'\r\n              color='#aaa'\r\n              onPress={() => this.props.navigation.navigate('Settings')}\r\n            />\r\n            <Text style={{color:'white', paddingLeft: 10}}>Version: {window.versionNumber}</Text>\r\n            </View>\r\n          </View>\r\n          </ImageBackground>\r\n        </View>\r\n      );\r\n    }  \r\n  }","import React from 'react';\r\nimport {Text, View, Button, TextInput, Switch } from 'react-native';\r\nimport {Divider, ListItem, Icon, Overlay, ButtonGroup, Button as StyledButton, SearchBar, Input } from 'react-native-elements'\r\nimport {TokenComponent} from './TokenComponent'\r\nimport {SettingsService} from \"./DomainService\"\r\nimport { BackupService } from './BackupService'\r\n\r\nexport class SettingsScreen extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            settings: {},\r\n            backupFileContent: \"\"\r\n        }\r\n\r\n        this.styles = {\r\n            titleText: {\r\n                fontSize: 20,\r\n                fontWeight: \"bold\"\r\n            }\r\n        }\r\n\r\n        new SettingsService().getSettings().then((settings) =>{\r\n            if(settings.name === undefined) settings.name = \"Steven Wesley\"\r\n            if(settings.richTextEnabled === undefined) settings.richTextEnabled = true\r\n            console.log(settings)\r\n            this.setState({settings: settings})\r\n        })\r\n        \r\n    }\r\n\r\n    clearSignature() {\r\n        let settings = this.state.settings\r\n        settings.signature = null\r\n        this.setState({settings: settings})\r\n        new SettingsService().setSettings(this.state.settings)        \r\n    }\r\n    nameChange(name) {\r\n        let settings = this.state.settings\r\n        settings.name = name\r\n        this.setState({settings: settings})\r\n        new SettingsService().setSettings(this.state.settings)\r\n    }\r\n\r\n    imageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        this.getBase64(file).then(base64 => {\r\n            let settings = this.state.settings\r\n            settings.signature = base64\r\n            this.setState({settings: settings})\r\n            new SettingsService().setSettings(this.state.settings)\r\n            console.debug(\"file stored\",base64);\r\n        });\r\n    };\r\n  \r\n    restoreBackupFile() {\r\n        if(this.state.backupFileContent !== \"\")\r\n            new BackupService().restoreFromBackup(this.state.backupFileContent)\r\n    }\r\n\r\n    getBase64(file) {\r\n        return new Promise((resolve,reject) => {\r\n           const reader = new FileReader();\r\n           reader.onload = () => resolve(reader.result);\r\n           reader.onerror = error => reject(error);\r\n           reader.readAsDataURL(file);\r\n        });\r\n      }\r\n\r\n    toggleRichTextSwitch() {\r\n        let settings = this.state.settings\r\n        settings.richTextEnabled = !settings.richTextEnabled\r\n        this.setState({settings: settings})\r\n        new SettingsService().setSettings(settings)\r\n    }\r\n\r\n    downloadContent() {\r\n        new BackupService(\"file\").doBackup();\r\n    }\r\n\r\n    clearImages() {\r\n        new SettingsService().clearSignatures();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Text style={{fontSize: 40}}>Personal Settings</Text>\r\n                    <Divider style={{ backgroundColor: 'grey' }} />\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Text style={this.styles.titleText}>Your name as you want it to appear on documents</Text>\r\n                    <TextInput \r\n                        placeholder=\"Enter your name\"\r\n                        style={{fontSize:16, borderWidth: 1, borderColor: '#eeeeee'}}\r\n                        onChangeText={(text) => this.nameChange(text)}\r\n                        value={this.state.settings.name}\r\n                    ></TextInput>\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Text style={this.styles.titleText}>Signature</Text>\r\n                    <input \r\n                        accept=\"image/png, image/jpeg\"\r\n                        type=\"file\" \r\n                        id=\"imageFile\" \r\n                        name='imageFile' \r\n                        onChange={this.imageUpload} />\r\n                    <View style={{flex:1,flexDirection: \"row\"}}>\r\n                    { this.state.settings.signature && <Button title=\"clear\" onPress={() => this.clearSignature()}></Button> }    \r\n                    { this.state.settings.signature && <img src={this.state.settings.signature} width=\"400\" height=\"100\"/> }\r\n                    </View>\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Text style={{fontSize: 40}}>App Settings</Text>\r\n                    <Divider style={{ backgroundColor: 'grey' }} />\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Text style={this.styles.titleText}>Enable Rich text editor</Text>\r\n                    <Switch\r\n                        trackColor={{ false: \"#767577\", true: \"#81b0ff\" }}\r\n                        thumbColor={this.state.settings.richTextEnabled ? \"#f5dd4b\" : \"#f4f3f4\"}\r\n                        ios_backgroundColor=\"#3e3e3e\"\r\n                        onValueChange={()=> this.toggleRichTextSwitch()}\r\n                        value={this.state.settings.richTextEnabled}\r\n                    />\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Text style={this.styles.titleText}>Token key (keep secret)</Text>\r\n                    <TextInput \r\n                        editable={false}\r\n                        style={{fontSize:16, borderWidth: 1, borderColor: '#eeeeee'}}\r\n                        placeholder=\"key\"\r\n                        value={this.state.settings.key}\r\n                    ></TextInput>\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Text style={this.styles.titleText}>Restore from Backup</Text>\r\n                    <TextInput \r\n                        style={{fontSize:16, borderWidth: 1, borderColor: '#eeeeee'}}\r\n                        placeholder=\"Paste the contents of the backup file here\"\r\n                        value={this.state.backupFileContent}\r\n                        onChangeText={(val) => this.setState({backupFileContent: val})}\r\n                    ></TextInput>\r\n                    <Button title=\"Restore content from (backup)\" onPress={() => this.restoreBackupFile()}></Button>\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Button title=\"Download all content (backup)\" onPress={() => this.downloadContent()}></Button>\r\n                </View>\r\n                <View style={{marginBottom: 10}}>\r\n                    <Button title=\"Remove all signatures from docs\" onPress={() => this.clearImages()}></Button>\r\n                </View>\r\n\r\n\r\n            </View>\r\n        )\r\n    }\r\n}","const buildOptions = {\r\n   \"quill\":true\r\n};\r\n\r\nexport default buildOptions","import jsPDF from 'jspdf'\r\n\r\nclass Template {\r\n    generateFromDict(dictionary)\r\n    {\r\n        let template = this.getTemplate()\r\n        Object.keys(dictionary).forEach(function(key) {\r\n            let pattern = new RegExp('{{' + key + '}}', 'g')\r\n            template = template.replace(pattern, dictionary[key])\r\n        });\r\n\r\n        return template\r\n    }\r\n\r\n    getTemplate() {\r\n        return \"\"\r\n    }\r\n}\r\n\r\n\r\nexport class TextTemplate extends Template {\r\n    getTemplate() {\r\n        return `\r\n        <style>\r\n        p {\r\n            font-size: 17px;\r\n            /* font-family: Helvetica, Arial, sans-serif */\r\n          }\r\n    \r\n          .ql-size-small {\r\n            font-size: 14px\r\n          }\r\n    \r\n          .ql-size-large {\r\n            font-size: 20px\r\n          }\r\n    \r\n          .ql-size-huge {\r\n            font-size: 22px\r\n          }\r\n\r\n          .ql-align-center {\r\n            text-align: center;\r\n          }\r\n\r\n          p {\r\n            margin: -2px;\r\n            line-height: normal;\r\n          }\r\n        </style>\r\n        <div style=\"padding-top: 5px; padding-bottom: 5px; padding-left: 20px; padding-right: 20px;\">\r\n            {{note}}\r\n        </div>\r\n        `\r\n    }\r\n}\r\n\r\nexport class MedicalOrderSheetImage extends Template {\r\n    getTemplate() {\r\n        return `\r\n        <div>\r\n            <img src=\"{{backgroundimage}}\" style=\"width:100%; height: 1000px\" />\r\n        </div>\r\n            \r\n        <div style=\"position: absolute; top: 120px; left:55px; font-size: 1em; background-color: white\">\r\n        {{lastname}}, {{firstname}}  \r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 200px; left:220px; font-size: 1em; background-color: white\">\r\n        {{datetime}}\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 225px; left:55px; line-height: 1.35; font-size: 1em; width: 700px\">\r\n        {{order0}}\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 340px; left:55px; font-size: 1em; width: 700px\">\r\n        {{physicianName}}\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 331px; left:520px; font-size: 1em; width: 700px\">\r\n        <img src=\"{{signature}}\" width=120 height=30>\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 380px; left:220px; font-size: 1em; background-color: white\">\r\n        {{datetime1}}\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 405px; left:55px; line-height: 1.35; font-size: 1em; width: 700px\">\r\n        {{order1}}\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 520px; left:55px; font-size: 1em; width: 700px\">\r\n        {{physicianName1}}\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 510px; left:520px; font-size: 1em; width: 700px\">\r\n        <img src=\"{{signature1}}\" width=120 height=30>\r\n        </div>\r\n\r\n        `\r\n    }\r\n}\r\n\r\nexport class MedicalOrderSheetImageCombined extends Template {\r\n    getTemplate() {\r\n        return `\r\n        <div style=\"text-align: center\">\r\n        <div>\r\n            <img src=\"{{backgroundimage}}\" style=\"width:90%; height: 950px\" />\r\n        </div>\r\n            \r\n        <div style=\"position: absolute; top: 90px; left:55px; font-size: 1em; background-color: white\">\r\n        {{lastname}}, {{firstname}}  \r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 172px; left:220px; font-size: 1em; background-color: white\">\r\n        {{datetime}}\r\n        </div>\r\n\r\n        <div style=\"text-align: left; position: absolute; top: 195px; left:55px; line-height: 1.35; font-size: 1em; width: 700px\">\r\n        {{order0}}\r\n        </div>\r\n\r\n        <div style=\"text-align: left; position: absolute; top: 310px; left:55px; font-size: 1em; width: 700px\">\r\n        {{physicianName}}\r\n        </div>\r\n\r\n        <div style=\"text-align: left; position: absolute; top: 305px; left:520px; font-size: 1em; width: 700px\">\r\n        <img src=\"{{signature}}\" width=120 height=30>\r\n        </div>\r\n\r\n        <div style=\"position: absolute; top: 352px; left:220px; font-size: 1em; background-color: white\">\r\n        {{datetime1}}\r\n        </div>\r\n\r\n        <div style=\"text-align: left; position: absolute; top: 375px; left:55px; line-height: 1.35; font-size: 1em; width: 700px\">\r\n        {{order1}}\r\n        </div>\r\n\r\n        <div style=\"text-align: left; position: absolute; top: 490px; left:55px; font-size: 1em; width: 700px\">\r\n        {{physicianName1}}\r\n        </div>\r\n\r\n        <div style=\"text-align: left; position: absolute; top: 485px; left:520px; font-size: 1em; width: 700px\">\r\n        <img src=\"{{signature1}}\" width=120 height=30>\r\n        </div>\r\n        </div>\r\n        `\r\n    }\r\n}\r\n\r\n\r\nexport class MedicalOrderSheet extends Template {\r\n\r\n\r\n    getTemplate() {\r\n        return `\r\n        <div style=\"margin:0px auto; padding: 30px\">\r\n        <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\r\n            <tr>\r\n                <td width=\"33%\"><img src=\"{{logo}}\" height=\"55%\" /></td>\r\n                <td width=\"34%\"><b>Ministry of the Solicitor General</b></td>\r\n                <td width=\"33%\" align=right><b>MEDICAL ORDER SHEET</b></td>\r\n            </tr>\r\n        </table>\r\n        <br/>\r\n        <br/>\r\n        <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=0>\r\n            <tr>\r\n                <td style=\"border: 1px solid #000; padding: 5px; width:50%\">Inmate Name (SURNAME, First Middle)<br/>\r\n                {{lastname}}, {{firstname}}\r\n                </td>\r\n                <td style=\"border: 1px solid #000; padding: 5px; border-left 0;\">OTIS #<br/><br/>\r\n                \r\n                </td>\r\n                <td style=\"border: 1px solid #000; padding: 5px; border-left 0;\">DOB <font size=1>(Mmm-dd-yyyy)</font><br/>\r\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Age&nbsp;&nbsp;\r\n                \r\n                </td> \r\n            </tr>\r\n            <tr>\r\n                <td colspan=\"3\" height=\"60\" style=\"border: 1px solid #000; padding: 5px; border-top: 0;\"><b>ALLERGIES:</b><br/><br/><br/></td> \r\n            </tr>\r\n        </table>\r\n        <table width=100% cellspacing=\"0\" cellpadding=\"0\">\r\n                <tr>\r\n                <td><font size=\"1\"><center><b>START NEW ORDER BELOW</b></center></font></td>\r\n            </tr>\r\n        </table>\r\n        <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"border: 1px solid #000; border-bottom: 3px solid\">\r\n            <tr style=\"border-bottom: 1px solid #000\">\r\n                <td colspan=\"2\" style=\"padding: 5px\">DATE <font size=1>(Mmm-ddd-yyyy)</font> & TIME {{datetime}}\r\n                \r\n                </td>\r\n              \r\n          \t\t</tr>\r\n              <tr>\r\n          \t\t<td style=\"border-bottom: 1px solid #000\" colspan=2><div style=\"height: 100px;\">{{order0}}</div></td>\r\n          \t</tr>\r\n            <tr>\r\n                <td width=\"50%\" style=\"border-right: 1px solid #000; padding: 5px\">{{physicianName}}</td>\r\n                <td width=\"50%\" style=\"\"><font size=\"1\"><br/><br/><center>SIGNATURE</center></font></td>\r\n            </tr>            \r\n        </table>\r\n          \r\n        <table width=100% cellspacing=\"0\" cellpadding=\"0\">\r\n                <tr>\r\n                <td><font size=\"1\"><center><b>START NEW ORDER BELOW</b></center></font></td>\r\n            </tr>\r\n        </table>\r\n        <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"border: 1px solid #000; border-bottom: 3px solid\">\r\n        <tr style=\"border-bottom: 1px solid #000\">\r\n            <td colspan=\"2\" style=\"padding: 5px\">DATE <font size=1>(Mmm-ddd-yyyy)</font> & TIME {{datetime1}}\r\n            \r\n            </td>\r\n          \r\n              </tr>\r\n          <tr>\r\n              <td style=\"border-bottom: 1px solid #000\" colspan=2><div style=\"height: 100px;\">{{order1}}</div></td>\r\n          </tr>\r\n            <tr>\r\n                <td width=\"50%\" style=\"border-right: 1px solid #000; padding: 5px\">{{physicianName1}}</td>\r\n                <td width=\"50%\" style=\"\"><font size=\"1\"><br/><br/><center>SIGNATURE</center></font></td>\r\n            </tr>            \r\n        </table>          \r\n        <table width=100% cellspacing=\"0\" cellpadding=\"0\">\r\n                <tr>\r\n                <td><font size=\"1\"><center><b>START NEW ORDER BELOW</b></center></font></td>\r\n            </tr>\r\n        </table>\r\n        <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"border: 1px solid #000; border-bottom: 3px solid\">\r\n        <tr style=\"border-bottom: 1px solid #000\">\r\n            <td colspan=\"2\" style=\"padding: 5px\">DATE <font size=1>(Mmm-ddd-yyyy)</font> & TIME\r\n            \r\n            </td>\r\n          \r\n              </tr>\r\n          <tr>\r\n              <td style=\"border-bottom: 1px solid #000\" colspan=2><div style=\"height: 100px;\"></div></td>\r\n          </tr>\r\n        <tr>\r\n            <td width=\"50%\" style=\"border-right: 1px solid #000; padding: 5px\"></td>\r\n            <td width=\"50%\" style=\"\"><font size=\"1\"><br/><br/><center>SIGNATURE</center></font></td>\r\n        </tr>            \r\n    </table>\r\n          \r\n        <table width=100% cellspacing=\"0\" cellpadding=\"0\">\r\n                <tr>\r\n                <td><font size=\"1\"><center><b>START NEW ORDER BELOW</b></center></font></td>\r\n            </tr>\r\n        </table>\r\n        <table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"border: 1px solid #000; border-bottom: 3px solid\">\r\n        <tr style=\"border-bottom: 1px solid #000\">\r\n            <td colspan=\"2\" style=\"padding: 5px\">DATE <font size=1>(Mmm-ddd-yyyy)</font> & TIME\r\n            \r\n            </td>\r\n          \r\n              </tr>\r\n          <tr>\r\n              <td style=\"border-bottom: 1px solid #000\" colspan=2><div style=\"height: 100px;\"></div></td>\r\n          </tr>\r\n        <tr>\r\n            <td width=\"50%\" style=\"border-right: 1px solid #000; padding: 5px\"></td>\r\n            <td width=\"50%\" style=\"\"><font size=\"1\"><br/><br/><center>SIGNATURE</center></font></td>\r\n        </tr>            \r\n    </table>\r\n        <table width=100% cellspacing=\"0\" cellpadding=\"0\" style=\"border-bottom: 1px solid #000\">\r\n                <tr>\r\n                <td><font size=\"1\"><center><b>DO NOT WRITE BELOW THIS LINE</b></center></font></td>\r\n            </tr>\r\n        </table>\r\n        </div>\r\n        `\r\n    }    \r\n\r\n\r\n\r\n\r\n}","import React from 'react';\r\nimport {Platform, StyleSheet,ImageBackground, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList, Keyboard, Alert } from 'react-native';\r\nimport { ListItem, Icon, Overlay, ButtonGroup, Button as StyledButton, SearchBar } from 'react-native-elements'\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport jsPDF from 'jspdf';\r\nimport {MedicalOrderSheet, TextTemplate, MedicalOrderSheetImage, MedicalOrderSheetImageCombined} from './Templates';\r\nimport html2pdf from 'html2pdf.js';\r\nimport {TextUtility} from './Utilities'\r\n  \r\n  \r\nexport class ToolbarComponent extends React.Component {\r\n    constructor(props){\r\n      super(props)\r\n      this.state= {\r\n        history: [this.props.text],\r\n        position: 0,\r\n        noteId: this.props.noteId\r\n      }\r\n      this.jspdfOpt = {\r\n        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },\r\n      }\r\n\r\n      this.jspdfOpt2 = {\r\n        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },\r\n        margin: [0.5, 0.3, 0.5, 0.3]\r\n      }\r\n\r\n      this.jspdfOpt3 = {\r\n        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },\r\n        margin: [0.5, 0.0, 0.5, 0.0],\r\n        pagebreak: { mode: 'avoid-all'}\r\n      }\r\n      this.ready = true\r\n    }\r\n\r\n    readyToType() {\r\n      if (this.ready) {\r\n        this.ready = false\r\n        setTimeout(() => { this.ready = true }, 1000)\r\n        return true\r\n      }\r\n      return false\r\n    }\r\n\r\n    extractSignature(text) {\r\n      return this.props.text.replace(/(<img src=\"(.*)\">)/gi, `<img id=\"signature\" src=\"\" />`)\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n\r\n      if (prevProps.text !== this.props.text) {\r\n        if(this.props.noteId != this.state.noteId){\r\n          this.setState({noteId: this.props.noteId, history: [this.props.text], position: 0})\r\n          return\r\n        }\r\n        if(this.props.undo === true) return; \r\n        if(this.state.history && this.props.text === this.state.history[this.state.position]) return\r\n        \r\n        if(!this.readyToType()) return \r\n        //console.log(\"Saving \" + this.props.text)\r\n        let history = this.state.history\r\n        \r\n        if(history.length > 15)\r\n          history[this.state.position-15] = null\r\n\r\n        if(history[this.state.position+1])\r\n        {\r\n          history[this.state.position+1] = this.props.text\r\n          this.setState({history: history, position: this.state.position+1})\r\n        }\r\n        else this.setState({history: this.state.history.concat([this.props.text]), position: this.state.position+1})\r\n      }\r\n    }\r\n\r\n    undo() {\r\n      let history = this.state.history\r\n      if(this.state.history[this.state.position-1] === null) return\r\n      if(this.state.position > 0) history.pop()\r\n      if(this.state.position > 0) this.setState({position: this.state.position - 1, history: history}) \r\n      if(this.state.position) this.props.textHandler(this.state.history[this.state.position-1])\r\n    }\r\n\r\n    combineNotes() {\r\n      this.props.saveNote()\r\n      this.props.combineAction()\r\n    }\r\n\r\n    combinePdf() {  \r\n        if(!this.props.richText) return\r\n        this.setState({isVisible: false})\r\n        let d = this.props.date\r\n        let order = \"\"\r\n        order = this.getOrderText().split(/(?:\\r\\n|\\r|\\n)/g).filter((item) => item != \"\")\r\n        let physicianName = this.props.appSettings.name? this.props.appSettings.name:'Steven Wesley';\r\n        let templateTime = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"][d.getMonth()] +\"-\" + d.getDate() + \"-\" + d.getFullYear();\r\n\r\n        (new html2pdf.Worker).from(\r\n            new TextTemplate().generateFromDict({\r\n                note: this.props.text.replace(/{{signature}}/gm, this.props.appSettings.signature)\r\n            })\r\n        ).set(this.jspdfOpt3).toPdf().get('pdf')\r\n        .then( (pdf) => {\r\n          this.pdfHeader(pdf)\r\n        })\r\n        .from(\r\n            new MedicalOrderSheetImageCombined().generateFromDict({\r\n                datetime: templateTime, \r\n                lastname: this.props.patient.split(/[, ]+/)[0], \r\n                firstname: this.props.patient.split(/[, ]+/)[1], \r\n                order0: order.slice(0,5).join(\"<br/>\"),\r\n                order1: order.slice(5,10).join(\"<br/>\"), \r\n                physicianName: physicianName,\r\n                physicianName1: order.slice(5,10).length > 0? physicianName: \"\",\r\n                signature: this.props.appSettings.signature,\r\n                signature1: order.slice(5,10).length > 0? this.props.appSettings.signature: \"\",\r\n                datetime1: order.slice(5,10).length > 0? templateTime: \"\",\r\n                backgroundimage: require(\"./Assets/MedicalOrderSheet-2.jpg\"),\r\n                logo: require(\"./Assets/ontario.jpg\")\r\n            })\r\n        ).toContainer().set(this.jspdfOpt3).toCanvas().toPdf().save();\r\n\r\n        this.setState({isVisible: false})\r\n    }\r\n\r\n    pdfHeader(pdf) {\r\n      console.log(pdf.internal)\r\n      var totalPages = pdf.internal.getNumberOfPages();\r\n\r\n      for (var i = 1; i <= totalPages; i++) {\r\n          pdf.setPage(i);\r\n          pdf.setFontSize(11);\r\n          pdf.setTextColor(0);\r\n          \r\n          pdf.text(\"Name: \" + this.props.patient, 0.2, 0.3);\r\n          pdf.text('DOB ________________ OTIS #: _______________________', 2.8, 0.3);\r\n          pdf.text(\"Date: \" + this.props.date.toLocaleDateString(), 7.2, 0.3);\r\n\r\n          pdf.text(' Page ' + i + ' of ' + totalPages, 4, pdf.internal.pageSize.getHeight()-0.3);\r\n      }         \r\n\r\n      pdf.addPage();\r\n    }\r\n\r\n    saveAsWord() {\r\n      if(this.props.richText){\r\n        var doc = document.createElement(\"div\");\r\n        doc.innerHTML = new TextTemplate().generateFromDict({\r\n          note: this.props.text.replace(/{{signature}}/gm, \"\")\r\n        })\r\n        this.export2Doc(doc, \"file\")\r\n      }\r\n    }\r\n\r\n    export2Doc(element, filename = ''){\r\n      var preHtml = \"<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML To Doc</title></head><body>\";\r\n      var postHtml = \"</body></html>\";\r\n      var html = preHtml+element.innerHTML+postHtml;\r\n  \r\n      var blob = new Blob(['\\ufeff', html], {\r\n          type: 'application/msword'\r\n      });\r\n      \r\n      // Specify link url\r\n      var url = 'data:application/vnd.ms-word;charset=utf-8,' + encodeURIComponent(html);\r\n      \r\n      // Specify file name\r\n      filename = filename?filename+'.doc':'document.doc';\r\n      \r\n      // Create download link element\r\n      var downloadLink = document.createElement(\"a\");\r\n  \r\n      document.body.appendChild(downloadLink);\r\n      \r\n      if(navigator.msSaveOrOpenBlob ){\r\n          navigator.msSaveOrOpenBlob(blob, filename);\r\n      }else{\r\n          // Create a link to the file\r\n          downloadLink.href = url;\r\n          \r\n          // Setting the file name\r\n          downloadLink.download = filename;\r\n          \r\n          //triggering the function\r\n          downloadLink.click();\r\n      }\r\n      \r\n      document.body.removeChild(downloadLink);\r\n  }\r\n\r\n    saveAsPdf() {\r\n        this.props.saveNote()\r\n        if(this.props.richText){\r\n            //let order = this.getOrderText().split(/(?:\\r\\n|\\r|\\n)/g).filter((item) => item != \"\")\r\n\r\n            (new html2pdf.Worker).from(new TextTeplate().generateFromDict({\r\n                note: this.props.text.replace(/{{signature}}/gm, this.props.appSettings.signature)\r\n            })).set(this.jspdfOpt2).toPdf().get('pdf').then((pdf) => {\r\n              this.pdfHeader(pdf)\r\n            }).save();\r\n        }\r\n        else {\r\n            var doc = new jsPDF('p', 'pt');\r\n        \r\n            doc.setFont('Helvetica Neue')\r\n            \r\n            doc.setFontType(\"bold\");\r\n            doc.setFontSize(12);\r\n            doc.text(20, 40, 'Patient Note')\r\n    \r\n            doc.setFontType('normal')\r\n            var splitText = doc.splitTextToSize(this.state.history[this.state.position], 500);\r\n            for (var i=0; i<splitText.length; i++){\r\n            doc.text(20, 60, splitText)\r\n            }\r\n            \r\n            \r\n            // Save the Data\r\n            doc.save('Note.pdf')\r\n        }\r\n\r\n\r\n        this.setState({isVisible: false})\r\n    }\r\n\r\n    saveOrderSheetPdf() {\r\n      let orderSheet = new MedicalOrderSheetImage()\r\n      this.setState({isVisible: false})\r\n      let d = this.props.date\r\n      let order = \"\"\r\n      order = this.getOrderText().split(/(?:\\r\\n|\\r|\\n)/g).filter((item) => item != \"\")\r\n      let physicianName = this.props.appSettings.name? this.props.appSettings.name:'Steven Wesley';\r\n      let templateTime = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"][d.getMonth()] +\"-\" + d.getDate() + \"-\" + d.getFullYear();\r\n\r\n      \r\n      html2pdf(orderSheet.generateFromDict({\r\n        datetime: templateTime, \r\n        lastname: this.props.patient.split(/[, ]+/)[0], \r\n        firstname: this.props.patient.split(/[, ]+/)[1], \r\n        order0: order.slice(0,5).join(\"<br/>\"),\r\n        order1: order.slice(5,10).join(\"<br/>\"), \r\n        physicianName: physicianName,\r\n        physicianName1: order.slice(5,10).length > 0? physicianName: \"\",\r\n        signature: this.props.appSettings.signature,\r\n        signature1: order.slice(5,10).length > 0? this.props.appSettings.signature: \"\",\r\n        datetime1: order.slice(5,10).length > 0? templateTime: \"\",\r\n        backgroundimage: require(\"./Assets/MedicalOrderSheet-1.jpg\"),\r\n        logo: require(\"./Assets/ontario.jpg\")}), this.jspdfOpt)\r\n    }\r\n\r\n    getOrderText() {\r\n        let text = \"\"\r\n        if(this.props.richText) {\r\n            text = this.props.text.replace(/<br\\s*[\\/]?>/gi, \"\\n\")\r\n            text = text.replace(/<p[^>]*>/g, '').replace(/<\\/p>/g, '\\n');\r\n            text = new TextUtility().stripHtmlTags(text) \r\n        }\r\n        else {\r\n            text = this.props.text\r\n        }\r\n\r\n        const regex = /^[P|p]lan[:]?([\\s\\S]*?)\\n\\n/smg;\r\n        let m = regex.exec(text);\r\n        if(m && m[1]) {\r\n            return m[1]\r\n        }\r\n        else\r\n            return \"\"\r\n    }\r\n\r\n    insertSignature() {\r\n      this.props.insertHandler('<img width=160 height=40 alt=\"signature\" src=\"{{signature}}\" />')\r\n    }\r\n\r\n    showPdfToolbar()\r\n    {\r\n      this.setState({isVisible: true})\r\n    }\r\n    \r\n    render(){\r\n      return (\r\n        <View style={{flex: 1, flexDirection: \"row\"}}>\r\n        { this.state.isVisible === true &&\r\n        <View>\r\n          <StyledButton title=\"Save Content as PDF\" onPress={() => this.saveAsPdf()}></StyledButton>\r\n          <StyledButton title=\"Create Medical Order Sheet PDF\" onPress={() => this.saveOrderSheetPdf()}></StyledButton>\r\n          <StyledButton title=\"Combine Notes and Medical Order Sheet PDF\" onPress={() => this.combinePdf()}></StyledButton>\r\n          <StyledButton title=\"Combined Multiple Notes PDF\" onPress={() => this.combineNotes()}></StyledButton>\r\n        </View>\r\n        }\r\n        <Icon\r\n          name='undo'\r\n          type='font-awesome'\r\n          color='#aaa'\r\n          onPress={() => this.undo()}\r\n          />\r\n        <Icon\r\n          name='picture-as-pdf'\r\n          color='#aaa'\r\n          onPress={() => this.showPdfToolbar()}\r\n          />\r\n        <Icon\r\n          name='note'\r\n          color='#aaa'\r\n          onPress={() => this.saveAsWord()}\r\n          />\r\n        <Icon\r\n            name='gesture'\r\n            color='#aaa'\r\n            onPress={() => this.insertSignature()}\r\n          />\r\n        </View>\r\n        \r\n      )\r\n    }\r\n  }\r\n\r\n","  import React from 'react';\r\nimport {Platform, StyleSheet,ImageBackground, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList, Keyboard, Alert } from 'react-native';\r\nimport { ListItem, Icon, Overlay, ButtonGroup, Button as StyledButton, SearchBar } from 'react-native-elements'\r\nimport styles from './Styles'\r\nimport {PatientService, MenuService} from './DomainService'\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport {TextUtility} from './Utilities'\r\n  \r\n  \r\nexport class TabComponent extends React.Component {\r\n    constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        data: [],\r\n        selectedIndex: -1,\r\n        buttons: []\r\n      }\r\n      this.refreshTabs()\r\n    }\r\n\r\n    refreshTabs(){\r\n      let patientService = new PatientService()\r\n      patientService.getLastOpenedNotes().then((notes) => {\r\n        this.setState({data: notes})\r\n        if(this.state.selectedIndex === -1) this.setState({selectedIndex: notes.findIndex((note) => { return note.id === this.props.currentNoteId})})\r\n        this.setState({buttons: notes.filter(item => { return item.text !== undefined}) })\r\n      })\r\n    }\r\n\r\n    tabPress(item)\r\n    {\r\n      this.props.noteHandler(item)\r\n      this.refreshTabs()\r\n    }\r\n\r\n    updateIndex (selectedIndex) {\r\n      this.tabPress(this.state.buttons[selectedIndex])\r\n      this.setState({selectedIndex: selectedIndex})\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n      if (this.props.currentNoteId === nextProps.currentNoteId && this.state.buttons.length) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    formatTab(text) {\r\n      let plainText = new TextUtility().stripHtmlTags(text)\r\n      return plainText.replace(/\\n/g, ' ').slice(0, 10) + \"...\"  \r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <View style={{flex: 1, flexDirection: 'row', borderRadius: 10, backgroundColor: \"#eee\"}}>\r\n          { Platform.OS === 'web'?\r\n            <ButtonGroup\r\n                style={{width:'100%'}}\r\n                onPress={(index) => this.updateIndex(index)}\r\n                selectedIndex={this.state.selectedIndex}\r\n                containerStyle={{flex:1}}\r\n                textStyle={{fontWeight: 'normal', fontSize: 14}}\r\n                buttons={this.state.buttons.map((item) => { return this.formatTab(item.text)})}\r\n              />\r\n            :\r\n            this.state.data.filter(item => {\r\n              return item.text !== undefined\r\n            }).map((item) => {\r\n                let txt = item.text.slice(0, 7) + \"..\"\r\n              return <Button title={txt.replace(/\\n/g, ' ') + \"...\"} key={item.id} onPress={() => {this.tabPress(item)}}/>    \r\n            })\r\n          }\r\n        </View>\r\n      )\r\n    }\r\n  }\r\n","import React from 'react';\r\nimport {Platform, StyleSheet,ImageBackground, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList, Keyboard, Alert } from 'react-native';\r\nimport { ListItem, Icon, Badge, Divider, Button as StyledButton, SearchBar } from 'react-native-elements'\r\nimport styles from './Styles'\r\nimport {PatientService, MenuService, SettingsService, TagService} from './DomainService'\r\nimport {Alerts, WebAlert} from './Alerts'\r\nimport {Note, Patient} from './Domain'\r\nimport { showMessage, hideMessage } from \"react-native-flash-message\";\r\nimport FlashMessage from \"react-native-flash-message\";\r\nimport { StackActions,NavigationActions } from 'react-navigation'\r\nimport { AsyncStorage } from \"react-native\"\r\nimport { SideMenu, SideMenuEmbedded } from './SideMenu';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport buildOptions from './BuildOptions'\r\nimport { ToolbarComponent } from './Toolbar'\r\nimport {TabComponent} from './Tab'\r\nimport {TextUtility} from './Utilities'\r\n\r\n\r\n  export class NoteDetailScreen extends React.Component {\r\n    constructor(props){\r\n      super(props)\r\n\r\n      console.log(\"props-------------------------\")\r\n      console.log(props.navigation.state.params)\r\n      console.log(\"------------------\")\r\n      \r\n      this.quillRef = null;\r\n      this.reactQuillRef = null;\r\n      const action = props.navigation.getParam(\"action\", \"\")\r\n      const type = props.navigation.getParam(\"type\", \"\")\r\n      var patientText = props.navigation.getParam(\"patientName\", \"\")\r\n      var noteText = props.navigation.getParam(\"text\", \"\")\r\n\r\n      var noteId = \"\"\r\n      if(action == \"new\" || action == \"duplicate\")\r\n        noteId = Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 10);\r\n      if(action == \"edit\")\r\n      {\r\n        noteId = props.navigation.getParam(\"noteId\", \"\")\r\n        let patientService = new PatientService();\r\n\r\n        patientService.getNote(noteId).then((note) =>{\r\n          patientService.setNoteOpenDate(note)\r\n        })\r\n      }\r\n\r\n      let drawer = Platform.OS === 'web'? true : false;\r\n\r\n      this.state = {\r\n        patientText: patientText,\r\n //       noteText : \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis laoreet ipsum id arcu tincidunt luctus. Mauris et lectus sit amet purus posuere pharetra. Duis vulputate rhoncus tortor, vel feugiat nisi tempus at. Pellentesque massa nunc, accumsan at tempor nec, placerat in diam. Nam ultrices molestie faucibus. Nunc ut metus eget erat interdum sodales. Sed diam urna, cursus mollis enim volutpat, commodo imperdiet ligula. Sed sed lobortis lacus. Proin vel leo nisl. Nulla tempor metus non orci imperdiet, et gravida turpis posuere. Cras porta dictum mauris ac egestas. Integer cursus metus id nunc bibendum, non volutpat diam finibus. Donec dapibus dictum ante, in viverra erat semper tempor. Aenean feugiat turpis sed diam convallis imperdiet. Aliquam pretium et tellus vestibulum viverra. Phasellus quis lacinia augue. Donec viverra nec enim sed placerat. Ut tempor interdum magna et varius. Phasellus ut quam eu massa sagittis facilisis. In turpis odio, tempus eget leo eget, volutpat varius massa. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque convallis tempor mi. \",\r\n        noteText : noteText,\r\n        noteInputFocus: false,\r\n        showSuggestion : false,\r\n        selection: {\r\n          start: 0,\r\n          end: 0\r\n        },\r\n        action: action,\r\n        type: type,\r\n        noteId: noteId,\r\n        pageDrawer: drawer,\r\n        keyBuffer: '',\r\n        keyBufferState: 'STOPPED',\r\n        editor: null,\r\n        history: [],\r\n        settings: {},\r\n        editorReady: false,\r\n      }\r\n\r\n      this.charKeyBuffer = {index: 0, chars: []};\r\n\r\n      this.editorModules = {\r\n        toolbar: {\r\n          container : \r\n          [\r\n            [{ 'font': [] }],\r\n            [{ 'size': ['small', false, 'large', 'huge'] }],\r\n            [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n            ['bold', 'italic', 'underline', 'strike'],\r\n            [{ 'header': 1 }, { 'header': 2 }],\r\n            [{ 'color': [] }, { 'background': [] }], \r\n            [{ 'align': [] }],\r\n            ['clean']  \r\n          ]\r\n        }\r\n      };\r\n\r\n\r\n      this.props.navigation.setParams({\r\n        addTextContent: (text) => this._addTextContent(text),\r\n        togglePageDrawer: () => this._togglePageDrawer()\r\n     });\r\n    }\r\n\r\n    handleSelectionChange = ({ nativeEvent: { selection } }) => this.setState({ selection })\r\n\r\n    htmlHandleSelectionChange(selection, editor){\r\n      if(!this.quillRef) return;\r\n      if(!selection) return;\r\n\r\n      //console.log(selection);\r\n      let newSelection = {\r\n        start: selection.index,\r\n        end: selection.length\r\n      }\r\n      this.setState({selection: newSelection, editor: editor})\r\n    }\r\n\r\n    static navigationOptions = ({ navigation }) => {\r\n      const {params} = navigation.state || {};\r\n      \r\n      return {\r\n        headerTitle: (\r\n          <View>\r\n            <Text>Patient Note</Text>  \r\n          </View>\r\n        )\r\n        ,\r\n        headerLeft:(\r\n          <View style={{flex: 1, flexDirection: 'row'}}>\r\n            <View style={{position: 'absolute', top: -50, left: 0, right: 0, bottom: 0, justifyContent: 'center', alignItems: 'center', width: Dimensions.get('window').width}}>\r\n              <FlashMessage position=\"top\" style={{justifyContent: 'center', alignItems: 'center', marginTop: 10}} />\r\n            </View>\r\n            <StyledButton   \r\n              icon={{\r\n                name: 'menu',\r\n                size: 15,\r\n                color: '#007AFF'\r\n              }}\r\n              buttonStyle={{\r\n                backgroundColor: \"transparent\",\r\n              }}\r\n              containerStyle={{marginRight: 20}}\r\n              type=\"clear\"\r\n              color= {\"#007AFF\"}\r\n              onPress={() => {(\r\n                Platform.OS !== 'web')? \r\n              navigation.toggleDrawer(): \r\n              navigation.state.routes[0].params.togglePageDrawer()}} \r\n              title=\"Menu\" />\r\n              \r\n\r\n            <StyledButton   \r\n              buttonStyle={{\r\n                backgroundColor: \"transparent\",\r\n              }}\r\n              containerStyle={{marginRight: 20}}\r\n              type=\"clear\"\r\n              color= {\"#007AFF\"}\r\n              onPress={() => {\r\n                navigation.state.routes[0].params.saveContentAsk()\r\n                console.log(navigation); \r\n                //navigation.push('Home')\r\n                console.log(navigation.reset)\r\n\r\n                const resetAction = StackActions.reset({\r\n                  index: 0,\r\n                  actions: [NavigationActions.navigate({ routeName: 'Home' })],\r\n                });\r\n                navigation.dispatch(resetAction);\r\n\r\n                }} title=\"Home\" />\r\n\r\n\r\n            <StyledButton   \r\n              buttonStyle={{\r\n                backgroundColor: \"transparent\",\r\n              }}\r\n              type=\"clear\"\r\n              color= {\"#007AFF\"}\r\n              onPress={() => {navigation.goBack()}} title=\"Back\" />\r\n\r\n          </View>\r\n        ),\r\n        headerRight: (\r\n          <View style={{flex: 1, flexDirection: 'row'}}>\r\n            <Button onPress={()=>{navigation.state.routes[0].params.saveContent()}} title=\"Save\" />\r\n          </View>\r\n        ),\r\n      };\r\n    };\r\n\r\n    _togglePageDrawer() {\r\n      this.setState({pageDrawer: !this.state.pageDrawer})\r\n    }\r\n\r\n    _addRichTextContent(data) {\r\n      this.quillRef.clipboard.dangerouslyPasteHTML(this.state.selection.start, data)\r\n\r\n      setTimeout(() => {\r\n        let item = document.querySelectorAll('[alt=\"signature\"]')[0];\r\n        if(item){\r\n          item.className=\"signature\"\r\n        }\r\n      }, 100)\r\n\r\n    }\r\n\r\n    _addTextContent(text, richText=false)\r\n    {\r\n      let result = \"\"\r\n      if(this.state.keyBufferState === 'STARTED'){\r\n        if(this.quillRef) {\r\n          this.quillRef.insertText(this.state.selection.start, text)\r\n          this.quillRef.deleteText(this.state.selection.start-this.state.keyBuffer.length-1,this.state.keyBuffer.length+1)\r\n          this.setState({keyBufferState: 'STOPPED', keyBuffer: ''});\r\n        }\r\n        else\r\n        {\r\n          result = this.state.noteText.slice(0, this.state.selection.start-this.state.keyBuffer.length-1) \r\n          + text \r\n          + this.state.noteText.slice(this.state.selection.start, this.state.noteText.length)\r\n          this.setState({keyBufferState: 'STOPPED', keyBuffer: ''});\r\n          this.setState({'noteText': result})\r\n        }\r\n      }\r\n      else if(this.quillRef) {\r\n        this.quillRef.insertText(this.state.selection.start, \" \" + text)\r\n        console.log(\"Inserting from quill \" + text)\r\n      }\r\n      else{        \r\n        result =  this.state.noteText.slice(0, this.state.selection.start) \r\n        + text + \" \"\r\n        + this.state.noteText.slice(this.state.selection.start, this.state.noteText.length)\r\n        let selection = this.state.selection\r\n        selection.start += text.length+1\r\n        this.setState({selected: selection})\r\n        this.setState({'noteText': result})\r\n      }\r\n      \r\n    }\r\n\r\n    componentDidMount () {\r\n      if(Platform.OS === 'web' && buildOptions.quill === true) this.attachQuillRefs();\r\n\r\n      this.keyboardDidShowListener = Keyboard.addListener('keyboardWillShow', () => this._keyboardDidShow());\r\n      this.keyboardDidHideListener = Keyboard.addListener('keyboardWillHide', () => this._keyboardDidHide());\r\n      //this.props.navigation.toggleDrawer()\r\n      this.props.navigation.setParams({ saveContent: () => this.saveNote(), saveContentAsk: () => this.saveNoteAsk()});\r\n      this.getSettings(this.props.navigation.getParam(\"text\", \"\"))\r\n    }\r\n\r\n    getSettings(txt) {\r\n      this.settingsService = new SettingsService()\r\n      this.settingsService.getSettings().then((settings) => {\r\n        console.log(\"--------------------------------------------------kdkd\")\r\n        this.setState({settings: settings})\r\n        if(settings.richTextEnabled == undefined) {\r\n          buildOptions.quill = true\r\n\r\n          let noteText =  txt.replace(/(\\r\\n|\\n|\\r)/gm,\"<br/>\")\r\n          this.setState({\"noteText\": noteText, editorReady: true})\r\n        }\r\n        if(settings.richTextEnabled !== undefined) {\r\n          buildOptions.quill = settings.richTextEnabled\r\n  \r\n          if(buildOptions.quill) {\r\n            let noteText =  txt.replace(/(\\r\\n|\\n|\\r)/gm,\"<br/>\")\r\n            this.setState({\"noteText\": noteText, editorReady: true})\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    componentWillUnmount () {\r\n      this.keyboardDidShowListener.remove();\r\n      this.keyboardDidHideListener.remove();\r\n    }\r\n  \r\n    _keyboardDidShow () {\r\n      this.setState({showSuggestion: true})\r\n    }\r\n  \r\n    _keyboardDidHide () {\r\n      this.setState({showSuggestion: false})\r\n    }\r\n\r\n    processText(noteText){\r\n      this.setState({noteText})\r\n    }\r\n\r\n    attachQuillRefs() {\r\n      // Ensure React-Quill reference is available:\r\n      if(!this.reactQuillRef) return;\r\n      if (typeof this.reactQuillRef.getEditor !== 'function') return;\r\n      // Skip if Quill reference is defined:\r\n      if (this.quillRef != null) return;\r\n      \r\n      const quillRef = this.reactQuillRef.getEditor();\r\n      \r\n      if (quillRef != null) this.quillRef = quillRef;\r\n      this.createSignatureStyle()\r\n    }\r\n\r\n    createSignatureStyle() {\r\n      var style = document.createElement('style');\r\n      style.type = 'text/css';\r\n      style.innerHTML = '.signature {background-image: url(' + this.state.settings.signature + '); width: 160px; height: 40px}';\r\n      document.getElementsByTagName('head')[0].appendChild(style);\r\n    }\r\n\r\n    handleKeyPress = (event) => {\r\n      //console.log(event.key + \"|\" + this.state.keyBufferState + \"|\" + this.state.keyBuffer)\r\n      this.charKeyBuffer.chars[0] = this.charKeyBuffer.chars[1]\r\n      this.charKeyBuffer.chars[1] = this.charKeyBuffer.chars[2]\r\n      this.charKeyBuffer.chars[2] = event.keyCode\r\n      \r\n      if(event.key === 'Escape' && this.state.keyBufferState === 'STARTED'){\r\n        this.setState({keyBufferState: 'STOPPED', keyBuffer: ''});\r\n        this.charKeyBuffer[2] = this.charKeyBuffer[1] = this.charKeyBuffer[0] = 0\r\n      }\r\n      else if(event.key === '.'  && this.state.keyBufferState === 'STOPPED'){\r\n        this.setState({keyBufferState: 'STARTED', keyBuffer: ''});\r\n      }\r\n      else if((event.key === ' ' || event.key === 'Enter' || event.key === 'Tab') && this.state.keyBufferState === 'STARTED') {\r\n        this.setState({keyBufferState: 'STOPPED', keyBuffer: ''});\r\n      }\r\n      else if(event.key === 'Backspace' && this.state.keyBufferState === 'STARTED') {\r\n        this.setState({keyBuffer: this.state.keyBuffer.substring(0, this.state.keyBuffer.length - 1)})\r\n        if(this.state.keyBuffer.length - 1 == 0)\r\n          this.setState({keyBufferState: 'STOPPED'})\r\n      }\r\n      else if(this.state.keyBufferState === 'STOPPED' && \r\n      ((this.charKeyBuffer.chars[0] === 190 && String.fromCharCode(this.charKeyBuffer.chars[1]) === \" \") || \r\n      (this.charKeyBuffer.chars[1] === 13 && this.charKeyBuffer.chars[2] >= 65 && this.charKeyBuffer.chars[2] <= 90)))\r\n      {\r\n        let c = String.fromCharCode(this.charKeyBuffer.chars[2]).toUpperCase()\r\n        event.preventDefault();\r\n        const that = this\r\n        that.quillRef.setSelection(that.state.selection.start,'silent');\r\n        that.quillRef.insertText(that.state.selection.start, c)\r\n      }\r\n      else if(this.state.keyBufferState === 'STARTED') {\r\n        this.setState({keyBuffer: this.state.keyBuffer + event.key})\r\n        //.log(\"Sending characters: \" + this.state.keyBuffer + event.key)\r\n      }\r\n\r\n      \r\n    }\r\n\r\n    async saveNoteAsk() {\r\n      if(this.charKeyBuffer.chars[2]) {\r\n        await this.saveNote()\r\n      }\r\n    }\r\n\r\n    saveNote()\r\n    {\r\n      try{\r\n        let patientService = new PatientService();\r\n        let patient = new Patient();\r\n        let note = new Note();\r\n\r\n        note.setId(this.state.noteId)\r\n        note.setType(this.state.type)\r\n        note.setText(this.state.noteText)\r\n        patient.setPatientName(this.state.patientText);\r\n\r\n        console.log(note)\r\n        console.log(patient)\r\n\r\n        patientService.savePatientNote(patient, note)\r\n\r\n        showMessage({\r\n          message: \"Note Saved\",\r\n          type: \"info\",\r\n          style: {paddingTop: 100},\r\n        });\r\n      }\r\n      catch(e){\r\n        console.log(e)\r\n        if(e == 'PatientNameEmpty') {\r\n          showMessage({\r\n            message: \"Cannot save note - patient name is empty\",\r\n            type: \"danger\",\r\n            style: {paddingTop: 100},\r\n          });\r\n        }\r\n    }\r\n\r\n    }\r\n\r\n    openNote = (note) =>\r\n    {\r\n      console.log(note)\r\n      let patientService = new PatientService();\r\n\r\n      patientService.getNote(note.id).then((innerNote) =>{\r\n        patientService.setNoteOpenDate(note)\r\n\r\n        \r\n        patientService.getPatientById(innerNote[0].patient).then((p) => {\r\n          this.setState({\"action\": \"edit\"})\r\n          this.setState({\"type\": note.type})\r\n          this.setState({\"noteId\": note.id})\r\n          this.setState({\"noteText\": note.text})\r\n          this.setState({patientText: p[0].name})\r\n\r\n\r\n          \r\n        })\r\n      })\r\n        \r\n\r\n      \r\n      \r\n    }\r\n\r\n    navigateToCombineNote() {\r\n      this.props.navigation.navigate('CombineNotesDetail', {patientText: this.state.patientText})\r\n    }\r\n    \r\n\r\n    render() {\r\n      return (\r\n        <View style={{flex:1, flexDirection: 'column'}}>\r\n          <View style={{flex:2, flexDirection: 'row'}}>\r\n            {\r\n              this.state.pageDrawer?\r\n              <View style={{flex:2}}>\r\n                <SideMenuEmbedded navigation={this.props.navigation}></SideMenuEmbedded>\r\n              </View>\r\n              :\r\n              <View style={{flex:0}}>\r\n\r\n              </View>\r\n            }\r\n\r\n            <View style={{flex:4, flexDirection: 'column'}}>\r\n              <StatusBar barStyle=\"light-content\" />\r\n              <ScrollView>\r\n                <View style={{flex:1, flexDirection: \"row\"}}>\r\n                  <TabComponent currentNoteId={this.state.noteId} noteHandler={this.openNote}/>\r\n                </View>\r\n                <TextInput\r\n                  style={styles.patientText}\r\n                  onChangeText={(patientText) => this.setState({patientText})}\r\n                  value={this.state.patientText}\r\n                  onFocus={() => this.setState({noteInputFocus: false})}\r\n                  placeholder=\"Patient Name\"\r\n                  editable={this.state.action != 'edit'}\r\n                />\r\n                <View style={{justifyContent: \"left\", alignSelf: 'flex-start', marginLeft: 20}}>\r\n                  <ToolbarComponent \r\n                    quill={this.quillRef} \r\n                    appSettings={this.state.settings}\r\n                    saveNote={() => this.saveNote()} \r\n                    richText={buildOptions.quill} \r\n                    date={new Date()} \r\n                    patient={this.state.patientText} \r\n                    noteId={this.state.noteId} \r\n                    text={this.state.noteText} \r\n                    textHandler={(text) => this.processText(text)} \r\n                    insertHandler={(data) => this._addRichTextContent(data)}\r\n                    combineAction={() => this.navigateToCombineNote()}\r\n                    >                      \r\n                  </ToolbarComponent>\r\n                </View>\r\n                {\r\n                  Platform.OS === 'web' && buildOptions.quill === true && this.state.editorReady?\r\n                  <View style={styles.noteTextWeb}>\r\n                    <ReactQuill theme=\"snow\" \r\n                      value={this.state.noteText} \r\n                      onChange={(noteText) => this.processText(noteText)}\r\n                      onKeyDown={this.handleKeyPress}\r\n                      onFocus={() => this.setState({noteInputFocus: true})}\r\n                      onChangeSelection={(range, source, editor) => this.htmlHandleSelectionChange(range, editor)}\r\n                      ref={(el) => { this.reactQuillRef = el; this.attachQuillRefs(); }}\r\n                      placeholder=\"Note Text\"\r\n                      modules={this.editorModules}\r\n                      />\r\n                    </View>\r\n                    /*                  \r\n                    <div \r\n                    onChange={(noteText) => this.processText(noteText)}\r\n                    onInput= {(test) => console.log(\"input\" + test)}\r\n                    onKeyDown={this.handleKeyPress}\r\n                    onSelectionChange={this.handleSelectionChange} \r\n                    onFocus={() => this.setState({noteInputFocus: true})}\r\n                    placeholder=\"Note Text\"\r\n                    ref=\"noteText\"\r\n                    class=\"editor\" \r\n                      contenteditable=\"true\"> {this.state.noteText}\r\n                    </div>  */                \r\n                  :\r\n                  <TextInput\r\n                  onChangeText={(noteText) => this.processText(noteText)}\r\n                  onKeyPress={this.handleKeyPress}\r\n                  value={this.state.noteText}\r\n                  onSelectionChange={this.handleSelectionChange} \r\n                  onFocus={() => this.setState({noteInputFocus: true})}\r\n                  style={styles.noteText}\r\n                  multiline={true}\r\n                  placeholder=\"Note Text\"\r\n                  ref=\"noteText\"\r\n                />\r\n                }        \r\n\r\n\r\n                </ScrollView>                \r\n              </View>\r\n            </View>\r\n          <View>\r\n          {Platform.OS === 'web'? <WebSuggestionComponent  suggestionText={this.state.keyBuffer} next={()=> {return buildOptions.quill? this.reactQuillRef : this.refs.noteText}} handler={(text) => this._addTextContent(text)} /> : null }         \r\n          </View>\r\n          {Platform.OS !== 'web'?\r\n          <KeyboardAvoidingView\r\n                      behavior='padding'\r\n                      style={{ backgroundColor: '#eeeeee' }}\r\n                >\r\n                  { this.state.showSuggestion && this.state.noteInputFocus ? <SuggestionComponent  next={()=> {return this.refs.noteText}} handler={(text) => this._addTextContent(text)} /> : null }                \r\n                </KeyboardAvoidingView>\r\n                :\r\n                null\r\n            }\r\n        </View>\r\n      );\r\n    }  \r\n  }\r\n\r\n\r\n  class SuggestionComponent extends React.Component {    \r\n    constructor(props){\r\n      super(props)\r\n      \r\n      this.p = new PatientService()\r\n      this.m = new MenuService()\r\n      \r\n      this.state = {\r\n        patientText: \"Patient Name\",\r\n        suggestionText: \"\",\r\n        data: [],\r\n        searchMode: false\r\n      }\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n      if (this.props.suggestionText !== prevProps.suggestionText) {\r\n        this.searchText(this.props.suggestionText)\r\n        this.setState({suggestionText: this.props.suggestionText});\r\n      } \r\n    }\r\n\r\n    searchText(suggestionText){\r\n      this.setState({suggestionText})\r\n\r\n      if(suggestionText.startsWith(\".\")){\r\n        this.m.searchPhrasesByShortcut(suggestionText.substring(1)).then((val) => {\r\n          let data = val.map(val2 => {\r\n            return {\"key\": Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 25), \"val\": {'text': val2.slice(0,200)}}\r\n          }).slice(0,5)\r\n          this.setState({data: data})       \r\n        })\r\n      }\r\n      else{\r\n        this.p.getNotesByPhrase(suggestionText).then((val) => {\r\n          let data = val.map(val2 => {\r\n            return {\"key\": Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 25), \"val\": {'text': val2.slice(0,200)}}\r\n          }).slice(0,5)\r\n          this.setState({data: data})\r\n        })\r\n  \r\n        this.m.searchPhrases(suggestionText).then((val) => {\r\n          let data = val.map(val2 => {\r\n            return {\"key\": Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 25), \"val\": {'text': val2.slice(0,200)}}\r\n          }).slice(0,5)\r\n          this.setState({data: this.state.data.concat(data)})       \r\n        })\r\n      }\r\n\r\n    }\r\n\r\n    toggleSearchmode(){\r\n      if(!this.state.searchMode)\r\n        this.refs.inputSuggestion.focus()\r\n      else{\r\n        console.log(this.props)\r\n        this.props.next().focus()\r\n      }\r\n      this.setState({searchMode: !this.state.searchMode})\r\n    }\r\n    \r\n    listItemPress(text){\r\n      console.log(\"inserting\" + text)\r\n      this.props.handler(text)\r\n      this.setState({suggestionText: '', searchMode: false})\r\n    }\r\n\r\n    render(){\r\n      return (<View style={{marginBottom: 70}}>\r\n        { \r\n          this.state[\"data\"].map(item => {\r\n            return <Button key={item.key} title={item.val.text} onPress={() => {this.listItemPress(item.val.text)}}/>\r\n          })\r\n        }\r\n\r\n        <Button title=\"Search Mode\" onPress={()=> {this.toggleSearchmode()}}/>\r\n        <ScrollView  keyboardShouldPersistTaps={'always'}>\r\n        <TextInput\r\n          onChangeText={(suggestionText) => this.searchText(suggestionText)}\r\n          blurOnSubmit={false} \r\n          onBlur={() => this.props.next().focus()}\r\n          value={this.state.suggestionText}\r\n          ref=\"inputSuggestion\"\r\n        >\r\n        </TextInput>\r\n        </ScrollView>\r\n      </View>)\r\n    }\r\n  }\r\n\r\n  class WebSuggestionComponent extends SuggestionComponent {\r\n    constructor(props){\r\n      super(props)\r\n    }\r\n\r\n    focus(){\r\n      this.props.next().focus()\r\n      this.searchText('')\r\n    }\r\n\r\n    handleKeyPress(event){\r\n\r\n    }\r\n\r\n    render(){\r\n      return (<View style={{marginBottom: 10, marginLeft: 20, marginRight: 20}}>\r\n        { \r\n          this.state[\"data\"].map(item => {\r\n            return <Button key={item.key} title={item.val.text} onPress={() => {this.listItemPress(item.val.text)}}/>\r\n          })\r\n        }\r\n\r\n        <ScrollView>\r\n          <TextInput\r\n            onChangeText={(suggestionText) => this.searchText(suggestionText)}\r\n            onKeyPress={this.handleKeyPress}\r\n            blurOnSubmit={false} \r\n            onBlur={() => this.focus()}\r\n            value={this.state.suggestionText}\r\n            ref=\"inputSuggestion\"\r\n            placeholder=\"Enter text for suggestions\"\r\n            style={{fontSize:16, borderWidth: 1, borderColor: '#eeeeee'}}\r\n          >\r\n          </TextInput>\r\n        </ScrollView>\r\n      </View>)\r\n    }\r\n\r\n  }\r\n\r\n\r\nexport class PatientsScreen extends React.Component {\r\n    constructor(props){\r\n      super(props)\r\n      let patientService = new PatientService();\r\n      this.state = {\r\n        'data': [],\r\n        'filteredData': [],\r\n        'searchTerm': \"\",\r\n        'drawerVisible': false,\r\n        'editName': \"\",\r\n        'editKey': null,\r\n        'patientTags': [],\r\n        'initialFocus': false,\r\n        'allTags': [],\r\n        'currentTagFilter': {}\r\n      }\r\n      patientService.getAllPatients().then((patients) => {\r\n        let ps = JSON.parse(patients)\r\n\r\n        if(patients && ps)\r\n        {\r\n          let data = ps.map((value, index, array) => {return {\"key\": String(value.id), \"val\": {'name': String(value.name)}}})\r\n          if(data)\r\n            this.setState({'data': data, filteredData: data})\r\n        }\r\n      });\r\n\r\n      new TagService().getAllPatientTags().then((tags) => {\r\n        this.setState({allTags: tags})\r\n      })\r\n      \r\n\r\n    }\r\n\r\n    filterData(term)\r\n    {\r\n      let newData = []\r\n      let exp = new RegExp(term, 'i')\r\n      if(term === \"\")\r\n        newData = this.state.data;\r\n      else\r\n        newData = this.state.data.filter((item) => item.val.name.search(exp) >= 0)\r\n\r\n      this.setState({searchTerm: term, filteredData: newData})\r\n    }\r\n\r\n    filterDataByIds(ids)\r\n    {\r\n      let newData = this.state.data.filter((item) => ids[item.key] !== undefined)\r\n      this.setState({filteredData: newData})\r\n    }\r\n\r\n    getPatientActions(key) {\r\n      this.setState({drawerVisible: true})\r\n      let patient = this.state.data.filter((item) => item.key === key)\r\n      if(patient.length) {\r\n        this.setState({\"editName\": patient[0].val.name, \"editKey\": key})\r\n        new TagService().getTagsByPatientAndType({type: \"patient\", entity: parseInt(key)}).then((tags) => {\r\n          this.setState({patientTags: tags})\r\n        })\r\n      }\r\n        \r\n    }\r\n\r\n    savePatientName(text) {\r\n      this.setState({editName: text})\r\n      new PatientService().savePatient({id: parseInt(this.state.editKey), name: text})\r\n    }\r\n    \r\n    savePatientTag() {\r\n      new TagService().createTag({id: this.state.editTag, type: \"patient\", entity: parseInt(this.state.editKey), text: this.state.editTag}).then((tags) => {\r\n        this.setState({patientTags: tags, editTag: \"\"})\r\n      })\r\n    }\r\n\r\n    removePatientTag(tag) {\r\n      new TagService().deleteTag(tag).then((tags) => this.setState({patientTags: tags}))\r\n    }\r\n\r\n    componentDidUpdate() {\r\n      if(!this.state.initialFocus){\r\n        this.searchRef && this.searchRef.focus()\r\n        this.setState({initialFocus: true})\r\n      }\r\n\r\n    }\r\n\r\n    filterTag(tag) {\r\n      let filteredTags = this.state.currentTagFilter\r\n\r\n      if(filteredTags && filteredTags[tag.id]){\r\n        //remove existing tag\r\n        delete filteredTags[tag.id]\r\n        //reset search\r\n        this.setState({filteredData: this.state.data})\r\n      }\r\n      else {\r\n        filteredTags = []\r\n        filteredTags[tag.id] = tag;\r\n        \r\n        new TagService().getTagsByIdAndType({id: tag.id, type: 'patient'}).then((tags) =>{\r\n          let ids = {}\r\n          tags.forEach((tag) => ids[tag.entity] = tag)\r\n          this.filterDataByIds(ids)\r\n        })\r\n      }\r\n\r\n      this.setState({currentTagFilter: filteredTags})\r\n\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <View  style={styles.container}>\r\n          <StatusBar barStyle=\"light-content\" />\r\n          <SearchBar\r\n            placeholder=\"Type Here...\"\r\n            onChangeText={(term) => this.filterData(term)}\r\n            value={this.state.searchTerm}\r\n            ref={(ref) => { this.searchRef = ref }}\r\n          />\r\n          <View style={{backgroundColor: \"#333\", padding: 10}}>\r\n            <View style={{flexDirection: \"row\",alignItems:'flex-start', flexWrap: 'wrap'}}>\r\n            {\r\n                this.state.allTags.map((tag) => {\r\n                  return <Badge \r\n                  onPress={() => this.filterTag(tag)} \r\n                  textStyle={{fontSize: 16}} \r\n                  size=\"large\"\r\n                  containerStyle={{padding: 2}}\r\n                  rounded\r\n                  badgeStyle={{ border: 0, backgroundColor: this.state.currentTagFilter[tag.id]? 'red':'#888', padding: 15}} \r\n                  value= {\r\n                          tag.text \r\n                    } \r\n                  />\r\n                })\r\n                }\r\n            </View>\r\n          </View>\r\n          {this.state.data.length === 0 && \r\n          <View style={{flex:1, flexDirection: \"column\", padding: 20}}>\r\n            <Icon\r\n              name='star'\r\n              type='font-awesome'\r\n              color='#aaa'\r\n              />            \r\n            <Text style={{color: \"#aaa\", fontSize: 50, textAlign: \"center\"}}>Create your first note to see patients!</Text>\r\n          </View>}\r\n          \r\n          <View style={{flex:1, flexDirection: 'row'}}>\r\n          <ScrollView style={{flex:2}}>\r\n          <FlatList\r\n              data={this.state.filteredData}\r\n              renderItem={({item}) => \r\n              <ListItem\r\n                key={item.key}\r\n                style={{borderBottomColor: \"#eee\", borderBottomWidth: 1}}\r\n                title={\r\n                  <View style={{flex: 1}}>\r\n                    <View style={{flex:1, flexDirection: 'row', marginLeft: 10}}>\r\n                      <Text style={styles.ratingText} style={{padding: 2, fontSize: 20}}>{item.val.name}</Text>\r\n                      { Platform.OS === 'web'&& \r\n                        <Icon\r\n                        name='edit'\r\n                        type='font-awesome'\r\n                        color='#aaa'\r\n                        onPress={() => {this.getPatientActions(item.key)}}\r\n                      />\r\n                    }\r\n                    </View>\r\n                  </View>\r\n                }\r\n\r\n                leftIcon={{name: 'account-circle'}}\r\n                onPress={() => {this.props.navigation.navigate('PatientDetail', {\"key\": item.key, \"name\": item.val.name})}}\r\n            />\r\n            }\r\n            />\r\n          </ScrollView>\r\n          { this.state.drawerVisible &&\r\n          <View style={{backgroundColor: '#eeeeee', flex:1, padding: 20}}>\r\n            <TextInput onChangeText={(text) => this.savePatientName(text)} value={this.state.editName} style={{fontSize:20, borderWidth: 1, borderColor: '#eeeeee', marginBottom: 10, borderBottomColor: '#444'}}></TextInput>\r\n            <Divider style={{ backgroundColor: '#eee', marginBottom: 20 }} />\r\n            <View style={{flexDirection: \"row\",alignItems:'flex-start', flexWrap: 'wrap'}}>\r\n              {\r\n              this.state.patientTags.map((tag) => {\r\n                return <Badge \r\n                badgeStyle={{ padding:15,backgroundColor: '#333' }}\r\n                status=\"primary\" value= {\r\n                  <View style={{flex: 1, flexDirection: 'row', marginTop: -10}}>\r\n                        <Text style={{fontSize:16, color: \"white\"}}>{tag.text}</Text>\r\n                        <Icon\r\n                        name='remove'\r\n                        type='font-awesome'\r\n                        color='#aaa'\r\n                        onPress={() => {this.removePatientTag(tag)}} \r\n                      />\r\n                  </View>    \r\n                  } \r\n                />\r\n              })\r\n              }\r\n              <TextInput style={{borderWidth: 1, borderBottomColor: '#444'}}placeholder=\"Enter Tag\" value={this.state.editTag} onChangeText={(text) => this.setState({editTag: text})}></TextInput>\r\n              <Icon\r\n                    name='plus'\r\n                    type='font-awesome'\r\n                    color='#aaa'\r\n                    onPress={() => {this.savePatientTag()}}\r\n                  />                            \r\n              \r\n            </View>\r\n          </View>\r\n          }\r\n          </View>\r\n        </View>\r\n      );\r\n    }  \r\n  }\r\n  \r\n  export class PatientDetailScreen extends React.Component {\r\n    constructor(props){\r\n      super(props)\r\n      this.state = {\r\n        'data': [],\r\n        'noteCategoriesVisible': false,\r\n        'patientName': ''\r\n      }\r\n      console.log(this.props.navigation.getParam(\"key\", -1))\r\n      //todo: need to add async then calls\r\n      this.refreshNotes()\r\n    }\r\n\r\n    refreshNotes() {\r\n      let patientService = new PatientService();\r\n      let key= parseInt(this.props.navigation.getParam(\"key\", -1));\r\n      let name = this.props.navigation.getParam(\"name\", \"\")\r\n\r\n      patientService.getPatientNotesById(key).then((r,e) =>{\r\n        let notes = r\r\n        if(r){\r\n          notes = notes.map((value, index, array) => {\r\n            let d = new Date(0).toString();\r\n            if(value.updateDate !== undefined)\r\n              d = new Date(value.updateDate).toString();\r\n\r\n            return {\"key\": String(index), \"val\": {'title': String(new TextUtility().stripHtmlTags(value.text)), description:value.text, 'patient': value.patient, 'type': value.type, \"id\": value.id, \"patientName\": name, \"date\": d}}\r\n          })\r\n          this.setState({'data': notes})\r\n        }\r\n        \r\n      })\r\n    }\r\n\r\n    setNoteCategoriesVisible(state) {\r\n      this.setState({noteCategoriesVisible: state});\r\n    }\r\n\r\n    deleteNote(note)\r\n    {\r\n      let patientService = new PatientService();\r\n      patientService.deletePatientNote(note.id);\r\n      this.refreshNotes();\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <View  style={styles.container}>\r\n          <StatusBar barStyle=\"light-content\" />\r\n          <ScrollView style={{flex:1}}>\r\n\r\n          <FlatList\r\n              data={this.state.data}\r\n              renderItem={({item}) => \r\n              <ListItem\r\n                style={{backgroundColor: '#ffffff', borderBottomColor: \"#eee\", borderBottomWidth: 1}}\r\n                key={item.key}\r\n                title={item.val.title.split(\"\\n\").slice(0,3).join(\"\\n\")}\r\n                subtitle={\r\n                  <View style={{flex: 1}}>\r\n                    <View style={{flex:1, flexDirection: 'row', marginLeft: 10}}>\r\n                      <Text style={styles.ratingText} style={{padding: 2, fontSize: 10}}>{item.val.type}</Text>\r\n                      <Text style={styles.ratingText} style={{padding: 2, fontSize: 10}}>{item.val.date}</Text>\r\n                    </View>\r\n                    <View style={{justifyContent: 'left', paddingTop: 3, flexDirection: 'row'}}>\r\n                    { Platform.OS === 'web'&& <StyledButton containerStyle={{marginRight: 5}} type=\"outline\" leftIcon={{name: 'content-copy'}} small style={{alignSelf:'flex-start'}} title=\"Duplicate\"\r\n                      onPress={() => {this.props.navigation.navigate('NoteDetail', {\"action\": \"duplicate\", \"type\": item.val.type, \"patient\": item.val.patient, \"noteId\": item.val.id, \"text\": item.val.description, \"patientName\": item.val.patientName})}}\r\n                      />}\r\n                    { Platform.OS === 'web'&& <StyledButton containerStyle={{marginRight: 5}} type=\"outline\" leftIcon={{name: 'edit'}} small style={{alignSelf:'flex-start'}} title=\"Edit Note\"\r\n                      onPress={() => {this.props.navigation.navigate('NoteDetail', {\"action\": \"edit\", \"type\": item.val.type, \"patient\": item.val.patient, \"noteId\": item.val.id, \"text\": item.val.description, \"patientName\": item.val.patientName})}}\r\n                      />}\r\n                    { Platform.OS === 'web'&& <StyledButton containerStyle={{marginRight: 5}} type=\"outline\" titleStyle={{color: 'red'}} leftIcon={{name: 'content-copy'}} small style={{alignSelf:'flex-start'}} backgroundColor=\"red\" title=\"Delete\"\r\n                      onPress={() => { this.deleteNote(item.val)}}\r\n                      />}\r\n                    { Platform.OS !== 'web'&& <Button title=\"Duplicate\"\r\n                      onPress={() => {this.props.navigation.navigate('NoteDetail', {\"action\": \"duplicate\", \"type\": item.val.type, \"patient\": item.val.patient, \"noteId\": item.val.id, \"text\": item.val.description, \"patientName\": item.val.patientName})}}\r\n                      />}\r\n                    </View>\r\n                  </View>\r\n                }\r\n                \r\n                onPress={() => {this.props.navigation.navigate('NoteDetail', {\"action\": \"edit\", \"type\": item.val.type, \"patient\": item.val.patient, \"noteId\": item.val.id, \"text\": item.val.description, \"patientName\": item.val.patientName})}}\r\n              />\r\n              }\r\n            />\r\n          <View style={{justifyContent:'center', flex: 1,  alignItems: 'center', marginTop: 10}}>\r\n          {    \r\n            Platform.OS !== 'web'? \r\n            <StyledButton\r\n                    icon={{name:'note-add', color:'#ffffff'}}\r\n                    backgroundColor='#03A9F4'\r\n                    buttonStyle={{borderRadius: 10, marginLeft: 0, marginRight: 0, marginBottom: 10, width: 400}}\r\n                    title=\"Create a New Note For This Patient\"\r\n                    onPress={() => new Alerts().noteAlert(this.props.navigation, this.props.navigation.getParam(\"name\", \"\"))} \r\n                  />\r\n            :\r\n            <StyledButton\r\n                  icon={{name:'note-add', color:'#ffffff'}}\r\n                  backgroundColor='#03A9F4'\r\n                  buttonStyle={{borderRadius: 10, marginLeft: 0, marginRight: 0, marginBottom: 10, width: 400}}\r\n                  title=\"Create a New Note For This Patient\"\r\n                  onPress={() => this.setState({noteCategoriesVisible: true})} \r\n                />\r\n            }\r\n            <WebAlert navigation={this.props.navigation} visible={this.state.noteCategoriesVisible} callback={(state) => this.setNoteCategoriesVisible(state)} patientName={this.props.navigation.getParam(\"name\", \"\")}/>\r\n\r\n          \r\n          </View>\r\n          </ScrollView>\r\n        </View>\r\n      );\r\n    }  \r\n  }","import jsPDF from 'jspdf';\r\nimport html2pdf from 'html2pdf.js';\r\nimport {TextUtility} from './Utilities'\r\nimport {TextTemplate, MedicalOrderSheetImageCombined} from './Templates';\r\nimport { PDFDocument, rgb } from 'pdf-lib';\r\n//const { PDFDocument, StandardFonts, rgb } = PDFLib\r\n\r\n\r\n\r\nexport class PdfGenerator {\r\n    constructor(patientNotes, signature, name, type) {\r\n        this.patientNotes = patientNotes;\r\n        this.signature = signature;\r\n        this.name = name;\r\n        this.type = type;\r\n\r\n        this.jspdfOpt2 = {\r\n            jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },\r\n            margin: [0.5, 0.3, 0.5, 0.3],\r\n            pagebreak: { mode: 'avoid-all'}\r\n        }\r\n\r\n        this.jspdfOpt3 = {\r\n            jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },\r\n            margin: [0.5, 0.0, 0.5, 0.0],\r\n            pagebreak: { mode: 'avoid-all'}\r\n        }\r\n    }\r\n\r\n    getOrderText(text) {\r\n        text = text.replace(/<br\\s*[\\/]?>/gi, \"\\n\")\r\n        text = text.replace(/<p[^>]*>/g, '').replace(/<\\/p>/g, '\\n');\r\n        text = new TextUtility().stripHtmlTags(text) \r\n\r\n        \r\n        const regex = /^[P|p]lan[:]?([\\s\\S]*?)\\n\\n/smg;\r\n        let m = regex.exec(text);\r\n        if(m && m[1]) {\r\n            return m[1]\r\n        }\r\n        else\r\n            return \"\"\r\n    }\r\n\r\n\r\n    async combinePdf() {\r\n        \r\n        let d = new Date()\r\n        let docs = []\r\n        let order = \"\"\r\n        let physicianName = this.name? this.name:'Steven Wesley';\r\n        let templateTime = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"][d.getMonth()] +\"-\" + d.getDate() + \"-\" + d.getFullYear();\r\n        let noteType = this.type\r\n\r\n        this.patientNotes.forEach(patientNote => {\r\n            let pdfWorker = (new html2pdf.Worker)\r\n            order = this.getOrderText(patientNote.note.text).split(/(?:\\r\\n|\\r|\\n)/g).filter((item) => item != \"\")\r\n            pdfWorker = pdfWorker.from(\r\n                new TextTemplate().generateFromDict({\r\n                    note: patientNote.note.text.replace(/{{signature}}/gm, this.signature)\r\n                })\r\n            )\r\n            .set(this.jspdfOpt2).toPdf().get('pdf')\r\n            .then( (pdf) => {\r\n              this.pdfHeader(pdf, patientNote.patient.name, d)\r\n            })\r\n            if(noteType===\"default\" || noteType===\"note\") docs.push(pdfWorker)\r\n\r\n            pdfWorker = (new html2pdf.Worker)\r\n            pdfWorker = pdfWorker.from(\r\n                new MedicalOrderSheetImageCombined().generateFromDict({\r\n                    datetime: templateTime, \r\n                    lastname: patientNote.patient.name.split(/[, ]+/)[0], \r\n                    firstname: patientNote.patient.name.split(/[, ]+/)[1], \r\n                    order0: order.slice(0,5).join(\"<br/>\"),\r\n                    order1: order.slice(5,10).join(\"<br/>\"), \r\n                    physicianName: physicianName,\r\n                    physicianName1: order.slice(5,10).length > 0? physicianName: \"\",\r\n                    signature: this.signature,\r\n                    signature1: order.slice(5,10).length > 0? this.signature: \"\",\r\n                    datetime1: order.slice(5,10).length > 0? templateTime: \"\",\r\n                    backgroundimage: require(\"./Assets/MedicalOrderSheet-2.jpg\"),\r\n                    logo: require(\"./Assets/ontario.jpg\")\r\n                })\r\n            ).set(this.jspdfOpt3).toPdf()       \r\n            if(noteType===\"default\" || noteType===\"order\") docs.push(pdfWorker)\r\n        })\r\n        const f = async () => {\r\n            let buffers = []\r\n\r\n            for(let i = 0; i < docs.length; i++){\r\n                let pdf = await docs[i].get(\"pdf\")\r\n                let buffer = await this.elementToPdfBuffer(pdf)\r\n                buffers.push(buffer)\r\n            }\r\n\r\n            let doc = await this.mergePdfs(buffers)\r\n            const pdfUrl = URL.createObjectURL(\r\n                new Blob([doc], { type: 'application/pdf' }),\r\n              );\r\n              this.downloadFile(pdfUrl)\r\n\r\n        }\r\n        f();\r\n    }\r\n\r\n    downloadFile(pdfUrl) {\r\n        const link = document.createElement('a');\r\n        // create a blobURI pointing to our Blob\r\n        link.href = pdfUrl\r\n        link.download = \"note-package.pdf\";\r\n        // some browser needs the anchor to be in the doc\r\n        document.body.append(link);\r\n        link.click();\r\n        link.remove();\r\n        // in case the Blob uses a lot of memory\r\n        window.addEventListener('focus', e=>URL.revokeObjectURL(link.href), {once:true});\r\n      };\r\n\r\n    async elementToPdfBuffer(pdf) {\r\n        const pdfBuffer = await pdf.output(\"arraybuffer\");\r\n        return pdfBuffer;\r\n      }\r\n\r\n    async mergePdfs(pdfsToMerge) {\r\n        const mergedPdf = await PDFDocument.create();\r\n\r\n        for(var i = 0; i < pdfsToMerge.length; i++){\r\n            let pdfBuffer = pdfsToMerge[i];\r\n            const pdf = await PDFDocument.load(pdfBuffer);\r\n            const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());\r\n            copiedPages.forEach((page) => {\r\n              // console.log('page', page.getWidth(), page.getHeight());\r\n              page.setWidth(page.getWidth());\r\n              page.getHeight(page.getHeight())\r\n              mergedPdf.addPage(page);\r\n            });            \r\n        }\r\n\r\n        const mergedPdfFile = await mergedPdf.save();\r\n        return mergedPdfFile;\r\n      }\r\n\r\n    pdfHeader(pdf, patient, date) {\r\n      console.log(pdf.internal)\r\n      var totalPages = pdf.internal.getNumberOfPages();\r\n\r\n      for (var i = 1; i <= totalPages; i++) {\r\n          pdf.setPage(i);\r\n          pdf.setFontSize(11);\r\n          pdf.setTextColor(0);\r\n          \r\n          pdf.text(\"Name: \" + patient, 0.2, 0.3);\r\n          pdf.text('DOB ________________ OTIS #: _______________________', 2.8, 0.3);\r\n          pdf.text(\"Date: \" + date.toLocaleDateString(), 7.2, 0.3);\r\n\r\n          pdf.text(' Page ' + i + ' of ' + totalPages, 4, pdf.internal.pageSize.getHeight()-0.3);\r\n      }         \r\n    }\r\n}","import React from 'react';\r\nimport {Platform, StyleSheet,ImageBackground, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList, Keyboard, Alert } from 'react-native';\r\nimport {PatientService, MenuService, SettingsService, TagService} from './DomainService'\r\nimport { CheckBox, ListItem, Icon, Badge, Divider, Button as StyledButton, SearchBar } from 'react-native-elements'\r\nimport {TextUtility} from './Utilities'\r\nimport {PdfGenerator} from './PdfGenerator'\r\n\r\n\r\nexport class CombineNotesScreen extends React.Component {\r\n    constructor(props){\r\n      super(props)\r\n\r\n      //var patientText = props.navigation.getParam(\"patientText\", \"\")\r\n\r\n      this.state = {\r\n//        patientText: patientText,\r\n        latestNotes: []\r\n      }\r\n\r\n      this.patients = {}\r\n      console.log(\"drop\")\r\n//      new PatientService().getPatientNotesByPatientName(patientText).then((r,e) =>{\r\n        new PatientService().getLastOpenedNotes(100).then((r,e) =>{\r\n          let notes = r.map((note) => {\r\n            note.checked = false;\r\n            return note;\r\n        })\r\n        this.setState({latestNotes: notes.reverse()})\r\n      });\r\n\r\n      this.settingsService = new SettingsService()\r\n      this.settingsService.getSettings().then((settings) => {\r\n        this.setState({settings: settings})\r\n      });\r\n\r\n      new PatientService().getAllPatients().then((patients) => {\r\n        patients = JSON.parse(patients)\r\n        patients.forEach(patient => {\r\n          this.patients[patient.id] = patient\r\n        })\r\n      });\r\n    }\r\n\r\n    selectDocument(id) {\r\n      let notes = this.state.latestNotes;\r\n      notes = notes.map((note) => {\r\n        if(note.id == id) {\r\n          note.checked = !note.checked;\r\n        }\r\n        return note\r\n      });\r\n      this.setState({latestNotes: notes})\r\n    }\r\n\r\n\r\n    generateDocument(type=\"default\") {\r\n      let patientService = new PatientService();\r\n\r\n      let patientNotes = this.state.latestNotes.filter((note) => {\r\n        return note.checked === true\r\n      }).map(note => {\r\n        return {note: note, patient: {id: note.patient}}\r\n      });\r\n\r\n      patientService.getAllPatients().then((patients) => {\r\n        patients = JSON.parse(patients)\r\n        let patientNotes2 = patientNotes.map((patientNote) => {\r\n          patientNote.patient.name = patients.filter((patient) => patient.id === patientNote.patient.id)[0].name\r\n          return patientNote\r\n        })\r\n\r\n        let pdfGenerator = new PdfGenerator(patientNotes2, this.state.settings.signature, this.state.settings.name, type);\r\n        pdfGenerator.combinePdf();\r\n      })\r\n    }\r\n\r\n    formatDate(date) {\r\n      return date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes()\r\n\r\n    }\r\n\r\n    render() {\r\n        return <View style={{flex:1}}>\r\n          <View style={{flexDirection: \"row\"}}>\r\n            <Button title=\"Generate Package\" onPress={() => this.generateDocument()}></Button>\r\n            <Button title=\"Generate Notes\" onPress={() => this.generateDocument(\"note\")}></Button>\r\n            <Button title=\"Generate OrderSheet\" onPress={() => this.generateDocument(\"order\")}></Button>\r\n          </View>\r\n          <ScrollView style={{flex:1}}>\r\n          <Text>Showing last 100 notes..</Text>\r\n          {\r\n            this.state.latestNotes.map((note) => {\r\n              return <CheckBox\r\n              title= { \r\n                  <View>\r\n                    <Text>{this.patients[note.patient] && this.patients[note.patient].name}</Text>\r\n                    <Text>Last Opened: {note.openDate && this.formatDate(new Date(note.openDate))}</Text>\r\n                    <Text>Last Edited: {note.updateDate && this.formatDate(new Date(note.updateDate))}</Text>\r\n                    <Text>{new TextUtility().stripHtmlTags(note.text).replace(/(\\r\\n|\\n|\\r)/gm,\" \").slice(0, 100)}</Text>\r\n                  </View>\r\n              }\r\n              iconRight\r\n              iconType='material'\r\n              checkedIcon='clear'\r\n              uncheckedIcon='add'\r\n              checkedColor='red'\r\n              onPress={() => this.selectDocument(note.id)}\r\n              checked={note.checked}\r\n            />\r\n            })\r\n          }\r\n\r\n        </ScrollView>\r\n        </View>\r\n    }\r\n}","import React from 'react';\r\nimport { StyleSheet, Text, View, Button, TextInput, Dimensions,KeyboardAvoidingView, StatusBar, ScrollView, FlatList } from 'react-native';\r\nimport { createDrawerNavigator, createStackNavigator } from 'react-navigation';\r\nimport { Constants } from 'expo';\r\nimport {SideMenu, MenuItem} from './SideMenu'\r\nimport {SideMenuManageScreen} from './SideMenuManage'\r\nimport { HomeScreen } from './HomeScreen';\r\nimport { SettingsScreen } from './SettingsScreen';\r\nimport {PatientsScreen, PatientDetailScreen, NoteDetailScreen} from './Screens'\r\nimport {CombineNotesScreen} from './CombineNotesScreen'\r\nimport styles from './Styles'\r\nimport { AsyncStorage } from \"react-native\"\r\n\r\nclass NoteDrawerNavigator extends React.Component {\r\n  render() {\r\n    return <NotesSuggestionDrawer/>;\r\n  }\r\n}\r\n\r\nconst NotesSuggestionDrawer = createDrawerNavigator({\r\n  Home: {\r\n    screen: NoteDetailScreen,\r\n    navigationOptions: {\r\n      drawerLabel: () => null\r\n    }\r\n  },\r\n},\r\n{\r\n  contentComponent: ({navigation}) => (<SideMenu navigation={navigation}/>),\r\n  drawerWidth: 300\r\n});\r\n\r\n\r\nconst MainStack = \r\n  createStackNavigator({\r\n    Home: {\r\n      screen: HomeScreen,\r\n      navigationOptions: {\r\n        title: 'Dashboard',\r\n      },\r\n    },\r\n    NoteDetail: {\r\n      screen: NotesSuggestionDrawer,\r\n      navigationOptions: NoteDetailScreen.navigationOptions\r\n    },\r\n    Patients: {\r\n      screen: PatientsScreen,\r\n      navigationOptions: {\r\n        title: 'Patient Listing',\r\n      },\r\n    },\r\n    PatientDetail: {\r\n      screen: PatientDetailScreen,\r\n      navigationOptions: {\r\n        title: 'Patient Detail',\r\n      },\r\n    },\r\n    Categories: {\r\n      screen: SideMenuManageScreen,\r\n      navigationOptions: {\r\n        title: 'Categories and Phrases',\r\n      },\r\n    },\r\n    Settings: {\r\n      screen: SettingsScreen,\r\n      navigationOptions: {\r\n        title: 'Settings',\r\n      },\r\n    },\r\n    CombineNotesDetail: {\r\n      screen: CombineNotesScreen,\r\n      navigationOptions: {\r\n        title: 'Combine Notes',\r\n      },\r\n    },\r\n  },\r\n  {\r\n    initialRouteName: 'Home',\r\n    gesturesEnabled: false,\r\n  }\r\n  ) \r\n\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props){\r\n    super(props)\r\n    //AsyncStorage.getAllKeys().then(AsyncStorage.multiRemove)\r\n  }\r\n\r\n  render() {\r\n    return <MainStack />;\r\n    \r\n  }\r\n}","/* eslint-env browser */\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function() {\n    navigator.serviceWorker\n      .register('https://kamillus.github.io/notebook/expo-service-worker.js', { scope: 'https://kamillus.github.io/notebook/' })\n      .then(function(info) {\n        // console.info('Registered service-worker', info);\n      })\n      .catch(function(error) {\n        console.info('Failed to register service-worker', error);\n      });\n  });\n}\n","module.exports = __webpack_public_path__ + \"static/media/black-1072366_1920.fb5dacb7.jpg\";","module.exports = __webpack_public_path__ + \"static/media/MedicalOrderSheet-1.492edd00.jpg\";"],"sourceRoot":""}